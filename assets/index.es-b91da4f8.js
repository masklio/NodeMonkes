import{g as hu,d as _d,f as mt,_ as Ob}from"./index-37e39c81.js";var fu={exports:{}},Ci=typeof Reflect=="object"?Reflect:null,Lf=Ci&&typeof Ci.apply=="function"?Ci.apply:function(e,r,s){return Function.prototype.apply.call(e,r,s)},Co;Ci&&typeof Ci.ownKeys=="function"?Co=Ci.ownKeys:Object.getOwnPropertySymbols?Co=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Co=function(e){return Object.getOwnPropertyNames(e)};function Ib(i){console&&console.warn&&console.warn(i)}var bd=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}fu.exports=ot;fu.exports.once=Ab;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var Uf=10;function $o(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return Uf},set:function(i){if(typeof i!="number"||i<0||bd(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Uf=i}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||bd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function md(i){return i._maxListeners===void 0?ot.defaultMaxListeners:i._maxListeners}ot.prototype.getMaxListeners=function(){return md(this)};ot.prototype.emit=function(e){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var o=e==="error",d=this._events;if(d!==void 0)o=o&&d.error===void 0;else if(!o)return!1;if(o){var b;if(r.length>0&&(b=r[0]),b instanceof Error)throw b;var v=new Error("Unhandled error."+(b?" ("+b.message+")":""));throw v.context=b,v}var w=d[e];if(w===void 0)return!1;if(typeof w=="function")Lf(w,this,r);else for(var C=w.length,A=Od(w,C),s=0;s<C;++s)Lf(A[s],this,r);return!0};function wd(i,e,r,s){var o,d,b;if($o(r),d=i._events,d===void 0?(d=i._events=Object.create(null),i._eventsCount=0):(d.newListener!==void 0&&(i.emit("newListener",e,r.listener?r.listener:r),d=i._events),b=d[e]),b===void 0)b=d[e]=r,++i._eventsCount;else if(typeof b=="function"?b=d[e]=s?[r,b]:[b,r]:s?b.unshift(r):b.push(r),o=md(i),o>0&&b.length>o&&!b.warned){b.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=i,v.type=e,v.count=b.length,Ib(v)}return i}ot.prototype.addListener=function(e,r){return wd(this,e,r,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,r){return wd(this,e,r,!0)};function xb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ed(i,e,r){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:r},o=xb.bind(s);return o.listener=r,s.wrapFn=o,o}ot.prototype.once=function(e,r){return $o(r),this.on(e,Ed(this,e,r)),this};ot.prototype.prependOnceListener=function(e,r){return $o(r),this.prependListener(e,Ed(this,e,r)),this};ot.prototype.removeListener=function(e,r){var s,o,d,b,v;if($o(r),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||r));else if(typeof s!="function"){for(d=-1,b=s.length-1;b>=0;b--)if(s[b]===r||s[b].listener===r){v=s[b].listener,d=b;break}if(d<0)return this;d===0?s.shift():Pb(s,d),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,v||r)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var r,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var d=Object.keys(s),b;for(o=0;o<d.length;++o)b=d[o],b!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this};function Dd(i,e,r){var s=i._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?Cb(o):Od(o,o.length)}ot.prototype.listeners=function(e){return Dd(this,e,!0)};ot.prototype.rawListeners=function(e){return Dd(this,e,!1)};ot.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Sd.call(i,e)};ot.prototype.listenerCount=Sd;function Sd(i){var e=this._events;if(e!==void 0){var r=e[i];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Co(this._events):[]};function Od(i,e){for(var r=new Array(e),s=0;s<e;++s)r[s]=i[s];return r}function Pb(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function Cb(i){for(var e=new Array(i.length),r=0;r<e.length;++r)e[r]=i[r].listener||i[r];return e}function Ab(i,e){return new Promise(function(r,s){function o(b){i.removeListener(e,d),s(b)}function d(){typeof i.removeListener=="function"&&i.removeListener("error",o),r([].slice.call(arguments))}Id(i,e,d,{once:!0}),e!=="error"&&Tb(i,o,{once:!0})})}function Tb(i,e,r){typeof i.on=="function"&&Id(i,"error",e,r)}function Id(i,e,r,s){if(typeof i.on=="function")s.once?i.once(e,r):i.on(e,r);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(d){s.once&&i.removeEventListener(e,o),r(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var Ir=fu.exports;const lu=hu(Ir);var du={},Bo={},Le={},xd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(v,w){var C=v>>>16&65535,A=v&65535,$=w>>>16&65535,G=w&65535;return A*G+(C*G+A*$<<16>>>0)|0}i.mul=Math.imul||e;function r(v,w){return v+w|0}i.add=r;function s(v,w){return v-w|0}i.sub=s;function o(v,w){return v<<w|v>>>32-w}i.rotl=o;function d(v,w){return v<<32-w|v>>>w}i.rotr=d;function b(v){return typeof v=="number"&&isFinite(v)&&Math.floor(v)===v}i.isInteger=Number.isInteger||b,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(v){return i.isInteger(v)&&v>=-i.MAX_SAFE_INTEGER&&v<=i.MAX_SAFE_INTEGER}})(xd);Object.defineProperty(Le,"__esModule",{value:!0});var Pd=xd;function Rb(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}Le.readInt16BE=Rb;function Nb(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}Le.readUint16BE=Nb;function Fb(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}Le.readInt16LE=Fb;function jb(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}Le.readUint16LE=jb;function Cd(i,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=i>>>8,e[r+1]=i>>>0,e}Le.writeUint16BE=Cd;Le.writeInt16BE=Cd;function Ad(i,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=i>>>0,e[r+1]=i>>>8,e}Le.writeUint16LE=Ad;Le.writeInt16LE=Ad;function Vc(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}Le.readInt32BE=Vc;function kc(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}Le.readUint32BE=kc;function Gc(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}Le.readInt32LE=Gc;function Wc(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}Le.readUint32LE=Wc;function No(i,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=i>>>24,e[r+1]=i>>>16,e[r+2]=i>>>8,e[r+3]=i>>>0,e}Le.writeUint32BE=No;Le.writeInt32BE=No;function Fo(i,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=i>>>0,e[r+1]=i>>>8,e[r+2]=i>>>16,e[r+3]=i>>>24,e}Le.writeUint32LE=Fo;Le.writeInt32LE=Fo;function Lb(i,e){e===void 0&&(e=0);var r=Vc(i,e),s=Vc(i,e+4);return r*4294967296+s-(s>>31)*4294967296}Le.readInt64BE=Lb;function Ub(i,e){e===void 0&&(e=0);var r=kc(i,e),s=kc(i,e+4);return r*4294967296+s}Le.readUint64BE=Ub;function Mb(i,e){e===void 0&&(e=0);var r=Gc(i,e),s=Gc(i,e+4);return s*4294967296+r-(r>>31)*4294967296}Le.readInt64LE=Mb;function $b(i,e){e===void 0&&(e=0);var r=Wc(i,e),s=Wc(i,e+4);return s*4294967296+r}Le.readUint64LE=$b;function Td(i,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),No(i/4294967296>>>0,e,r),No(i>>>0,e,r+4),e}Le.writeUint64BE=Td;Le.writeInt64BE=Td;function Rd(i,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Fo(i>>>0,e,r),Fo(i/4294967296>>>0,e,r+4),e}Le.writeUint64LE=Rd;Le.writeInt64LE=Rd;function Bb(i,e,r){if(r===void 0&&(r=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,d=i/8+r-1;d>=r;d--)s+=e[d]*o,o*=256;return s}Le.readUintBE=Bb;function qb(i,e,r){if(r===void 0&&(r=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,d=r;d<r+i/8;d++)s+=e[d]*o,o*=256;return s}Le.readUintLE=qb;function zb(i,e,r,s){if(r===void 0&&(r=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Pd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,d=i/8+s-1;d>=s;d--)r[d]=e/o&255,o*=256;return r}Le.writeUintBE=zb;function Hb(i,e,r,s){if(r===void 0&&(r=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Pd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,d=s;d<s+i/8;d++)r[d]=e/o&255,o*=256;return r}Le.writeUintLE=Hb;function Kb(i,e){e===void 0&&(e=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat32(e)}Le.readFloat32BE=Kb;function Vb(i,e){e===void 0&&(e=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat32(e,!0)}Le.readFloat32LE=Vb;function kb(i,e){e===void 0&&(e=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat64(e)}Le.readFloat64BE=kb;function Gb(i,e){e===void 0&&(e=0);var r=new DataView(i.buffer,i.byteOffset,i.byteLength);return r.getFloat64(e,!0)}Le.readFloat64LE=Gb;function Wb(i,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,i),e}Le.writeFloat32BE=Wb;function Yb(i,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,i,!0),e}Le.writeFloat32LE=Yb;function Jb(i,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,i),e}Le.writeFloat64BE=Jb;function Xb(i,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,i,!0),e}Le.writeFloat64LE=Xb;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});function Qb(i){for(var e=0;e<i.length;e++)i[e]=0;return i}xr.wipe=Qb;Object.defineProperty(Bo,"__esModule",{value:!0});var tr=Le,Yc=xr,Zb=20;function em(i,e,r){for(var s=1634760805,o=857760878,d=2036477234,b=1797285236,v=r[3]<<24|r[2]<<16|r[1]<<8|r[0],w=r[7]<<24|r[6]<<16|r[5]<<8|r[4],C=r[11]<<24|r[10]<<16|r[9]<<8|r[8],A=r[15]<<24|r[14]<<16|r[13]<<8|r[12],$=r[19]<<24|r[18]<<16|r[17]<<8|r[16],G=r[23]<<24|r[22]<<16|r[21]<<8|r[20],B=r[27]<<24|r[26]<<16|r[25]<<8|r[24],F=r[31]<<24|r[30]<<16|r[29]<<8|r[28],J=e[3]<<24|e[2]<<16|e[1]<<8|e[0],Q=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ae=e[11]<<24|e[10]<<16|e[9]<<8|e[8],U=e[15]<<24|e[14]<<16|e[13]<<8|e[12],q=s,T=o,N=d,S=b,u=v,_=w,Z=C,c=A,g=$,y=G,E=B,f=F,l=J,x=Q,j=ae,K=U,I=0;I<Zb;I+=2)q=q+u|0,l^=q,l=l>>>32-16|l<<16,g=g+l|0,u^=g,u=u>>>32-12|u<<12,T=T+_|0,x^=T,x=x>>>32-16|x<<16,y=y+x|0,_^=y,_=_>>>32-12|_<<12,N=N+Z|0,j^=N,j=j>>>32-16|j<<16,E=E+j|0,Z^=E,Z=Z>>>32-12|Z<<12,S=S+c|0,K^=S,K=K>>>32-16|K<<16,f=f+K|0,c^=f,c=c>>>32-12|c<<12,N=N+Z|0,j^=N,j=j>>>32-8|j<<8,E=E+j|0,Z^=E,Z=Z>>>32-7|Z<<7,S=S+c|0,K^=S,K=K>>>32-8|K<<8,f=f+K|0,c^=f,c=c>>>32-7|c<<7,T=T+_|0,x^=T,x=x>>>32-8|x<<8,y=y+x|0,_^=y,_=_>>>32-7|_<<7,q=q+u|0,l^=q,l=l>>>32-8|l<<8,g=g+l|0,u^=g,u=u>>>32-7|u<<7,q=q+_|0,K^=q,K=K>>>32-16|K<<16,E=E+K|0,_^=E,_=_>>>32-12|_<<12,T=T+Z|0,l^=T,l=l>>>32-16|l<<16,f=f+l|0,Z^=f,Z=Z>>>32-12|Z<<12,N=N+c|0,x^=N,x=x>>>32-16|x<<16,g=g+x|0,c^=g,c=c>>>32-12|c<<12,S=S+u|0,j^=S,j=j>>>32-16|j<<16,y=y+j|0,u^=y,u=u>>>32-12|u<<12,N=N+c|0,x^=N,x=x>>>32-8|x<<8,g=g+x|0,c^=g,c=c>>>32-7|c<<7,S=S+u|0,j^=S,j=j>>>32-8|j<<8,y=y+j|0,u^=y,u=u>>>32-7|u<<7,T=T+Z|0,l^=T,l=l>>>32-8|l<<8,f=f+l|0,Z^=f,Z=Z>>>32-7|Z<<7,q=q+_|0,K^=q,K=K>>>32-8|K<<8,E=E+K|0,_^=E,_=_>>>32-7|_<<7;tr.writeUint32LE(q+s|0,i,0),tr.writeUint32LE(T+o|0,i,4),tr.writeUint32LE(N+d|0,i,8),tr.writeUint32LE(S+b|0,i,12),tr.writeUint32LE(u+v|0,i,16),tr.writeUint32LE(_+w|0,i,20),tr.writeUint32LE(Z+C|0,i,24),tr.writeUint32LE(c+A|0,i,28),tr.writeUint32LE(g+$|0,i,32),tr.writeUint32LE(y+G|0,i,36),tr.writeUint32LE(E+B|0,i,40),tr.writeUint32LE(f+F|0,i,44),tr.writeUint32LE(l+J|0,i,48),tr.writeUint32LE(x+Q|0,i,52),tr.writeUint32LE(j+ae|0,i,56),tr.writeUint32LE(K+U|0,i,60)}function Nd(i,e,r,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var d,b;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");d=new Uint8Array(16),b=d.length-e.length,d.set(e,b)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");d=e,b=o}for(var v=new Uint8Array(64),w=0;w<r.length;w+=64){em(v,d,i);for(var C=w;C<w+64&&C<r.length;C++)s[C]=r[C]^v[C-w];rm(d,0,b)}return Yc.wipe(v),o===0&&Yc.wipe(d),s}Bo.streamXOR=Nd;function tm(i,e,r,s){return s===void 0&&(s=0),Yc.wipe(r),Nd(i,e,r,r,s)}Bo.stream=tm;function rm(i,e,r){for(var s=1;r--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Fd={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});function nm(i,e,r){return~(i-1)&e|i-1&r}Nn.select=nm;function im(i,e){return(i|0)-(e|0)-1>>>31&1}Nn.lessOrEqual=im;function jd(i,e){if(i.length!==e.length)return 0;for(var r=0,s=0;s<i.length;s++)r|=i[s]^e[s];return 1&r-1>>>8}Nn.compare=jd;function sm(i,e){return i.length===0||e.length===0?!1:jd(i,e)!==0}Nn.equal=sm;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Nn,r=xr;i.DIGEST_LENGTH=16;var s=function(){function b(v){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var w=v[0]|v[1]<<8;this._r[0]=w&8191;var C=v[2]|v[3]<<8;this._r[1]=(w>>>13|C<<3)&8191;var A=v[4]|v[5]<<8;this._r[2]=(C>>>10|A<<6)&7939;var $=v[6]|v[7]<<8;this._r[3]=(A>>>7|$<<9)&8191;var G=v[8]|v[9]<<8;this._r[4]=($>>>4|G<<12)&255,this._r[5]=G>>>1&8190;var B=v[10]|v[11]<<8;this._r[6]=(G>>>14|B<<2)&8191;var F=v[12]|v[13]<<8;this._r[7]=(B>>>11|F<<5)&8065;var J=v[14]|v[15]<<8;this._r[8]=(F>>>8|J<<8)&8191,this._r[9]=J>>>5&127,this._pad[0]=v[16]|v[17]<<8,this._pad[1]=v[18]|v[19]<<8,this._pad[2]=v[20]|v[21]<<8,this._pad[3]=v[22]|v[23]<<8,this._pad[4]=v[24]|v[25]<<8,this._pad[5]=v[26]|v[27]<<8,this._pad[6]=v[28]|v[29]<<8,this._pad[7]=v[30]|v[31]<<8}return b.prototype._blocks=function(v,w,C){for(var A=this._fin?0:2048,$=this._h[0],G=this._h[1],B=this._h[2],F=this._h[3],J=this._h[4],Q=this._h[5],ae=this._h[6],U=this._h[7],q=this._h[8],T=this._h[9],N=this._r[0],S=this._r[1],u=this._r[2],_=this._r[3],Z=this._r[4],c=this._r[5],g=this._r[6],y=this._r[7],E=this._r[8],f=this._r[9];C>=16;){var l=v[w+0]|v[w+1]<<8;$+=l&8191;var x=v[w+2]|v[w+3]<<8;G+=(l>>>13|x<<3)&8191;var j=v[w+4]|v[w+5]<<8;B+=(x>>>10|j<<6)&8191;var K=v[w+6]|v[w+7]<<8;F+=(j>>>7|K<<9)&8191;var I=v[w+8]|v[w+9]<<8;J+=(K>>>4|I<<12)&8191,Q+=I>>>1&8191;var z=v[w+10]|v[w+11]<<8;ae+=(I>>>14|z<<2)&8191;var te=v[w+12]|v[w+13]<<8;U+=(z>>>11|te<<5)&8191;var re=v[w+14]|v[w+15]<<8;q+=(te>>>8|re<<8)&8191,T+=re>>>5|A;var ne=0,ge=ne;ge+=$*N,ge+=G*(5*f),ge+=B*(5*E),ge+=F*(5*y),ge+=J*(5*g),ne=ge>>>13,ge&=8191,ge+=Q*(5*c),ge+=ae*(5*Z),ge+=U*(5*_),ge+=q*(5*u),ge+=T*(5*S),ne+=ge>>>13,ge&=8191;var fe=ne;fe+=$*S,fe+=G*N,fe+=B*(5*f),fe+=F*(5*E),fe+=J*(5*y),ne=fe>>>13,fe&=8191,fe+=Q*(5*g),fe+=ae*(5*c),fe+=U*(5*Z),fe+=q*(5*_),fe+=T*(5*u),ne+=fe>>>13,fe&=8191;var me=ne;me+=$*u,me+=G*S,me+=B*N,me+=F*(5*f),me+=J*(5*E),ne=me>>>13,me&=8191,me+=Q*(5*y),me+=ae*(5*g),me+=U*(5*c),me+=q*(5*Z),me+=T*(5*_),ne+=me>>>13,me&=8191;var X=ne;X+=$*_,X+=G*u,X+=B*S,X+=F*N,X+=J*(5*f),ne=X>>>13,X&=8191,X+=Q*(5*E),X+=ae*(5*y),X+=U*(5*g),X+=q*(5*c),X+=T*(5*Z),ne+=X>>>13,X&=8191;var Y=ne;Y+=$*Z,Y+=G*_,Y+=B*u,Y+=F*S,Y+=J*N,ne=Y>>>13,Y&=8191,Y+=Q*(5*f),Y+=ae*(5*E),Y+=U*(5*y),Y+=q*(5*g),Y+=T*(5*c),ne+=Y>>>13,Y&=8191;var H=ne;H+=$*c,H+=G*Z,H+=B*_,H+=F*u,H+=J*S,ne=H>>>13,H&=8191,H+=Q*N,H+=ae*(5*f),H+=U*(5*E),H+=q*(5*y),H+=T*(5*g),ne+=H>>>13,H&=8191;var p=ne;p+=$*g,p+=G*c,p+=B*Z,p+=F*_,p+=J*u,ne=p>>>13,p&=8191,p+=Q*S,p+=ae*N,p+=U*(5*f),p+=q*(5*E),p+=T*(5*y),ne+=p>>>13,p&=8191;var L=ne;L+=$*y,L+=G*g,L+=B*c,L+=F*Z,L+=J*_,ne=L>>>13,L&=8191,L+=Q*u,L+=ae*S,L+=U*N,L+=q*(5*f),L+=T*(5*E),ne+=L>>>13,L&=8191;var he=ne;he+=$*E,he+=G*y,he+=B*g,he+=F*c,he+=J*Z,ne=he>>>13,he&=8191,he+=Q*_,he+=ae*u,he+=U*S,he+=q*N,he+=T*(5*f),ne+=he>>>13,he&=8191;var pe=ne;pe+=$*f,pe+=G*E,pe+=B*y,pe+=F*g,pe+=J*c,ne=pe>>>13,pe&=8191,pe+=Q*Z,pe+=ae*_,pe+=U*u,pe+=q*S,pe+=T*N,ne+=pe>>>13,pe&=8191,ne=(ne<<2)+ne|0,ne=ne+ge|0,ge=ne&8191,ne=ne>>>13,fe+=ne,$=ge,G=fe,B=me,F=X,J=Y,Q=H,ae=p,U=L,q=he,T=pe,w+=16,C-=16}this._h[0]=$,this._h[1]=G,this._h[2]=B,this._h[3]=F,this._h[4]=J,this._h[5]=Q,this._h[6]=ae,this._h[7]=U,this._h[8]=q,this._h[9]=T},b.prototype.finish=function(v,w){w===void 0&&(w=0);var C=new Uint16Array(10),A,$,G,B;if(this._leftover){for(B=this._leftover,this._buffer[B++]=1;B<16;B++)this._buffer[B]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(A=this._h[1]>>>13,this._h[1]&=8191,B=2;B<10;B++)this._h[B]+=A,A=this._h[B]>>>13,this._h[B]&=8191;for(this._h[0]+=A*5,A=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=A,A=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=A,C[0]=this._h[0]+5,A=C[0]>>>13,C[0]&=8191,B=1;B<10;B++)C[B]=this._h[B]+A,A=C[B]>>>13,C[B]&=8191;for(C[9]-=8192,$=(A^1)-1,B=0;B<10;B++)C[B]&=$;for($=~$,B=0;B<10;B++)this._h[B]=this._h[B]&$|C[B];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,G=this._h[0]+this._pad[0],this._h[0]=G&65535,B=1;B<8;B++)G=(this._h[B]+this._pad[B]|0)+(G>>>16)|0,this._h[B]=G&65535;return v[w+0]=this._h[0]>>>0,v[w+1]=this._h[0]>>>8,v[w+2]=this._h[1]>>>0,v[w+3]=this._h[1]>>>8,v[w+4]=this._h[2]>>>0,v[w+5]=this._h[2]>>>8,v[w+6]=this._h[3]>>>0,v[w+7]=this._h[3]>>>8,v[w+8]=this._h[4]>>>0,v[w+9]=this._h[4]>>>8,v[w+10]=this._h[5]>>>0,v[w+11]=this._h[5]>>>8,v[w+12]=this._h[6]>>>0,v[w+13]=this._h[6]>>>8,v[w+14]=this._h[7]>>>0,v[w+15]=this._h[7]>>>8,this._finished=!0,this},b.prototype.update=function(v){var w=0,C=v.length,A;if(this._leftover){A=16-this._leftover,A>C&&(A=C);for(var $=0;$<A;$++)this._buffer[this._leftover+$]=v[w+$];if(C-=A,w+=A,this._leftover+=A,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(C>=16&&(A=C-C%16,this._blocks(v,w,A),w+=A,C-=A),C){for(var $=0;$<C;$++)this._buffer[this._leftover+$]=v[w+$];this._leftover+=C}return this},b.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var v=new Uint8Array(16);return this.finish(v),v},b.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},b}();i.Poly1305=s;function o(b,v){var w=new s(b);w.update(v);var C=w.digest();return w.clean(),C}i.oneTimeAuth=o;function d(b,v){return b.length!==i.DIGEST_LENGTH||v.length!==i.DIGEST_LENGTH?!1:e.equal(b,v)}i.equal=d})(Fd);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Bo,r=Fd,s=xr,o=Le,d=Nn;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var b=new Uint8Array(16),v=function(){function w(C){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,C.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(C)}return w.prototype.seal=function(C,A,$,G){if(C.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var B=new Uint8Array(16);B.set(C,B.length-C.length);var F=new Uint8Array(32);e.stream(this._key,B,F,4);var J=A.length+this.tagLength,Q;if(G){if(G.length!==J)throw new Error("ChaCha20Poly1305: incorrect destination length");Q=G}else Q=new Uint8Array(J);return e.streamXOR(this._key,B,A,Q,4),this._authenticate(Q.subarray(Q.length-this.tagLength,Q.length),F,Q.subarray(0,Q.length-this.tagLength),$),s.wipe(B),Q},w.prototype.open=function(C,A,$,G){if(C.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(A.length<this.tagLength)return null;var B=new Uint8Array(16);B.set(C,B.length-C.length);var F=new Uint8Array(32);e.stream(this._key,B,F,4);var J=new Uint8Array(this.tagLength);if(this._authenticate(J,F,A.subarray(0,A.length-this.tagLength),$),!d.equal(J,A.subarray(A.length-this.tagLength,A.length)))return null;var Q=A.length-this.tagLength,ae;if(G){if(G.length!==Q)throw new Error("ChaCha20Poly1305: incorrect destination length");ae=G}else ae=new Uint8Array(Q);return e.streamXOR(this._key,B,A.subarray(0,A.length-this.tagLength),ae,4),s.wipe(B),ae},w.prototype.clean=function(){return s.wipe(this._key),this},w.prototype._authenticate=function(C,A,$,G){var B=new r.Poly1305(A);G&&(B.update(G),G.length%16>0&&B.update(b.subarray(G.length%16))),B.update($),$.length%16>0&&B.update(b.subarray($.length%16));var F=new Uint8Array(8);G&&o.writeUint64LE(G.length,F),B.update(F),o.writeUint64LE($.length,F),B.update(F);for(var J=B.digest(),Q=0;Q<J.length;Q++)C[Q]=J[Q];B.clean(),s.wipe(J),s.wipe(F)},w}();i.ChaCha20Poly1305=v})(du);var Ld={},gs={},pu={};Object.defineProperty(pu,"__esModule",{value:!0});function om(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}pu.isSerializableHash=om;Object.defineProperty(gs,"__esModule",{value:!0});var Zr=pu,am=Nn,cm=xr,Ud=function(){function i(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Zr.isSerializableHash(this._inner)&&Zr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),cm.wipe(s)}return i.prototype.reset=function(){if(!Zr.isSerializableHash(this._inner)||!Zr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){Zr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Zr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!Zr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!Zr.isSerializableHash(this._inner)||!Zr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!Zr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();gs.HMAC=Ud;function um(i,e,r){var s=new Ud(i,e);s.update(r);var o=s.digest();return s.clean(),o}gs.hmac=um;gs.equal=am.equal;Object.defineProperty(Ld,"__esModule",{value:!0});var Mf=gs,$f=xr,hm=function(){function i(e,r,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var d=Mf.hmac(this._hash,s,r);this._hmac=new Mf.HMAC(e,d),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var r=new Uint8Array(e),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},i.prototype.clean=function(){this._hmac.clean(),$f.wipe(this._buffer),$f.wipe(this._counter),this._bufpos=0},i}(),fm=Ld.HKDF=hm,Ri={},qo={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.BrowserRandomSource=void 0;const Bf=65536;class lm{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let s=0;s<r.length;s+=Bf)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,Bf)));return r}}zo.BrowserRandomSource=lm;function dm(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ho={};const pm={},gm=Object.freeze(Object.defineProperty({__proto__:null,default:pm},Symbol.toStringTag,{value:"Module"})),ym=_d(gm);Object.defineProperty(Ho,"__esModule",{value:!0});Ho.NodeRandomSource=void 0;const vm=xr;class _m{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof dm<"u"){const e=ym;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=r[o];return(0,vm.wipe)(r),s}}Ho.NodeRandomSource=_m;Object.defineProperty(qo,"__esModule",{value:!0});qo.SystemRandomSource=void 0;const bm=zo,mm=Ho;class wm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new bm.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new mm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}qo.SystemRandomSource=wm;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=qo,r=Le,s=xr;i.defaultRandomSource=new e.SystemRandomSource;function o(C,A=i.defaultRandomSource){return A.randomBytes(C)}i.randomBytes=o;function d(C=i.defaultRandomSource){const A=o(4,C),$=(0,r.readUint32LE)(A);return(0,s.wipe)(A),$}i.randomUint32=d;const b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function v(C,A=b,$=i.defaultRandomSource){if(A.length<2)throw new Error("randomString charset is too short");if(A.length>256)throw new Error("randomString charset is too long");let G="";const B=A.length,F=256-256%B;for(;C>0;){const J=o(Math.ceil(C*256/F),$);for(let Q=0;Q<J.length&&C>0;Q++){const ae=J[Q];ae<F&&(G+=A.charAt(ae%B),C--)}(0,s.wipe)(J)}return G}i.randomString=v;function w(C,A=b,$=i.defaultRandomSource){const G=Math.ceil(C/(Math.log(A.length)/Math.LN2));return v(G,A,$)}i.randomStringForEntropy=w})(Ri);var Ko={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Le,r=xr;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function v(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return v.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},v.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},v.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},v.prototype.update=function(w,C){if(C===void 0&&(C=w.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this._bytesHashed+=C,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&C>0;)this._buffer[this._bufferLength++]=w[A++],C--;this._bufferLength===this.blockSize&&(d(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(C>=this.blockSize&&(A=d(this._temp,this._state,w,A,C),C%=this.blockSize);C>0;)this._buffer[this._bufferLength++]=w[A++],C--;return this},v.prototype.finish=function(w){if(!this._finished){var C=this._bytesHashed,A=this._bufferLength,$=C/536870912|0,G=C<<3,B=C%64<56?64:128;this._buffer[A]=128;for(var F=A+1;F<B-8;F++)this._buffer[F]=0;e.writeUint32BE($,this._buffer,B-8),e.writeUint32BE(G,this._buffer,B-4),d(this._temp,this._state,this._buffer,0,B),this._finished=!0}for(var F=0;F<this.digestLength/4;F++)e.writeUint32BE(this._state[F],w,F*4);return this},v.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},v.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},v.prototype.restoreState=function(w){return this._state.set(w.state),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},v.prototype.cleanSavedState=function(w){r.wipe(w.state),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},v}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function d(v,w,C,A,$){for(;$>=64;){for(var G=w[0],B=w[1],F=w[2],J=w[3],Q=w[4],ae=w[5],U=w[6],q=w[7],T=0;T<16;T++){var N=A+T*4;v[T]=e.readUint32BE(C,N)}for(var T=16;T<64;T++){var S=v[T-2],u=(S>>>17|S<<32-17)^(S>>>19|S<<32-19)^S>>>10;S=v[T-15];var _=(S>>>7|S<<32-7)^(S>>>18|S<<32-18)^S>>>3;v[T]=(u+v[T-7]|0)+(_+v[T-16]|0)}for(var T=0;T<64;T++){var u=(((Q>>>6|Q<<26)^(Q>>>11|Q<<21)^(Q>>>25|Q<<7))+(Q&ae^~Q&U)|0)+(q+(o[T]+v[T]|0)|0)|0,_=((G>>>2|G<<32-2)^(G>>>13|G<<32-13)^(G>>>22|G<<32-22))+(G&B^G&F^B&F)|0;q=U,U=ae,ae=Q,Q=J+u|0,J=F,F=B,B=G,G=u+_|0}w[0]+=G,w[1]+=B,w[2]+=F,w[3]+=J,w[4]+=Q,w[5]+=ae,w[6]+=U,w[7]+=q,A+=64,$-=64}return A}function b(v){var w=new s;w.update(v);var C=w.digest();return w.clean(),C}i.hash=b})(Ko);var gu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=Ri,r=xr;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(T){const N=new Float64Array(16);if(T)for(let S=0;S<T.length;S++)N[S]=T[S];return N}const o=new Uint8Array(32);o[0]=9;const d=s([56129,1]);function b(T){let N=1;for(let S=0;S<16;S++){let u=T[S]+N+65535;N=Math.floor(u/65536),T[S]=u-N*65536}T[0]+=N-1+37*(N-1)}function v(T,N,S){const u=~(S-1);for(let _=0;_<16;_++){const Z=u&(T[_]^N[_]);T[_]^=Z,N[_]^=Z}}function w(T,N){const S=s(),u=s();for(let _=0;_<16;_++)u[_]=N[_];b(u),b(u),b(u);for(let _=0;_<2;_++){S[0]=u[0]-65517;for(let c=1;c<15;c++)S[c]=u[c]-65535-(S[c-1]>>16&1),S[c-1]&=65535;S[15]=u[15]-32767-(S[14]>>16&1);const Z=S[15]>>16&1;S[14]&=65535,v(u,S,1-Z)}for(let _=0;_<16;_++)T[2*_]=u[_]&255,T[2*_+1]=u[_]>>8}function C(T,N){for(let S=0;S<16;S++)T[S]=N[2*S]+(N[2*S+1]<<8);T[15]&=32767}function A(T,N,S){for(let u=0;u<16;u++)T[u]=N[u]+S[u]}function $(T,N,S){for(let u=0;u<16;u++)T[u]=N[u]-S[u]}function G(T,N,S){let u,_,Z=0,c=0,g=0,y=0,E=0,f=0,l=0,x=0,j=0,K=0,I=0,z=0,te=0,re=0,ne=0,ge=0,fe=0,me=0,X=0,Y=0,H=0,p=0,L=0,he=0,pe=0,Oe=0,ze=0,Ve=0,Ue=0,gt=0,yt=0,$e=S[0],Ie=S[1],Ne=S[2],Fe=S[3],Be=S[4],Pe=S[5],je=S[6],Se=S[7],Ce=S[8],He=S[9],xe=S[10],ke=S[11],We=S[12],et=S[13],tt=S[14],Je=S[15];u=N[0],Z+=u*$e,c+=u*Ie,g+=u*Ne,y+=u*Fe,E+=u*Be,f+=u*Pe,l+=u*je,x+=u*Se,j+=u*Ce,K+=u*He,I+=u*xe,z+=u*ke,te+=u*We,re+=u*et,ne+=u*tt,ge+=u*Je,u=N[1],c+=u*$e,g+=u*Ie,y+=u*Ne,E+=u*Fe,f+=u*Be,l+=u*Pe,x+=u*je,j+=u*Se,K+=u*Ce,I+=u*He,z+=u*xe,te+=u*ke,re+=u*We,ne+=u*et,ge+=u*tt,fe+=u*Je,u=N[2],g+=u*$e,y+=u*Ie,E+=u*Ne,f+=u*Fe,l+=u*Be,x+=u*Pe,j+=u*je,K+=u*Se,I+=u*Ce,z+=u*He,te+=u*xe,re+=u*ke,ne+=u*We,ge+=u*et,fe+=u*tt,me+=u*Je,u=N[3],y+=u*$e,E+=u*Ie,f+=u*Ne,l+=u*Fe,x+=u*Be,j+=u*Pe,K+=u*je,I+=u*Se,z+=u*Ce,te+=u*He,re+=u*xe,ne+=u*ke,ge+=u*We,fe+=u*et,me+=u*tt,X+=u*Je,u=N[4],E+=u*$e,f+=u*Ie,l+=u*Ne,x+=u*Fe,j+=u*Be,K+=u*Pe,I+=u*je,z+=u*Se,te+=u*Ce,re+=u*He,ne+=u*xe,ge+=u*ke,fe+=u*We,me+=u*et,X+=u*tt,Y+=u*Je,u=N[5],f+=u*$e,l+=u*Ie,x+=u*Ne,j+=u*Fe,K+=u*Be,I+=u*Pe,z+=u*je,te+=u*Se,re+=u*Ce,ne+=u*He,ge+=u*xe,fe+=u*ke,me+=u*We,X+=u*et,Y+=u*tt,H+=u*Je,u=N[6],l+=u*$e,x+=u*Ie,j+=u*Ne,K+=u*Fe,I+=u*Be,z+=u*Pe,te+=u*je,re+=u*Se,ne+=u*Ce,ge+=u*He,fe+=u*xe,me+=u*ke,X+=u*We,Y+=u*et,H+=u*tt,p+=u*Je,u=N[7],x+=u*$e,j+=u*Ie,K+=u*Ne,I+=u*Fe,z+=u*Be,te+=u*Pe,re+=u*je,ne+=u*Se,ge+=u*Ce,fe+=u*He,me+=u*xe,X+=u*ke,Y+=u*We,H+=u*et,p+=u*tt,L+=u*Je,u=N[8],j+=u*$e,K+=u*Ie,I+=u*Ne,z+=u*Fe,te+=u*Be,re+=u*Pe,ne+=u*je,ge+=u*Se,fe+=u*Ce,me+=u*He,X+=u*xe,Y+=u*ke,H+=u*We,p+=u*et,L+=u*tt,he+=u*Je,u=N[9],K+=u*$e,I+=u*Ie,z+=u*Ne,te+=u*Fe,re+=u*Be,ne+=u*Pe,ge+=u*je,fe+=u*Se,me+=u*Ce,X+=u*He,Y+=u*xe,H+=u*ke,p+=u*We,L+=u*et,he+=u*tt,pe+=u*Je,u=N[10],I+=u*$e,z+=u*Ie,te+=u*Ne,re+=u*Fe,ne+=u*Be,ge+=u*Pe,fe+=u*je,me+=u*Se,X+=u*Ce,Y+=u*He,H+=u*xe,p+=u*ke,L+=u*We,he+=u*et,pe+=u*tt,Oe+=u*Je,u=N[11],z+=u*$e,te+=u*Ie,re+=u*Ne,ne+=u*Fe,ge+=u*Be,fe+=u*Pe,me+=u*je,X+=u*Se,Y+=u*Ce,H+=u*He,p+=u*xe,L+=u*ke,he+=u*We,pe+=u*et,Oe+=u*tt,ze+=u*Je,u=N[12],te+=u*$e,re+=u*Ie,ne+=u*Ne,ge+=u*Fe,fe+=u*Be,me+=u*Pe,X+=u*je,Y+=u*Se,H+=u*Ce,p+=u*He,L+=u*xe,he+=u*ke,pe+=u*We,Oe+=u*et,ze+=u*tt,Ve+=u*Je,u=N[13],re+=u*$e,ne+=u*Ie,ge+=u*Ne,fe+=u*Fe,me+=u*Be,X+=u*Pe,Y+=u*je,H+=u*Se,p+=u*Ce,L+=u*He,he+=u*xe,pe+=u*ke,Oe+=u*We,ze+=u*et,Ve+=u*tt,Ue+=u*Je,u=N[14],ne+=u*$e,ge+=u*Ie,fe+=u*Ne,me+=u*Fe,X+=u*Be,Y+=u*Pe,H+=u*je,p+=u*Se,L+=u*Ce,he+=u*He,pe+=u*xe,Oe+=u*ke,ze+=u*We,Ve+=u*et,Ue+=u*tt,gt+=u*Je,u=N[15],ge+=u*$e,fe+=u*Ie,me+=u*Ne,X+=u*Fe,Y+=u*Be,H+=u*Pe,p+=u*je,L+=u*Se,he+=u*Ce,pe+=u*He,Oe+=u*xe,ze+=u*ke,Ve+=u*We,Ue+=u*et,gt+=u*tt,yt+=u*Je,Z+=38*fe,c+=38*me,g+=38*X,y+=38*Y,E+=38*H,f+=38*p,l+=38*L,x+=38*he,j+=38*pe,K+=38*Oe,I+=38*ze,z+=38*Ve,te+=38*Ue,re+=38*gt,ne+=38*yt,_=1,u=Z+_+65535,_=Math.floor(u/65536),Z=u-_*65536,u=c+_+65535,_=Math.floor(u/65536),c=u-_*65536,u=g+_+65535,_=Math.floor(u/65536),g=u-_*65536,u=y+_+65535,_=Math.floor(u/65536),y=u-_*65536,u=E+_+65535,_=Math.floor(u/65536),E=u-_*65536,u=f+_+65535,_=Math.floor(u/65536),f=u-_*65536,u=l+_+65535,_=Math.floor(u/65536),l=u-_*65536,u=x+_+65535,_=Math.floor(u/65536),x=u-_*65536,u=j+_+65535,_=Math.floor(u/65536),j=u-_*65536,u=K+_+65535,_=Math.floor(u/65536),K=u-_*65536,u=I+_+65535,_=Math.floor(u/65536),I=u-_*65536,u=z+_+65535,_=Math.floor(u/65536),z=u-_*65536,u=te+_+65535,_=Math.floor(u/65536),te=u-_*65536,u=re+_+65535,_=Math.floor(u/65536),re=u-_*65536,u=ne+_+65535,_=Math.floor(u/65536),ne=u-_*65536,u=ge+_+65535,_=Math.floor(u/65536),ge=u-_*65536,Z+=_-1+37*(_-1),_=1,u=Z+_+65535,_=Math.floor(u/65536),Z=u-_*65536,u=c+_+65535,_=Math.floor(u/65536),c=u-_*65536,u=g+_+65535,_=Math.floor(u/65536),g=u-_*65536,u=y+_+65535,_=Math.floor(u/65536),y=u-_*65536,u=E+_+65535,_=Math.floor(u/65536),E=u-_*65536,u=f+_+65535,_=Math.floor(u/65536),f=u-_*65536,u=l+_+65535,_=Math.floor(u/65536),l=u-_*65536,u=x+_+65535,_=Math.floor(u/65536),x=u-_*65536,u=j+_+65535,_=Math.floor(u/65536),j=u-_*65536,u=K+_+65535,_=Math.floor(u/65536),K=u-_*65536,u=I+_+65535,_=Math.floor(u/65536),I=u-_*65536,u=z+_+65535,_=Math.floor(u/65536),z=u-_*65536,u=te+_+65535,_=Math.floor(u/65536),te=u-_*65536,u=re+_+65535,_=Math.floor(u/65536),re=u-_*65536,u=ne+_+65535,_=Math.floor(u/65536),ne=u-_*65536,u=ge+_+65535,_=Math.floor(u/65536),ge=u-_*65536,Z+=_-1+37*(_-1),T[0]=Z,T[1]=c,T[2]=g,T[3]=y,T[4]=E,T[5]=f,T[6]=l,T[7]=x,T[8]=j,T[9]=K,T[10]=I,T[11]=z,T[12]=te,T[13]=re,T[14]=ne,T[15]=ge}function B(T,N){G(T,N,N)}function F(T,N){const S=s();for(let u=0;u<16;u++)S[u]=N[u];for(let u=253;u>=0;u--)B(S,S),u!==2&&u!==4&&G(S,S,N);for(let u=0;u<16;u++)T[u]=S[u]}function J(T,N){const S=new Uint8Array(32),u=new Float64Array(80),_=s(),Z=s(),c=s(),g=s(),y=s(),E=s();for(let j=0;j<31;j++)S[j]=T[j];S[31]=T[31]&127|64,S[0]&=248,C(u,N);for(let j=0;j<16;j++)Z[j]=u[j];_[0]=g[0]=1;for(let j=254;j>=0;--j){const K=S[j>>>3]>>>(j&7)&1;v(_,Z,K),v(c,g,K),A(y,_,c),$(_,_,c),A(c,Z,g),$(Z,Z,g),B(g,y),B(E,_),G(_,c,_),G(c,Z,y),A(y,_,c),$(_,_,c),B(Z,_),$(c,g,E),G(_,c,d),A(_,_,g),G(c,c,_),G(_,g,E),G(g,Z,u),B(Z,y),v(_,Z,K),v(c,g,K)}for(let j=0;j<16;j++)u[j+16]=_[j],u[j+32]=c[j],u[j+48]=Z[j],u[j+64]=g[j];const f=u.subarray(32),l=u.subarray(16);F(f,f),G(l,l,f);const x=new Uint8Array(32);return w(x,l),x}i.scalarMult=J;function Q(T){return J(T,o)}i.scalarMultBase=Q;function ae(T){if(T.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const N=new Uint8Array(T);return{publicKey:Q(N),secretKey:N}}i.generateKeyPairFromSeed=ae;function U(T){const N=(0,e.randomBytes)(32,T),S=ae(N);return(0,r.wipe)(N),S}i.generateKeyPair=U;function q(T,N,S=!1){if(T.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(N.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=J(T,N);if(S){let _=0;for(let Z=0;Z<u.length;Z++)_|=u[Z];if(_===0)throw new Error("X25519: invalid shared key")}return u}i.sharedKey=q})(gu);function yu(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function Md(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yu(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function Jc(i,e){e||(e=i.reduce((o,d)=>o+d.length,0));const r=Md(e);let s=0;for(const o of i)r.set(o,s),s+=o.length;return yu(r)}function Em(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var d=i.charAt(o),b=d.charCodeAt(0);if(r[b]!==255)throw new TypeError(d+" is ambiguous");r[b]=o}var v=i.length,w=i.charAt(0),C=Math.log(v)/Math.log(256),A=Math.log(256)/Math.log(v);function $(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var J=0,Q=0,ae=0,U=F.length;ae!==U&&F[ae]===0;)ae++,J++;for(var q=(U-ae)*A+1>>>0,T=new Uint8Array(q);ae!==U;){for(var N=F[ae],S=0,u=q-1;(N!==0||S<Q)&&u!==-1;u--,S++)N+=256*T[u]>>>0,T[u]=N%v>>>0,N=N/v>>>0;if(N!==0)throw new Error("Non-zero carry");Q=S,ae++}for(var _=q-Q;_!==q&&T[_]===0;)_++;for(var Z=w.repeat(J);_<q;++_)Z+=i.charAt(T[_]);return Z}function G(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var J=0;if(F[J]!==" "){for(var Q=0,ae=0;F[J]===w;)Q++,J++;for(var U=(F.length-J)*C+1>>>0,q=new Uint8Array(U);F[J];){var T=r[F.charCodeAt(J)];if(T===255)return;for(var N=0,S=U-1;(T!==0||N<ae)&&S!==-1;S--,N++)T+=v*q[S]>>>0,q[S]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");ae=N,J++}if(F[J]!==" "){for(var u=U-ae;u!==U&&q[u]===0;)u++;for(var _=new Uint8Array(Q+(U-u)),Z=Q;u!==U;)_[Z++]=q[u++];return _}}}function B(F){var J=G(F);if(J)return J;throw new Error(`Non-${e} character`)}return{encode:$,decodeUnsafe:G,decode:B}}var Dm=Em,Sm=Dm;const Om=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},Im=i=>new TextEncoder().encode(i),xm=i=>new TextDecoder().decode(i);class Pm{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Cm{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $d(this,e)}}class Am{constructor(e){this.decoders=e}or(e){return $d(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $d=(i,e)=>new Am({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class Tm{constructor(e,r,s,o){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new Pm(e,r,s),this.decoder=new Cm(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Vo=({name:i,prefix:e,encode:r,decode:s})=>new Tm(i,e,r,s),ys=({prefix:i,name:e,alphabet:r})=>{const{encode:s,decode:o}=Sm(r,e);return Vo({prefix:i,name:e,encode:s,decode:d=>Om(o(d))})},Rm=(i,e,r,s)=>{const o={};for(let A=0;A<e.length;++A)o[e[A]]=A;let d=i.length;for(;i[d-1]==="=";)--d;const b=new Uint8Array(d*r/8|0);let v=0,w=0,C=0;for(let A=0;A<d;++A){const $=o[i[A]];if($===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|$,v+=r,v>=8&&(v-=8,b[C++]=255&w>>v)}if(v>=r||255&w<<8-v)throw new SyntaxError("Unexpected end of data");return b},Nm=(i,e,r)=>{const s=e[e.length-1]==="=",o=(1<<r)-1;let d="",b=0,v=0;for(let w=0;w<i.length;++w)for(v=v<<8|i[w],b+=8;b>r;)b-=r,d+=e[o&v>>b];if(b&&(d+=e[o&v<<r-b]),s)for(;d.length*r&7;)d+="=";return d},Xt=({name:i,prefix:e,bitsPerChar:r,alphabet:s})=>Vo({prefix:e,name:i,encode(o){return Nm(o,s,r)},decode(o){return Rm(o,s,r,i)}}),Fm=Vo({prefix:"\0",name:"identity",encode:i=>xm(i),decode:i=>Im(i)}),jm=Object.freeze(Object.defineProperty({__proto__:null,identity:Fm},Symbol.toStringTag,{value:"Module"})),Lm=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Um=Object.freeze(Object.defineProperty({__proto__:null,base2:Lm},Symbol.toStringTag,{value:"Module"})),Mm=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),$m=Object.freeze(Object.defineProperty({__proto__:null,base8:Mm},Symbol.toStringTag,{value:"Module"})),Bm=ys({prefix:"9",name:"base10",alphabet:"0123456789"}),qm=Object.freeze(Object.defineProperty({__proto__:null,base10:Bm},Symbol.toStringTag,{value:"Module"})),zm=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hm=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Km=Object.freeze(Object.defineProperty({__proto__:null,base16:zm,base16upper:Hm},Symbol.toStringTag,{value:"Module"})),Vm=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),km=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gm=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Wm=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ym=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Jm=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xm=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Qm=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Zm=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ew=Object.freeze(Object.defineProperty({__proto__:null,base32:Vm,base32hex:Ym,base32hexpad:Xm,base32hexpadupper:Qm,base32hexupper:Jm,base32pad:Gm,base32padupper:Wm,base32upper:km,base32z:Zm},Symbol.toStringTag,{value:"Module"})),tw=ys({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rw=ys({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),nw=Object.freeze(Object.defineProperty({__proto__:null,base36:tw,base36upper:rw},Symbol.toStringTag,{value:"Module"})),iw=ys({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sw=ys({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ow=Object.freeze(Object.defineProperty({__proto__:null,base58btc:iw,base58flickr:sw},Symbol.toStringTag,{value:"Module"})),aw=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cw=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uw=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hw=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),fw=Object.freeze(Object.defineProperty({__proto__:null,base64:aw,base64pad:cw,base64url:uw,base64urlpad:hw},Symbol.toStringTag,{value:"Module"})),Bd=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),lw=Bd.reduce((i,e,r)=>(i[r]=e,i),[]),dw=Bd.reduce((i,e,r)=>(i[e.codePointAt(0)]=r,i),[]);function pw(i){return i.reduce((e,r)=>(e+=lw[r],e),"")}function gw(i){const e=[];for(const r of i){const s=dw[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const yw=Vo({prefix:"🚀",name:"base256emoji",encode:pw,decode:gw}),vw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:yw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const qf={...jm,...Um,...$m,...qm,...Km,...ew,...nw,...ow,...fw,...vw};function qd(i,e,r,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:r},decoder:{decode:s}}}const zf=qd("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Sc=qd("ascii","a",i=>{let e="a";for(let r=0;r<i.length;r++)e+=String.fromCharCode(i[r]);return e},i=>{i=i.substring(1);const e=Md(i.length);for(let r=0;r<i.length;r++)e[r]=i.charCodeAt(r);return e}),zd={utf8:zf,"utf-8":zf,hex:qf.base16,latin1:Sc,ascii:Sc,binary:Sc,...qf};function br(i,e="utf8"){const r=zd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yu(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}function fr(i,e="utf8"){const r=zd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):r.encoder.encode(i).substring(1)}var Hf=globalThis&&globalThis.__spreadArray||function(i,e,r){if(r||arguments.length===2)for(var s=0,o=e.length,d;s<o;s++)(d||!(s in e))&&(d||(d=Array.prototype.slice.call(e,0,s)),d[s]=e[s]);return i.concat(d||Array.prototype.slice.call(e))},_w=function(){function i(e,r,s){this.name=e,this.version=r,this.os=s,this.type="browser"}return i}(),bw=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return i}(),mw=function(){function i(e,r,s,o){this.name=e,this.version=r,this.os=s,this.bot=o,this.type="bot-device"}return i}(),ww=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),Ew=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Dw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Sw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Kf=3,Ow=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Dw]],Vf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Iw(i){return i?kf(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ew:typeof navigator<"u"?kf(navigator.userAgent):Cw()}function xw(i){return i!==""&&Ow.reduce(function(e,r){var s=r[0],o=r[1];if(e)return e;var d=o.exec(i);return!!d&&[s,d]},!1)}function kf(i){var e=xw(i);if(!e)return null;var r=e[0],s=e[1];if(r==="searchbot")return new ww;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Kf&&(o=Hf(Hf([],o,!0),Aw(Kf-o.length),!0)):o=[];var d=o.join("."),b=Pw(i),v=Sw.exec(i);return v&&v[1]?new mw(r,d,b,v[1]):new _w(r,d,b)}function Pw(i){for(var e=0,r=Vf.length;e<r;e++){var s=Vf[e],o=s[0],d=s[1],b=d.exec(i);if(b)return o}return null}function Cw(){var i=typeof process<"u"&&process.version;return i?new bw(process.version.slice(1)):null}function Aw(i){for(var e=[],r=0;r<i;r++)e.push("0");return e}var be={},Hd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,d,b,v,w,C,A,$,G,B,F,J,Q,ae,U,q,T,N,S,u;(function(_){var Z=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Z,c(i.exports)));function c(g,y){return g!==Z&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,f){return g[E]=y?y(E,f):f}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var y in g)g.hasOwnProperty(y)&&(c[y]=g[y])};e=function(c,g){Z(c,g);function y(){this.constructor=c}c.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(c){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}return c},s=function(c,g){var y={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&g.indexOf(E)<0&&(y[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,E=Object.getOwnPropertySymbols(c);f<E.length;f++)g.indexOf(E[f])<0&&Object.prototype.propertyIsEnumerable.call(c,E[f])&&(y[E[f]]=c[E[f]]);return y},o=function(c,g,y,E){var f=arguments.length,l=f<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(c,g,y,E);else for(var j=c.length-1;j>=0;j--)(x=c[j])&&(l=(f<3?x(l):f>3?x(g,y,l):x(g,y))||l);return f>3&&l&&Object.defineProperty(g,y,l),l},d=function(c,g){return function(y,E){g(y,E,c)}},b=function(c,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,g)},v=function(c,g,y,E){function f(l){return l instanceof y?l:new y(function(x){x(l)})}return new(y||(y=Promise))(function(l,x){function j(z){try{I(E.next(z))}catch(te){x(te)}}function K(z){try{I(E.throw(z))}catch(te){x(te)}}function I(z){z.done?l(z.value):f(z.value).then(j,K)}I((E=E.apply(c,g||[])).next())})},w=function(c,g){var y={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},E,f,l,x;return x={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function j(I){return function(z){return K([I,z])}}function K(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,f&&(l=I[0]&2?f.return:I[0]?f.throw||((l=f.return)&&l.call(f),0):f.next)&&!(l=l.call(f,I[1])).done)return l;switch(f=0,l&&(I=[I[0]&2,l.value]),I[0]){case 0:case 1:l=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,f=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(l=y.trys,!(l=l.length>0&&l[l.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!l||I[1]>l[0]&&I[1]<l[3])){y.label=I[1];break}if(I[0]===6&&y.label<l[1]){y.label=l[1],l=I;break}if(l&&y.label<l[2]){y.label=l[2],y.ops.push(I);break}l[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(c,y)}catch(z){I=[6,z],f=0}finally{E=l=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},u=function(c,g,y,E){E===void 0&&(E=y),c[E]=g[y]},C=function(c,g){for(var y in c)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=c[y])},A=function(c){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&c[g],E=0;if(y)return y.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},$=function(c,g){var y=typeof Symbol=="function"&&c[Symbol.iterator];if(!y)return c;var E=y.call(c),f,l=[],x;try{for(;(g===void 0||g-- >0)&&!(f=E.next()).done;)l.push(f.value)}catch(j){x={error:j}}finally{try{f&&!f.done&&(y=E.return)&&y.call(E)}finally{if(x)throw x.error}}return l},G=function(){for(var c=[],g=0;g<arguments.length;g++)c=c.concat($(arguments[g]));return c},B=function(){for(var c=0,g=0,y=arguments.length;g<y;g++)c+=arguments[g].length;for(var E=Array(c),f=0,g=0;g<y;g++)for(var l=arguments[g],x=0,j=l.length;x<j;x++,f++)E[f]=l[x];return E},F=function(c){return this instanceof F?(this.v=c,this):new F(c)},J=function(c,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(c,g||[]),f,l=[];return f={},x("next"),x("throw"),x("return"),f[Symbol.asyncIterator]=function(){return this},f;function x(re){E[re]&&(f[re]=function(ne){return new Promise(function(ge,fe){l.push([re,ne,ge,fe])>1||j(re,ne)})})}function j(re,ne){try{K(E[re](ne))}catch(ge){te(l[0][3],ge)}}function K(re){re.value instanceof F?Promise.resolve(re.value.v).then(I,z):te(l[0][2],re)}function I(re){j("next",re)}function z(re){j("throw",re)}function te(re,ne){re(ne),l.shift(),l.length&&j(l[0][0],l[0][1])}},Q=function(c){var g,y;return g={},E("next"),E("throw",function(f){throw f}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(f,l){g[f]=c[f]?function(x){return(y=!y)?{value:F(c[f](x)),done:f==="return"}:l?l(x):x}:l}},ae=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=c[Symbol.asyncIterator],y;return g?g.call(c):(c=typeof A=="function"?A(c):c[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(l){y[l]=c[l]&&function(x){return new Promise(function(j,K){x=c[l](x),f(j,K,x.done,x.value)})}}function f(l,x,j,K){Promise.resolve(K).then(function(I){l({value:I,done:j})},x)}},U=function(c,g){return Object.defineProperty?Object.defineProperty(c,"raw",{value:g}):c.raw=g,c},q=function(c){if(c&&c.__esModule)return c;var g={};if(c!=null)for(var y in c)Object.hasOwnProperty.call(c,y)&&(g[y]=c[y]);return g.default=c,g},T=function(c){return c&&c.__esModule?c:{default:c}},N=function(c,g){if(!g.has(c))throw new TypeError("attempted to get private field on non-instance");return g.get(c)},S=function(c,g,y){if(!g.has(c))throw new TypeError("attempted to set private field on non-instance");return g.set(c,y),y},_("__extends",e),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",d),_("__metadata",b),_("__awaiter",v),_("__generator",w),_("__exportStar",C),_("__createBinding",u),_("__values",A),_("__read",$),_("__spread",G),_("__spreadArrays",B),_("__await",F),_("__asyncGenerator",J),_("__asyncDelegator",Q),_("__asyncValues",ae),_("__makeTemplateObject",U),_("__importStar",q),_("__importDefault",T),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(Hd);var ko=Hd.exports,Oc={},es={},Gf;function Tw(){if(Gf)return es;Gf=1,Object.defineProperty(es,"__esModule",{value:!0}),es.delay=void 0;function i(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return es.delay=i,es}var Jn={},Ic={},Xn={},Wf;function Rw(){return Wf||(Wf=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.ONE_THOUSAND=Xn.ONE_HUNDRED=void 0,Xn.ONE_HUNDRED=100,Xn.ONE_THOUSAND=1e3),Xn}var xc={},Yf;function Nw(){return Yf||(Yf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(xc)),xc}var Jf;function Kd(){return Jf||(Jf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=ko;e.__exportStar(Rw(),i),e.__exportStar(Nw(),i)}(Ic)),Ic}var Xf;function Fw(){if(Xf)return Jn;Xf=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.fromMiliseconds=Jn.toMiliseconds=void 0;const i=Kd();function e(s){return s*i.ONE_THOUSAND}Jn.toMiliseconds=e;function r(s){return Math.floor(s/i.ONE_THOUSAND)}return Jn.fromMiliseconds=r,Jn}var Qf;function jw(){return Qf||(Qf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=ko;e.__exportStar(Tw(),i),e.__exportStar(Fw(),i)}(Oc)),Oc}var Ii={},Zf;function Lw(){if(Zf)return Ii;Zf=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:o})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return Ii.Watch=i,Ii.default=i,Ii}var Pc={},ts={},el;function Uw(){if(el)return ts;el=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.IWatch=void 0;class i{}return ts.IWatch=i,ts}var tl;function Mw(){return tl||(tl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),ko.__exportStar(Uw(),i)}(Pc)),Pc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=ko;e.__exportStar(jw(),i),e.__exportStar(Lw(),i),e.__exportStar(Mw(),i),e.__exportStar(Kd(),i)})(be);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=kd=lt.getLocation=lt.getLocationOrThrow=vu=lt.getNavigator=lt.getNavigatorOrThrow=Vd=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function ri(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}lt.getFromWindow=ri;function Ni(i){const e=ri(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}lt.getFromWindowOrThrow=Ni;function $w(){return Ni("document")}lt.getDocumentOrThrow=$w;function Bw(){return ri("document")}var Vd=lt.getDocument=Bw;function qw(){return Ni("navigator")}lt.getNavigatorOrThrow=qw;function zw(){return ri("navigator")}var vu=lt.getNavigator=zw;function Hw(){return Ni("location")}lt.getLocationOrThrow=Hw;function Kw(){return ri("location")}var kd=lt.getLocation=Kw;function Vw(){return Ni("crypto")}lt.getCryptoOrThrow=Vw;function kw(){return ri("crypto")}lt.getCrypto=kw;function Gw(){return Ni("localStorage")}lt.getLocalStorageOrThrow=Gw;function Ww(){return ri("localStorage")}lt.getLocalStorage=Ww;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});var Gd=_u.getWindowMetadata=void 0;const rl=lt;function Yw(){let i,e;try{i=rl.getDocumentOrThrow(),e=rl.getLocationOrThrow()}catch{return null}function r(){const $=i.getElementsByTagName("link"),G=[];for(let B=0;B<$.length;B++){const F=$[B],J=F.getAttribute("rel");if(J&&J.toLowerCase().indexOf("icon")>-1){const Q=F.getAttribute("href");if(Q)if(Q.toLowerCase().indexOf("https:")===-1&&Q.toLowerCase().indexOf("http:")===-1&&Q.indexOf("//")!==0){let ae=e.protocol+"//"+e.host;if(Q.indexOf("/")===0)ae+=Q;else{const U=e.pathname.split("/");U.pop();const q=U.join("/");ae+=q+"/"+Q}G.push(ae)}else if(Q.indexOf("//")===0){const ae=e.protocol+Q;G.push(ae)}else G.push(Q)}}return G}function s(...$){const G=i.getElementsByTagName("meta");for(let B=0;B<G.length;B++){const F=G[B],J=["itemprop","property","name"].map(Q=>F.getAttribute(Q)).filter(Q=>Q?$.includes(Q):!1);if(J.length&&J){const Q=F.getAttribute("content");if(Q)return Q}}return""}function o(){let $=s("name","og:site_name","og:title","twitter:title");return $||($=i.title),$}function d(){return s("description","og:description","twitter:description","keywords")}const b=o(),v=d(),w=e.origin,C=r();return{description:v,url:w,icons:C,name:b}}Gd=_u.getWindowMetadata=Yw;var ds={},Jw=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Wd="%[a-f0-9]{2}",nl=new RegExp("("+Wd+")|([^%]+?)","gi"),il=new RegExp("("+Wd+")+","gi");function Xc(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var r=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],Xc(r),Xc(s))}function Xw(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(nl)||[],r=1;r<e.length;r++)i=Xc(e,r).join(""),e=i.match(nl)||[];return i}}function Qw(i){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=il.exec(i);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=Xw(r[0]);s!==r[0]&&(e[r[0]]=s)}r=il.exec(i)}e["%C2"]="�";for(var o=Object.keys(e),d=0;d<o.length;d++){var b=o[d];i=i.replace(new RegExp(b,"g"),e[b])}return i}var Zw=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return Qw(i)}},eE=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const r=i.indexOf(e);return r===-1?[i]:[i.slice(0,r),i.slice(r+e.length)]},tE=function(i,e){for(var r={},s=Object.keys(i),o=Array.isArray(e),d=0;d<s.length;d++){var b=s[d],v=i[b];(o?e.indexOf(b)!==-1:e(b,v,i))&&(r[b]=v)}return r};(function(i){const e=Jw,r=Zw,s=eE,o=tE,d=U=>U==null,b=Symbol("encodeFragmentIdentifier");function v(U){switch(U.arrayFormat){case"index":return q=>(T,N)=>{const S=T.length;return N===void 0||U.skipNull&&N===null||U.skipEmptyString&&N===""?T:N===null?[...T,[A(q,U),"[",S,"]"].join("")]:[...T,[A(q,U),"[",A(S,U),"]=",A(N,U)].join("")]};case"bracket":return q=>(T,N)=>N===void 0||U.skipNull&&N===null||U.skipEmptyString&&N===""?T:N===null?[...T,[A(q,U),"[]"].join("")]:[...T,[A(q,U),"[]=",A(N,U)].join("")];case"colon-list-separator":return q=>(T,N)=>N===void 0||U.skipNull&&N===null||U.skipEmptyString&&N===""?T:N===null?[...T,[A(q,U),":list="].join("")]:[...T,[A(q,U),":list=",A(N,U)].join("")];case"comma":case"separator":case"bracket-separator":{const q=U.arrayFormat==="bracket-separator"?"[]=":"=";return T=>(N,S)=>S===void 0||U.skipNull&&S===null||U.skipEmptyString&&S===""?N:(S=S===null?"":S,N.length===0?[[A(T,U),q,A(S,U)].join("")]:[[N,A(S,U)].join(U.arrayFormatSeparator)])}default:return q=>(T,N)=>N===void 0||U.skipNull&&N===null||U.skipEmptyString&&N===""?T:N===null?[...T,A(q,U)]:[...T,[A(q,U),"=",A(N,U)].join("")]}}function w(U){let q;switch(U.arrayFormat){case"index":return(T,N,S)=>{if(q=/\[(\d*)\]$/.exec(T),T=T.replace(/\[\d*\]$/,""),!q){S[T]=N;return}S[T]===void 0&&(S[T]={}),S[T][q[1]]=N};case"bracket":return(T,N,S)=>{if(q=/(\[\])$/.exec(T),T=T.replace(/\[\]$/,""),!q){S[T]=N;return}if(S[T]===void 0){S[T]=[N];return}S[T]=[].concat(S[T],N)};case"colon-list-separator":return(T,N,S)=>{if(q=/(:list)$/.exec(T),T=T.replace(/:list$/,""),!q){S[T]=N;return}if(S[T]===void 0){S[T]=[N];return}S[T]=[].concat(S[T],N)};case"comma":case"separator":return(T,N,S)=>{const u=typeof N=="string"&&N.includes(U.arrayFormatSeparator),_=typeof N=="string"&&!u&&$(N,U).includes(U.arrayFormatSeparator);N=_?$(N,U):N;const Z=u||_?N.split(U.arrayFormatSeparator).map(c=>$(c,U)):N===null?N:$(N,U);S[T]=Z};case"bracket-separator":return(T,N,S)=>{const u=/(\[\])$/.test(T);if(T=T.replace(/\[\]$/,""),!u){S[T]=N&&$(N,U);return}const _=N===null?[]:N.split(U.arrayFormatSeparator).map(Z=>$(Z,U));if(S[T]===void 0){S[T]=_;return}S[T]=[].concat(S[T],_)};default:return(T,N,S)=>{if(S[T]===void 0){S[T]=N;return}S[T]=[].concat(S[T],N)}}}function C(U){if(typeof U!="string"||U.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function A(U,q){return q.encode?q.strict?e(U):encodeURIComponent(U):U}function $(U,q){return q.decode?r(U):U}function G(U){return Array.isArray(U)?U.sort():typeof U=="object"?G(Object.keys(U)).sort((q,T)=>Number(q)-Number(T)).map(q=>U[q]):U}function B(U){const q=U.indexOf("#");return q!==-1&&(U=U.slice(0,q)),U}function F(U){let q="";const T=U.indexOf("#");return T!==-1&&(q=U.slice(T)),q}function J(U){U=B(U);const q=U.indexOf("?");return q===-1?"":U.slice(q+1)}function Q(U,q){return q.parseNumbers&&!Number.isNaN(Number(U))&&typeof U=="string"&&U.trim()!==""?U=Number(U):q.parseBooleans&&U!==null&&(U.toLowerCase()==="true"||U.toLowerCase()==="false")&&(U=U.toLowerCase()==="true"),U}function ae(U,q){q=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},q),C(q.arrayFormatSeparator);const T=w(q),N=Object.create(null);if(typeof U!="string"||(U=U.trim().replace(/^[?#&]/,""),!U))return N;for(const S of U.split("&")){if(S==="")continue;let[u,_]=s(q.decode?S.replace(/\+/g," "):S,"=");_=_===void 0?null:["comma","separator","bracket-separator"].includes(q.arrayFormat)?_:$(_,q),T($(u,q),_,N)}for(const S of Object.keys(N)){const u=N[S];if(typeof u=="object"&&u!==null)for(const _ of Object.keys(u))u[_]=Q(u[_],q);else N[S]=Q(u,q)}return q.sort===!1?N:(q.sort===!0?Object.keys(N).sort():Object.keys(N).sort(q.sort)).reduce((S,u)=>{const _=N[u];return _&&typeof _=="object"&&!Array.isArray(_)?S[u]=G(_):S[u]=_,S},Object.create(null))}i.extract=J,i.parse=ae,i.stringify=(U,q)=>{if(!U)return"";q=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},q),C(q.arrayFormatSeparator);const T=_=>q.skipNull&&d(U[_])||q.skipEmptyString&&U[_]==="",N=v(q),S={};for(const _ of Object.keys(U))T(_)||(S[_]=U[_]);const u=Object.keys(S);return q.sort!==!1&&u.sort(q.sort),u.map(_=>{const Z=U[_];return Z===void 0?"":Z===null?A(_,q):Array.isArray(Z)?Z.length===0&&q.arrayFormat==="bracket-separator"?A(_,q)+"[]":Z.reduce(N(_),[]).join("&"):A(_,q)+"="+A(Z,q)}).filter(_=>_.length>0).join("&")},i.parseUrl=(U,q)=>{q=Object.assign({decode:!0},q);const[T,N]=s(U,"#");return Object.assign({url:T.split("?")[0]||"",query:ae(J(U),q)},q&&q.parseFragmentIdentifier&&N?{fragmentIdentifier:$(N,q)}:{})},i.stringifyUrl=(U,q)=>{q=Object.assign({encode:!0,strict:!0,[b]:!0},q);const T=B(U.url).split("?")[0]||"",N=i.extract(U.url),S=i.parse(N,{sort:!1}),u=Object.assign(S,U.query);let _=i.stringify(u,q);_&&(_=`?${_}`);let Z=F(U.url);return U.fragmentIdentifier&&(Z=`#${q[b]?A(U.fragmentIdentifier,q):U.fragmentIdentifier}`),`${T}${_}${Z}`},i.pick=(U,q,T)=>{T=Object.assign({parseFragmentIdentifier:!0,[b]:!1},T);const{url:N,query:S,fragmentIdentifier:u}=i.parseUrl(U,T);return i.stringifyUrl({url:N,query:o(S,q),fragmentIdentifier:u},T)},i.exclude=(U,q,T)=>{const N=Array.isArray(q)?S=>!q.includes(S):(S,u)=>!q(S,u);return i.pick(U,N,T)}})(ds);const rE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function nE(i,e=[]){const r=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];r.push(...o.accounts)}),r}function Yd(i,e){return i.includes(":")?[i]:e.chains||[]}const Jd="base10",hr="base16",Qc="base64pad",bu="utf8",Xd=0,ni=1,iE=0,sl=1,Zc=12,mu=32;function sE(){const i=gu.generateKeyPair();return{privateKey:fr(i.secretKey,hr),publicKey:fr(i.publicKey,hr)}}function eu(){const i=Ri.randomBytes(mu);return fr(i,hr)}function oE(i,e){const r=gu.sharedKey(br(i,hr),br(e,hr)),s=new fm(Ko.SHA256,r).expand(mu);return fr(s,hr)}function aE(i){const e=Ko.hash(br(i,hr));return fr(e,hr)}function Ai(i){const e=Ko.hash(br(i,bu));return fr(e,hr)}function cE(i){return br(`${i}`,Jd)}function vs(i){return Number(fr(i,Jd))}function uE(i){const e=cE(typeof i.type<"u"?i.type:Xd);if(vs(e)===ni&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof i.senderPublicKey<"u"?br(i.senderPublicKey,hr):void 0,s=typeof i.iv<"u"?br(i.iv,hr):Ri.randomBytes(Zc),o=new du.ChaCha20Poly1305(br(i.symKey,hr)).seal(s,br(i.message,bu));return fE({type:e,sealed:o,iv:s,senderPublicKey:r})}function hE(i){const e=new du.ChaCha20Poly1305(br(i.symKey,hr)),{sealed:r,iv:s}=jo(i.encoded),o=e.open(s,r);if(o===null)throw new Error("Failed to decrypt");return fr(o,bu)}function fE(i){if(vs(i.type)===ni){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fr(Jc([i.type,i.senderPublicKey,i.iv,i.sealed]),Qc)}return fr(Jc([i.type,i.iv,i.sealed]),Qc)}function jo(i){const e=br(i,Qc),r=e.slice(iE,sl),s=sl;if(vs(r)===ni){const v=s+mu,w=v+Zc,C=e.slice(s,v),A=e.slice(v,w),$=e.slice(w);return{type:r,sealed:$,iv:A,senderPublicKey:C}}const o=s+Zc,d=e.slice(s,o),b=e.slice(o);return{type:r,sealed:b,iv:d}}function lE(i,e){const r=jo(i);return Qd({type:vs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?fr(r.senderPublicKey,hr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Qd(i){const e=(i==null?void 0:i.type)||Xd;if(e===ni){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function ol(i){return i.type===ni&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var dE=Object.defineProperty,al=Object.getOwnPropertySymbols,pE=Object.prototype.hasOwnProperty,gE=Object.prototype.propertyIsEnumerable,cl=(i,e,r)=>e in i?dE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,ul=(i,e)=>{for(var r in e||(e={}))pE.call(e,r)&&cl(i,r,e[r]);if(al)for(var r of al(e))gE.call(e,r)&&cl(i,r,e[r]);return i};const yE="ReactNative",ei={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},vE="js";function wu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Zd(){return!Vd()&&!!vu()&&navigator.product===yE}function Eu(){return!wu()&&!!vu()}function ep(){return Zd()?ei.reactNative:wu()?ei.node:Eu()?ei.browser:ei.unknown}function _E(i,e){let r=ds.parse(i);return r=ul(ul({},r),e),i=ds.stringify(r),i}function bE(){return Gd()||{name:"",description:"",url:"",icons:[""]}}function mE(){if(typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:s}=global.Platform;return[r,s].join("-")}const i=Iw();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function wE(){var i;const e=ep();return e===ei.browser?[e,((i=kd())==null?void 0:i.host)||"unknown"].join(":"):e}function EE(i,e,r){const s=mE(),o=wE();return[[i,e].join("-"),[vE,r].join("-"),s,o].join("/")}function DE({protocol:i,version:e,relayUrl:r,sdkVersion:s,auth:o,projectId:d,useOnCloseEvent:b}){const v=r.split("?"),w=EE(i,e,s),C={auth:o,ua:w,projectId:d,useOnCloseEvent:b||void 0},A=_E(v[1]||"",C);return v[0]+"?"+A}function ti(i,e){return i.filter(r=>e.includes(r)).length===i.length}function tp(i){return Object.fromEntries(i.entries())}function rp(i){return new Map(Object.entries(i))}function xi(i=be.FIVE_MINUTES,e){const r=be.toMiliseconds(i||be.FIVE_MINUTES);let s,o,d;return{resolve:b=>{d&&s&&(clearTimeout(d),s(b))},reject:b=>{d&&o&&(clearTimeout(d),o(b))},done:()=>new Promise((b,v)=>{d=setTimeout(()=>{v(new Error(e))},r),s=b,o=v})}}function Lo(i,e,r){return new Promise(async(s,o)=>{const d=setTimeout(()=>o(new Error(r)),e);try{const b=await i;s(b)}catch(b){o(b)}clearTimeout(d)})}function np(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function SE(i){return np("topic",i)}function OE(i){return np("id",i)}function ip(i){const[e,r]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")s.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return s}function rn(i,e){return be.fromMiliseconds((e||Date.now())+be.toMiliseconds(i))}function Tn(i){return Date.now()>=be.toMiliseconds(i)}function Kt(i,e){return`${i}${e?`:${e}`:""}`}function Cc(i=[],e=[]){return[...new Set([...i,...e])]}async function IE({id:i,topic:e,wcDeepLink:r}){try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const d=`${o}/wc?requestId=${i}&sessionTopic=${e}`,b=ep();b===ei.browser?window.open(d,"_self","noreferrer noopener"):b===ei.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(d)}catch(s){console.error(s)}}const xE="irn";function tu(i){return(i==null?void 0:i.relay)||{protocol:xE}}function Ao(i){const e=rE[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var PE=Object.defineProperty,hl=Object.getOwnPropertySymbols,CE=Object.prototype.hasOwnProperty,AE=Object.prototype.propertyIsEnumerable,fl=(i,e,r)=>e in i?PE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,TE=(i,e)=>{for(var r in e||(e={}))CE.call(e,r)&&fl(i,r,e[r]);if(hl)for(var r of hl(e))AE.call(e,r)&&fl(i,r,e[r]);return i};function RE(i,e="-"){const r={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const d=o.replace(s,""),b=i[o];r[d]=b}}),r}function NE(i){const e=i.indexOf(":"),r=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,r).split("@"),d=typeof r<"u"?i.substring(r):"",b=ds.parse(d);return{protocol:s,topic:FE(o[0]),version:parseInt(o[1],10),symKey:b.symKey,relay:RE(b)}}function FE(i){return i.startsWith("//")?i.substring(2):i}function jE(i,e="-"){const r="relay",s={};return Object.keys(i).forEach(o=>{const d=r+e+o;i[o]&&(s[d]=i[o])}),s}function LE(i){return`${i.protocol}:${i.topic}@${i.version}?`+ds.stringify(TE({symKey:i.symKey},jE(i.relay)))}function Fi(i){const e=[];return i.forEach(r=>{const[s,o]=r.split(":");e.push(`${s}:${o}`)}),e}function UE(i){const e=[];return Object.values(i).forEach(r=>{e.push(...Fi(r.accounts))}),e}function ME(i,e){const r=[];return Object.values(i).forEach(s=>{Fi(s.accounts).includes(e)&&r.push(...s.methods)}),r}function $E(i,e){const r=[];return Object.values(i).forEach(s=>{Fi(s.accounts).includes(e)&&r.push(...s.events)}),r}function BE(i,e){const r=Ro(i,e);if(r)throw new Error(r.message);const s={};for(const[o,d]of Object.entries(i))s[o]={methods:d.methods,events:d.events,chains:d.accounts.map(b=>`${b.split(":")[0]}:${b.split(":")[1]}`)};return s}function sp(i){return i.includes(":")}function To(i){return sp(i)?i.split(":")[0]:i}const qE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},zE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(i,e){const{message:r,code:s}=zE[i];return{message:e?`${r} ${e}`:r,code:s}}function jt(i,e){const{message:r,code:s}=qE[i];return{message:e?`${r} ${e}`:r,code:s}}function bn(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function Ti(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function ur(i){return typeof i>"u"}function Yt(i,e){return e&&ur(i)?!0:typeof i=="string"&&!!i.trim().length}function Du(i,e){return e&&ur(i)?!0:typeof i=="number"&&!isNaN(i)}function HE(i,e){const{requiredNamespaces:r}=e,s=Object.keys(i.namespaces),o=Object.keys(r);let d=!0;return ti(o,s)?(s.forEach(b=>{const{accounts:v,methods:w,events:C}=i.namespaces[b],A=Fi(v),$=r[b];(!ti(Yd(b,$),A)||!ti($.methods,w)||!ti($.events,C))&&(d=!1)}),d):!1}function Su(i){return Yt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function KE(i){if(Yt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Su(r)}}return!1}function VE(i){if(Yt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function kE(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function GE(i){return i==null?void 0:i.topic}function WE(i,e){let r=null;return Yt(i==null?void 0:i.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function ll(i){let e=!0;return bn(i)?i.length&&(e=i.every(r=>Yt(r,!1))):e=!1,e}function YE(i,e,r){let s=null;return bn(e)?e.forEach(o=>{s||(!Su(o)||!o.includes(i))&&(s=jt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):s=jt("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),s}function JE(i,e){let r=null;return Object.entries(i).forEach(([s,o])=>{if(r)return;const d=YE(s,Yd(s,o),`${e} requiredNamespace`);d&&(r=d)}),r}function XE(i,e){let r=null;return bn(i)?i.forEach(s=>{r||KE(s)||(r=jt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=jt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function QE(i,e){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=XE(s==null?void 0:s.accounts,`${e} namespace`);o&&(r=o)}),r}function ZE(i,e){let r=null;return ll(i==null?void 0:i.methods)?ll(i==null?void 0:i.events)||(r=jt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=jt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function op(i,e){let r=null;return Object.values(i).forEach(s=>{if(r)return;const o=ZE(s,`${e}, namespace`);o&&(r=o)}),r}function e3(i,e,r){let s=null;if(i&&Ti(i)){const o=op(i,e);o&&(s=o);const d=JE(i,e);d&&(s=d)}else s=de("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return s}function Ro(i,e){let r=null;if(i&&Ti(i)){const s=op(i,e);s&&(r=s);const o=QE(i,e);o&&(r=o)}else r=de("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function ap(i){return Yt(i.protocol,!0)}function t3(i,e){let r=!1;return e&&!i?r=!0:i&&bn(i)&&i.length&&i.forEach(s=>{r=ap(s)}),r}function r3(i){return typeof i=="number"}function _r(i){return typeof i<"u"&&typeof i!==null}function n3(i){return!(!i||typeof i!="object"||!i.code||!Du(i.code,!1)||!i.message||!Yt(i.message,!1))}function i3(i){return!(ur(i)||!Yt(i.method,!1))}function s3(i){return!(ur(i)||ur(i.result)&&ur(i.error)||!Du(i.id,!1)||!Yt(i.jsonrpc,!1))}function o3(i){return!(ur(i)||!Yt(i.name,!1))}function dl(i,e){return!(!Su(e)||!UE(i).includes(e))}function a3(i,e,r){return Yt(r,!1)?ME(i,e).includes(r):!1}function c3(i,e,r){return Yt(r,!1)?$E(i,e).includes(r):!1}function pl(i,e,r){let s=null;const o=u3(i),d=h3(e),b=Object.keys(o),v=Object.keys(d),w=gl(Object.keys(i)),C=gl(Object.keys(e)),A=w.filter($=>!C.includes($));return A.length&&(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${A.toString()}
      Received: ${Object.keys(e).toString()}`)),ti(b,v)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${b.toString()}
      Approved: ${v.toString()}`)),Object.keys(e).forEach($=>{if(!$.includes(":")||s)return;const G=Fi(e[$].accounts);G.includes($)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${$}
        Required: ${$}
        Approved: ${G.toString()}`))}),b.forEach($=>{s||(ti(o[$].methods,d[$].methods)?ti(o[$].events,d[$].events)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${$}`)):s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${$}`))}),s}function u3(i){const e={};return Object.keys(i).forEach(r=>{var s;r.includes(":")?e[r]=i[r]:(s=i[r].chains)==null||s.forEach(o=>{e[o]={methods:i[r].methods,events:i[r].events}})}),e}function gl(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function h3(i){const e={};return Object.keys(i).forEach(r=>{if(r.includes(":"))e[r]=i[r];else{const s=Fi(i[r].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[r].accounts.filter(d=>d.includes(`${o}:`)),methods:i[r].methods,events:i[r].events}})}}),e}function f3(i,e){return Du(i,!1)&&i<=e.max&&i>=e.min}var Go={},cp={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,d,b,v,w,C,A,$,G,B,F,J,Q,ae,U,q,T,N,S,u;(function(_){var Z=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Z,c(i.exports)));function c(g,y){return g!==Z&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,f){return g[E]=y?y(E,f):f}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var y in g)g.hasOwnProperty(y)&&(c[y]=g[y])};e=function(c,g){Z(c,g);function y(){this.constructor=c}c.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(c){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}return c},s=function(c,g){var y={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&g.indexOf(E)<0&&(y[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,E=Object.getOwnPropertySymbols(c);f<E.length;f++)g.indexOf(E[f])<0&&Object.prototype.propertyIsEnumerable.call(c,E[f])&&(y[E[f]]=c[E[f]]);return y},o=function(c,g,y,E){var f=arguments.length,l=f<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(c,g,y,E);else for(var j=c.length-1;j>=0;j--)(x=c[j])&&(l=(f<3?x(l):f>3?x(g,y,l):x(g,y))||l);return f>3&&l&&Object.defineProperty(g,y,l),l},d=function(c,g){return function(y,E){g(y,E,c)}},b=function(c,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,g)},v=function(c,g,y,E){function f(l){return l instanceof y?l:new y(function(x){x(l)})}return new(y||(y=Promise))(function(l,x){function j(z){try{I(E.next(z))}catch(te){x(te)}}function K(z){try{I(E.throw(z))}catch(te){x(te)}}function I(z){z.done?l(z.value):f(z.value).then(j,K)}I((E=E.apply(c,g||[])).next())})},w=function(c,g){var y={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},E,f,l,x;return x={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function j(I){return function(z){return K([I,z])}}function K(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,f&&(l=I[0]&2?f.return:I[0]?f.throw||((l=f.return)&&l.call(f),0):f.next)&&!(l=l.call(f,I[1])).done)return l;switch(f=0,l&&(I=[I[0]&2,l.value]),I[0]){case 0:case 1:l=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,f=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(l=y.trys,!(l=l.length>0&&l[l.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!l||I[1]>l[0]&&I[1]<l[3])){y.label=I[1];break}if(I[0]===6&&y.label<l[1]){y.label=l[1],l=I;break}if(l&&y.label<l[2]){y.label=l[2],y.ops.push(I);break}l[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(c,y)}catch(z){I=[6,z],f=0}finally{E=l=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},u=function(c,g,y,E){E===void 0&&(E=y),c[E]=g[y]},C=function(c,g){for(var y in c)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=c[y])},A=function(c){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&c[g],E=0;if(y)return y.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},$=function(c,g){var y=typeof Symbol=="function"&&c[Symbol.iterator];if(!y)return c;var E=y.call(c),f,l=[],x;try{for(;(g===void 0||g-- >0)&&!(f=E.next()).done;)l.push(f.value)}catch(j){x={error:j}}finally{try{f&&!f.done&&(y=E.return)&&y.call(E)}finally{if(x)throw x.error}}return l},G=function(){for(var c=[],g=0;g<arguments.length;g++)c=c.concat($(arguments[g]));return c},B=function(){for(var c=0,g=0,y=arguments.length;g<y;g++)c+=arguments[g].length;for(var E=Array(c),f=0,g=0;g<y;g++)for(var l=arguments[g],x=0,j=l.length;x<j;x++,f++)E[f]=l[x];return E},F=function(c){return this instanceof F?(this.v=c,this):new F(c)},J=function(c,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(c,g||[]),f,l=[];return f={},x("next"),x("throw"),x("return"),f[Symbol.asyncIterator]=function(){return this},f;function x(re){E[re]&&(f[re]=function(ne){return new Promise(function(ge,fe){l.push([re,ne,ge,fe])>1||j(re,ne)})})}function j(re,ne){try{K(E[re](ne))}catch(ge){te(l[0][3],ge)}}function K(re){re.value instanceof F?Promise.resolve(re.value.v).then(I,z):te(l[0][2],re)}function I(re){j("next",re)}function z(re){j("throw",re)}function te(re,ne){re(ne),l.shift(),l.length&&j(l[0][0],l[0][1])}},Q=function(c){var g,y;return g={},E("next"),E("throw",function(f){throw f}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(f,l){g[f]=c[f]?function(x){return(y=!y)?{value:F(c[f](x)),done:f==="return"}:l?l(x):x}:l}},ae=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=c[Symbol.asyncIterator],y;return g?g.call(c):(c=typeof A=="function"?A(c):c[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(l){y[l]=c[l]&&function(x){return new Promise(function(j,K){x=c[l](x),f(j,K,x.done,x.value)})}}function f(l,x,j,K){Promise.resolve(K).then(function(I){l({value:I,done:j})},x)}},U=function(c,g){return Object.defineProperty?Object.defineProperty(c,"raw",{value:g}):c.raw=g,c},q=function(c){if(c&&c.__esModule)return c;var g={};if(c!=null)for(var y in c)Object.hasOwnProperty.call(c,y)&&(g[y]=c[y]);return g.default=c,g},T=function(c){return c&&c.__esModule?c:{default:c}},N=function(c,g){if(!g.has(c))throw new TypeError("attempted to get private field on non-instance");return g.get(c)},S=function(c,g,y){if(!g.has(c))throw new TypeError("attempted to set private field on non-instance");return g.set(c,y),y},_("__extends",e),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",d),_("__metadata",b),_("__awaiter",v),_("__generator",w),_("__exportStar",C),_("__createBinding",u),_("__values",A),_("__read",$),_("__spread",G),_("__spreadArrays",B),_("__await",F),_("__asyncGenerator",J),_("__asyncDelegator",Q),_("__asyncValues",ae),_("__makeTemplateObject",U),_("__importStar",q),_("__importDefault",T),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(cp);var up=cp.exports,_s={};Object.defineProperty(_s,"__esModule",{value:!0});function l3(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return JSON.parse(i)}catch{return i}}_s.safeJsonParse=l3;function d3(i){return typeof i=="string"?i:JSON.stringify(i,(e,r)=>typeof r>"u"?null:r)}_s.safeJsonStringify=d3;var rs={exports:{}},yl;function p3(){return yl||(yl=1,function(){let i;function e(){}i=e,i.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},i.prototype.setItem=function(r,s){this[r]=String(s)},i.prototype.removeItem=function(r){delete this[r]},i.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},i.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof mt<"u"&&mt.localStorage?rs.exports=mt.localStorage:typeof window<"u"&&window.localStorage?rs.exports=window.localStorage:rs.exports=new e}()),rs.exports}var Ac={},ns={},vl;function g3(){if(vl)return ns;vl=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.IKeyValueStorage=void 0;class i{}return ns.IKeyValueStorage=i,ns}var is={},_l;function y3(){if(_l)return is;_l=1,Object.defineProperty(is,"__esModule",{value:!0}),is.parseEntry=void 0;const i=_s;function e(r){var s;return[r[0],i.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return is.parseEntry=e,is}var bl;function v3(){return bl||(bl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=up;e.__exportStar(g3(),i),e.__exportStar(y3(),i)}(Ac)),Ac}Object.defineProperty(Go,"__esModule",{value:!0});Go.KeyValueStorage=void 0;const Pi=up,ml=_s,_3=Pi.__importDefault(p3()),b3=v3();class hp{constructor(){this.localStorage=_3.default}getKeys(){return Pi.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Pi.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(b3.parseEntry)})}getItem(e){return Pi.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return ml.safeJsonParse(r)})}setItem(e,r){return Pi.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,ml.safeJsonStringify(r))})}removeItem(e){return Pi.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Go.KeyValueStorage=hp;var m3=Go.default=hp,bs={},fp={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,d,b,v,w,C,A,$,G,B,F,J,Q,ae,U,q,T,N,S,u;(function(_){var Z=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Z,c(i.exports)));function c(g,y){return g!==Z&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,f){return g[E]=y?y(E,f):f}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var y in g)g.hasOwnProperty(y)&&(c[y]=g[y])};e=function(c,g){Z(c,g);function y(){this.constructor=c}c.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(c){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}return c},s=function(c,g){var y={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&g.indexOf(E)<0&&(y[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,E=Object.getOwnPropertySymbols(c);f<E.length;f++)g.indexOf(E[f])<0&&Object.prototype.propertyIsEnumerable.call(c,E[f])&&(y[E[f]]=c[E[f]]);return y},o=function(c,g,y,E){var f=arguments.length,l=f<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(c,g,y,E);else for(var j=c.length-1;j>=0;j--)(x=c[j])&&(l=(f<3?x(l):f>3?x(g,y,l):x(g,y))||l);return f>3&&l&&Object.defineProperty(g,y,l),l},d=function(c,g){return function(y,E){g(y,E,c)}},b=function(c,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,g)},v=function(c,g,y,E){function f(l){return l instanceof y?l:new y(function(x){x(l)})}return new(y||(y=Promise))(function(l,x){function j(z){try{I(E.next(z))}catch(te){x(te)}}function K(z){try{I(E.throw(z))}catch(te){x(te)}}function I(z){z.done?l(z.value):f(z.value).then(j,K)}I((E=E.apply(c,g||[])).next())})},w=function(c,g){var y={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},E,f,l,x;return x={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function j(I){return function(z){return K([I,z])}}function K(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,f&&(l=I[0]&2?f.return:I[0]?f.throw||((l=f.return)&&l.call(f),0):f.next)&&!(l=l.call(f,I[1])).done)return l;switch(f=0,l&&(I=[I[0]&2,l.value]),I[0]){case 0:case 1:l=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,f=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(l=y.trys,!(l=l.length>0&&l[l.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!l||I[1]>l[0]&&I[1]<l[3])){y.label=I[1];break}if(I[0]===6&&y.label<l[1]){y.label=l[1],l=I;break}if(l&&y.label<l[2]){y.label=l[2],y.ops.push(I);break}l[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(c,y)}catch(z){I=[6,z],f=0}finally{E=l=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},u=function(c,g,y,E){E===void 0&&(E=y),c[E]=g[y]},C=function(c,g){for(var y in c)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=c[y])},A=function(c){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&c[g],E=0;if(y)return y.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},$=function(c,g){var y=typeof Symbol=="function"&&c[Symbol.iterator];if(!y)return c;var E=y.call(c),f,l=[],x;try{for(;(g===void 0||g-- >0)&&!(f=E.next()).done;)l.push(f.value)}catch(j){x={error:j}}finally{try{f&&!f.done&&(y=E.return)&&y.call(E)}finally{if(x)throw x.error}}return l},G=function(){for(var c=[],g=0;g<arguments.length;g++)c=c.concat($(arguments[g]));return c},B=function(){for(var c=0,g=0,y=arguments.length;g<y;g++)c+=arguments[g].length;for(var E=Array(c),f=0,g=0;g<y;g++)for(var l=arguments[g],x=0,j=l.length;x<j;x++,f++)E[f]=l[x];return E},F=function(c){return this instanceof F?(this.v=c,this):new F(c)},J=function(c,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(c,g||[]),f,l=[];return f={},x("next"),x("throw"),x("return"),f[Symbol.asyncIterator]=function(){return this},f;function x(re){E[re]&&(f[re]=function(ne){return new Promise(function(ge,fe){l.push([re,ne,ge,fe])>1||j(re,ne)})})}function j(re,ne){try{K(E[re](ne))}catch(ge){te(l[0][3],ge)}}function K(re){re.value instanceof F?Promise.resolve(re.value.v).then(I,z):te(l[0][2],re)}function I(re){j("next",re)}function z(re){j("throw",re)}function te(re,ne){re(ne),l.shift(),l.length&&j(l[0][0],l[0][1])}},Q=function(c){var g,y;return g={},E("next"),E("throw",function(f){throw f}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(f,l){g[f]=c[f]?function(x){return(y=!y)?{value:F(c[f](x)),done:f==="return"}:l?l(x):x}:l}},ae=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=c[Symbol.asyncIterator],y;return g?g.call(c):(c=typeof A=="function"?A(c):c[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(l){y[l]=c[l]&&function(x){return new Promise(function(j,K){x=c[l](x),f(j,K,x.done,x.value)})}}function f(l,x,j,K){Promise.resolve(K).then(function(I){l({value:I,done:j})},x)}},U=function(c,g){return Object.defineProperty?Object.defineProperty(c,"raw",{value:g}):c.raw=g,c},q=function(c){if(c&&c.__esModule)return c;var g={};if(c!=null)for(var y in c)Object.hasOwnProperty.call(c,y)&&(g[y]=c[y]);return g.default=c,g},T=function(c){return c&&c.__esModule?c:{default:c}},N=function(c,g){if(!g.has(c))throw new TypeError("attempted to get private field on non-instance");return g.get(c)},S=function(c,g,y){if(!g.has(c))throw new TypeError("attempted to set private field on non-instance");return g.set(c,y),y},_("__extends",e),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",d),_("__metadata",b),_("__awaiter",v),_("__generator",w),_("__exportStar",C),_("__createBinding",u),_("__values",A),_("__read",$),_("__spread",G),_("__spreadArrays",B),_("__await",F),_("__asyncGenerator",J),_("__asyncDelegator",Q),_("__asyncValues",ae),_("__makeTemplateObject",U),_("__importStar",q),_("__importDefault",T),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(fp);var Wo=fp.exports,ss={},Tc={},os={};let ii=class{};const w3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ii},Symbol.toStringTag,{value:"Module"})),E3=_d(w3);var wl;function D3(){if(wl)return os;wl=1,Object.defineProperty(os,"__esModule",{value:!0}),os.IHeartBeat=void 0;const i=E3;class e extends i.IEvents{constructor(s){super()}}return os.IHeartBeat=e,os}var El;function lp(){return El||(El=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Wo.__exportStar(D3(),i)}(Tc)),Tc}var Rc={},Qn={},Dl;function S3(){if(Dl)return Qn;Dl=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.HEARTBEAT_EVENTS=Qn.HEARTBEAT_INTERVAL=void 0;const i=be;return Qn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,Qn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Qn}var Sl;function dp(){return Sl||(Sl=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Wo.__exportStar(S3(),i)}(Rc)),Rc}var Ol;function O3(){if(Ol)return ss;Ol=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.HeartBeat=void 0;const i=Wo,e=Ir,r=be,s=lp(),o=dp();class d extends s.IHeartBeat{constructor(v){super(v),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(v==null?void 0:v.interval)||o.HEARTBEAT_INTERVAL}static init(v){return i.__awaiter(this,void 0,void 0,function*(){const w=new d(v);return yield w.init(),w})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(v,w){this.events.on(v,w)}once(v,w){this.events.once(v,w)}off(v,w){this.events.off(v,w)}removeListener(v,w){this.events.removeListener(v,w)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return ss.HeartBeat=d,ss}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=Wo;e.__exportStar(O3(),i),e.__exportStar(lp(),i),e.__exportStar(dp(),i)})(bs);var Ze={},pp={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,d,b,v,w,C,A,$,G,B,F,J,Q,ae,U,q,T,N,S,u;(function(_){var Z=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Z,c(i.exports)));function c(g,y){return g!==Z&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,f){return g[E]=y?y(E,f):f}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var y in g)g.hasOwnProperty(y)&&(c[y]=g[y])};e=function(c,g){Z(c,g);function y(){this.constructor=c}c.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(c){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}return c},s=function(c,g){var y={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&g.indexOf(E)<0&&(y[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,E=Object.getOwnPropertySymbols(c);f<E.length;f++)g.indexOf(E[f])<0&&Object.prototype.propertyIsEnumerable.call(c,E[f])&&(y[E[f]]=c[E[f]]);return y},o=function(c,g,y,E){var f=arguments.length,l=f<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(c,g,y,E);else for(var j=c.length-1;j>=0;j--)(x=c[j])&&(l=(f<3?x(l):f>3?x(g,y,l):x(g,y))||l);return f>3&&l&&Object.defineProperty(g,y,l),l},d=function(c,g){return function(y,E){g(y,E,c)}},b=function(c,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,g)},v=function(c,g,y,E){function f(l){return l instanceof y?l:new y(function(x){x(l)})}return new(y||(y=Promise))(function(l,x){function j(z){try{I(E.next(z))}catch(te){x(te)}}function K(z){try{I(E.throw(z))}catch(te){x(te)}}function I(z){z.done?l(z.value):f(z.value).then(j,K)}I((E=E.apply(c,g||[])).next())})},w=function(c,g){var y={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},E,f,l,x;return x={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function j(I){return function(z){return K([I,z])}}function K(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,f&&(l=I[0]&2?f.return:I[0]?f.throw||((l=f.return)&&l.call(f),0):f.next)&&!(l=l.call(f,I[1])).done)return l;switch(f=0,l&&(I=[I[0]&2,l.value]),I[0]){case 0:case 1:l=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,f=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(l=y.trys,!(l=l.length>0&&l[l.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!l||I[1]>l[0]&&I[1]<l[3])){y.label=I[1];break}if(I[0]===6&&y.label<l[1]){y.label=l[1],l=I;break}if(l&&y.label<l[2]){y.label=l[2],y.ops.push(I);break}l[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(c,y)}catch(z){I=[6,z],f=0}finally{E=l=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},u=function(c,g,y,E){E===void 0&&(E=y),c[E]=g[y]},C=function(c,g){for(var y in c)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=c[y])},A=function(c){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&c[g],E=0;if(y)return y.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},$=function(c,g){var y=typeof Symbol=="function"&&c[Symbol.iterator];if(!y)return c;var E=y.call(c),f,l=[],x;try{for(;(g===void 0||g-- >0)&&!(f=E.next()).done;)l.push(f.value)}catch(j){x={error:j}}finally{try{f&&!f.done&&(y=E.return)&&y.call(E)}finally{if(x)throw x.error}}return l},G=function(){for(var c=[],g=0;g<arguments.length;g++)c=c.concat($(arguments[g]));return c},B=function(){for(var c=0,g=0,y=arguments.length;g<y;g++)c+=arguments[g].length;for(var E=Array(c),f=0,g=0;g<y;g++)for(var l=arguments[g],x=0,j=l.length;x<j;x++,f++)E[f]=l[x];return E},F=function(c){return this instanceof F?(this.v=c,this):new F(c)},J=function(c,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(c,g||[]),f,l=[];return f={},x("next"),x("throw"),x("return"),f[Symbol.asyncIterator]=function(){return this},f;function x(re){E[re]&&(f[re]=function(ne){return new Promise(function(ge,fe){l.push([re,ne,ge,fe])>1||j(re,ne)})})}function j(re,ne){try{K(E[re](ne))}catch(ge){te(l[0][3],ge)}}function K(re){re.value instanceof F?Promise.resolve(re.value.v).then(I,z):te(l[0][2],re)}function I(re){j("next",re)}function z(re){j("throw",re)}function te(re,ne){re(ne),l.shift(),l.length&&j(l[0][0],l[0][1])}},Q=function(c){var g,y;return g={},E("next"),E("throw",function(f){throw f}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(f,l){g[f]=c[f]?function(x){return(y=!y)?{value:F(c[f](x)),done:f==="return"}:l?l(x):x}:l}},ae=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=c[Symbol.asyncIterator],y;return g?g.call(c):(c=typeof A=="function"?A(c):c[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(l){y[l]=c[l]&&function(x){return new Promise(function(j,K){x=c[l](x),f(j,K,x.done,x.value)})}}function f(l,x,j,K){Promise.resolve(K).then(function(I){l({value:I,done:j})},x)}},U=function(c,g){return Object.defineProperty?Object.defineProperty(c,"raw",{value:g}):c.raw=g,c},q=function(c){if(c&&c.__esModule)return c;var g={};if(c!=null)for(var y in c)Object.hasOwnProperty.call(c,y)&&(g[y]=c[y]);return g.default=c,g},T=function(c){return c&&c.__esModule?c:{default:c}},N=function(c,g){if(!g.has(c))throw new TypeError("attempted to get private field on non-instance");return g.get(c)},S=function(c,g,y){if(!g.has(c))throw new TypeError("attempted to set private field on non-instance");return g.set(c,y),y},_("__extends",e),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",d),_("__metadata",b),_("__awaiter",v),_("__generator",w),_("__exportStar",C),_("__createBinding",u),_("__values",A),_("__read",$),_("__spread",G),_("__spreadArrays",B),_("__await",F),_("__asyncGenerator",J),_("__asyncDelegator",Q),_("__asyncValues",ae),_("__makeTemplateObject",U),_("__importStar",q),_("__importDefault",T),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(pp);var I3=pp.exports,Nc,Il;function x3(){if(Il)return Nc;Il=1;function i(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Nc=e;function e(r,s,o){var d=o&&o.stringify||i,b=1;if(typeof r=="object"&&r!==null){var v=s.length+b;if(v===1)return r;var w=new Array(v);w[0]=d(r);for(var C=1;C<v;C++)w[C]=d(s[C]);return w.join(" ")}if(typeof r!="string")return r;var A=s.length;if(A===0)return r;for(var $="",G=1-b,B=-1,F=r&&r.length||0,J=0;J<F;){if(r.charCodeAt(J)===37&&J+1<F){switch(B=B>-1?B:0,r.charCodeAt(J+1)){case 100:case 102:if(G>=A||s[G]==null)break;B<J&&($+=r.slice(B,J)),$+=Number(s[G]),B=J+2,J++;break;case 105:if(G>=A||s[G]==null)break;B<J&&($+=r.slice(B,J)),$+=Math.floor(Number(s[G])),B=J+2,J++;break;case 79:case 111:case 106:if(G>=A||s[G]===void 0)break;B<J&&($+=r.slice(B,J));var Q=typeof s[G];if(Q==="string"){$+="'"+s[G]+"'",B=J+2,J++;break}if(Q==="function"){$+=s[G].name||"<anonymous>",B=J+2,J++;break}$+=d(s[G]),B=J+2,J++;break;case 115:if(G>=A)break;B<J&&($+=r.slice(B,J)),$+=String(s[G]),B=J+2,J++;break;case 37:B<J&&($+=r.slice(B,J)),$+="%",B=J+2,J++,G--;break}++G}++J}return B===-1?r:(B<F&&($+=r.slice(B)),$)}return Nc}var Fc,xl;function P3(){if(xl)return Fc;xl=1;const i=x3();Fc=o;const e=N().console||{},r={mapHttpRequest:F,mapHttpResponse:F,wrapRequestSerializer:J,wrapResponseSerializer:J,wrapErrorSerializer:J,req:F,res:F,err:G};function s(S,u){return Array.isArray(S)?S.filter(function(Z){return Z!=="!stdSerializers.err"}):S===!0?Object.keys(u):!1}function o(S){S=S||{},S.browser=S.browser||{};const u=S.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const _=S.browser.write||e;S.browser.write&&(S.browser.asObject=!0);const Z=S.serializers||{},c=s(S.browser.serialize,Z);let g=S.browser.serialize;Array.isArray(S.browser.serialize)&&S.browser.serialize.indexOf("!stdSerializers.err")>-1&&(g=!1);const y=["error","fatal","warn","info","debug","trace"];typeof _=="function"&&(_.error=_.fatal=_.warn=_.info=_.debug=_.trace=_),S.enabled===!1&&(S.level="silent");const E=S.level||"info",f=Object.create(_);f.log||(f.log=Q),Object.defineProperty(f,"levelVal",{get:x}),Object.defineProperty(f,"level",{get:j,set:K});const l={transmit:u,serialize:c,asObject:S.browser.asObject,levels:y,timestamp:B(S)};f.levels=o.levels,f.level=E,f.setMaxListeners=f.getMaxListeners=f.emit=f.addListener=f.on=f.prependListener=f.once=f.prependOnceListener=f.removeListener=f.removeAllListeners=f.listeners=f.listenerCount=f.eventNames=f.write=f.flush=Q,f.serializers=Z,f._serialize=c,f._stdErrSerialize=g,f.child=I,u&&(f._logEvent=$());function x(){return this.level==="silent"?1/0:this.levels.values[this.level]}function j(){return this._level}function K(z){if(z!=="silent"&&!this.levels.values[z])throw Error("unknown level "+z);this._level=z,d(l,f,"error","log"),d(l,f,"fatal","error"),d(l,f,"warn","error"),d(l,f,"info","log"),d(l,f,"debug","log"),d(l,f,"trace","log")}function I(z,te){if(!z)throw new Error("missing bindings for child Pino");te=te||{},c&&z.serializers&&(te.serializers=z.serializers);const re=te.serializers;if(c&&re){var ne=Object.assign({},Z,re),ge=S.browser.serialize===!0?Object.keys(ne):c;delete z.serializers,w([z],ge,ne,this._stdErrSerialize)}function fe(me){this._childLevel=(me._childLevel|0)+1,this.error=C(me,z,"error"),this.fatal=C(me,z,"fatal"),this.warn=C(me,z,"warn"),this.info=C(me,z,"info"),this.debug=C(me,z,"debug"),this.trace=C(me,z,"trace"),ne&&(this.serializers=ne,this._serialize=ge),u&&(this._logEvent=$([].concat(me._logEvent.bindings,z)))}return fe.prototype=this,new fe(this)}return f}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=r,o.stdTimeFunctions=Object.assign({},{nullTime:ae,epochTime:U,unixTime:q,isoTime:T});function d(S,u,_,Z){const c=Object.getPrototypeOf(u);u[_]=u.levelVal>u.levels.values[_]?Q:c[_]?c[_]:e[_]||e[Z]||Q,b(S,u,_)}function b(S,u,_){!S.transmit&&u[_]===Q||(u[_]=function(Z){return function(){const g=S.timestamp(),y=new Array(arguments.length),E=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var f=0;f<y.length;f++)y[f]=arguments[f];if(S.serialize&&!S.asObject&&w(y,this._serialize,this.serializers,this._stdErrSerialize),S.asObject?Z.call(E,v(this,_,y,g)):Z.apply(E,y),S.transmit){const l=S.transmit.level||u.level,x=o.levels.values[l],j=o.levels.values[_];if(j<x)return;A(this,{ts:g,methodLevel:_,methodValue:j,transmitLevel:l,transmitValue:o.levels.values[S.transmit.level||u.level],send:S.transmit.send,val:u.levelVal},y)}}}(u[_]))}function v(S,u,_,Z){S._serialize&&w(_,S._serialize,S.serializers,S._stdErrSerialize);const c=_.slice();let g=c[0];const y={};Z&&(y.time=Z),y.level=o.levels.values[u];let E=(S._childLevel|0)+1;if(E<1&&(E=1),g!==null&&typeof g=="object"){for(;E--&&typeof c[0]=="object";)Object.assign(y,c.shift());g=c.length?i(c.shift(),c):void 0}else typeof g=="string"&&(g=i(c.shift(),c));return g!==void 0&&(y.msg=g),y}function w(S,u,_,Z){for(const c in S)if(Z&&S[c]instanceof Error)S[c]=o.stdSerializers.err(S[c]);else if(typeof S[c]=="object"&&!Array.isArray(S[c]))for(const g in S[c])u&&u.indexOf(g)>-1&&g in _&&(S[c][g]=_[g](S[c][g]))}function C(S,u,_){return function(){const Z=new Array(1+arguments.length);Z[0]=u;for(var c=1;c<Z.length;c++)Z[c]=arguments[c-1];return S[_].apply(this,Z)}}function A(S,u,_){const Z=u.send,c=u.ts,g=u.methodLevel,y=u.methodValue,E=u.val,f=S._logEvent.bindings;w(_,S._serialize||Object.keys(S.serializers),S.serializers,S._stdErrSerialize===void 0?!0:S._stdErrSerialize),S._logEvent.ts=c,S._logEvent.messages=_.filter(function(l){return f.indexOf(l)===-1}),S._logEvent.level.label=g,S._logEvent.level.value=y,Z(g,S._logEvent,E),S._logEvent=$(f)}function $(S){return{ts:0,messages:[],bindings:S||[],level:{label:"",value:0}}}function G(S){const u={type:S.constructor.name,msg:S.message,stack:S.stack};for(const _ in S)u[_]===void 0&&(u[_]=S[_]);return u}function B(S){return typeof S.timestamp=="function"?S.timestamp:S.timestamp===!1?ae:U}function F(){return{}}function J(S){return S}function Q(){}function ae(){return!1}function U(){return Date.now()}function q(){return Math.round(Date.now()/1e3)}function T(){return new Date(Date.now()).toISOString()}function N(){function S(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return S(self)||S(window)||S(this)||{}}}return Fc}var Zn={},Pl;function gp(){return Pl||(Pl=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.PINO_CUSTOM_CONTEXT_KEY=Zn.PINO_LOGGER_DEFAULTS=void 0,Zn.PINO_LOGGER_DEFAULTS={level:"info"},Zn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Zn}var cr={},Cl;function C3(){if(Cl)return cr;Cl=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const i=gp();function e(v){return Object.assign(Object.assign({},v),{level:(v==null?void 0:v.level)||i.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function r(v,w=i.PINO_CUSTOM_CONTEXT_KEY){return v[w]||""}cr.getBrowserLoggerContext=r;function s(v,w,C=i.PINO_CUSTOM_CONTEXT_KEY){return v[C]=w,v}cr.setBrowserLoggerContext=s;function o(v,w=i.PINO_CUSTOM_CONTEXT_KEY){let C="";return typeof v.bindings>"u"?C=r(v,w):C=v.bindings().context||"",C}cr.getLoggerContext=o;function d(v,w,C=i.PINO_CUSTOM_CONTEXT_KEY){const A=o(v,C);return A.trim()?`${A}/${w}`:w}cr.formatChildLoggerContext=d;function b(v,w,C=i.PINO_CUSTOM_CONTEXT_KEY){const A=d(v,w,C),$=v.child({context:A});return s($,A,C)}return cr.generateChildLogger=b,cr}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const e=I3,r=e.__importDefault(P3());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(gp(),i),e.__exportStar(C3(),i)})(Ze);class A3 extends ii{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class T3 extends ii{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class R3{constructor(e,r){this.logger=e,this.core=r}}let N3=class extends ii{constructor(e,r){super(),this.relayer=e,this.logger=r}},F3=class extends ii{constructor(e){super()}},j3=class{constructor(e,r,s,o){this.core=e,this.logger=r,this.name=s}};class L3 extends ii{constructor(e,r){super(),this.relayer=e,this.logger=r}}class U3 extends ii{constructor(e,r){super(),this.core=e,this.logger=r}}let M3=class{constructor(e,r){this.projectId=e,this.logger=r}},$3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class B3{constructor(e){this.client=e}}const q3=i=>JSON.stringify(i,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),z3=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=i.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Ou(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return z3(i)}catch{return i}}function ps(i){return typeof i=="string"?i:q3(i)||""}var Iu={},yp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Le,r=xr;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function v(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return v.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},v.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},v.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},v.prototype.update=function(w,C){if(C===void 0&&(C=w.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var A=0;if(this._bytesHashed+=C,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&C>0;)this._buffer[this._bufferLength++]=w[A++],C--;this._bufferLength===this.blockSize&&(d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(C>=this.blockSize&&(A=d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,w,A,C),C%=this.blockSize);C>0;)this._buffer[this._bufferLength++]=w[A++],C--;return this},v.prototype.finish=function(w){if(!this._finished){var C=this._bytesHashed,A=this._bufferLength,$=C/536870912|0,G=C<<3,B=C%128<112?128:256;this._buffer[A]=128;for(var F=A+1;F<B-8;F++)this._buffer[F]=0;e.writeUint32BE($,this._buffer,B-8),e.writeUint32BE(G,this._buffer,B-4),d(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,B),this._finished=!0}for(var F=0;F<this.digestLength/8;F++)e.writeUint32BE(this._stateHi[F],w,F*8),e.writeUint32BE(this._stateLo[F],w,F*8+4);return this},v.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},v.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},v.prototype.restoreState=function(w){return this._stateHi.set(w.stateHi),this._stateLo.set(w.stateLo),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},v.prototype.cleanSavedState=function(w){r.wipe(w.stateHi),r.wipe(w.stateLo),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},v}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function d(v,w,C,A,$,G,B){for(var F=C[0],J=C[1],Q=C[2],ae=C[3],U=C[4],q=C[5],T=C[6],N=C[7],S=A[0],u=A[1],_=A[2],Z=A[3],c=A[4],g=A[5],y=A[6],E=A[7],f,l,x,j,K,I,z,te;B>=128;){for(var re=0;re<16;re++){var ne=8*re+G;v[re]=e.readUint32BE($,ne),w[re]=e.readUint32BE($,ne+4)}for(var re=0;re<80;re++){var ge=F,fe=J,me=Q,X=ae,Y=U,H=q,p=T,L=N,he=S,pe=u,Oe=_,ze=Z,Ve=c,Ue=g,gt=y,yt=E;if(f=N,l=E,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=(U>>>14|c<<32-14)^(U>>>18|c<<32-18)^(c>>>41-32|U<<32-(41-32)),l=(c>>>14|U<<32-14)^(c>>>18|U<<32-18)^(U>>>41-32|c<<32-(41-32)),K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,f=U&q^~U&T,l=c&g^~c&y,K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,f=o[re*2],l=o[re*2+1],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,f=v[re%16],l=w[re%16],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,x=z&65535|te<<16,j=K&65535|I<<16,f=x,l=j,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=(F>>>28|S<<32-28)^(S>>>34-32|F<<32-(34-32))^(S>>>39-32|F<<32-(39-32)),l=(S>>>28|F<<32-28)^(F>>>34-32|S<<32-(34-32))^(F>>>39-32|S<<32-(39-32)),K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,f=F&J^F&Q^J&Q,l=S&u^S&_^u&_,K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,L=z&65535|te<<16,yt=K&65535|I<<16,f=X,l=ze,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=x,l=j,K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,X=z&65535|te<<16,ze=K&65535|I<<16,J=ge,Q=fe,ae=me,U=X,q=Y,T=H,N=p,F=L,u=he,_=pe,Z=Oe,c=ze,g=Ve,y=Ue,E=gt,S=yt,re%16===15)for(var ne=0;ne<16;ne++)f=v[ne],l=w[ne],K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=v[(ne+9)%16],l=w[(ne+9)%16],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,x=v[(ne+1)%16],j=w[(ne+1)%16],f=(x>>>1|j<<32-1)^(x>>>8|j<<32-8)^x>>>7,l=(j>>>1|x<<32-1)^(j>>>8|x<<32-8)^(j>>>7|x<<32-7),K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,x=v[(ne+14)%16],j=w[(ne+14)%16],f=(x>>>19|j<<32-19)^(j>>>61-32|x<<32-(61-32))^x>>>6,l=(j>>>19|x<<32-19)^(x>>>61-32|j<<32-(61-32))^(j>>>6|x<<32-6),K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,v[ne]=z&65535|te<<16,w[ne]=K&65535|I<<16}f=F,l=S,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=C[0],l=A[0],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,C[0]=F=z&65535|te<<16,A[0]=S=K&65535|I<<16,f=J,l=u,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=C[1],l=A[1],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,C[1]=J=z&65535|te<<16,A[1]=u=K&65535|I<<16,f=Q,l=_,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=C[2],l=A[2],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,C[2]=Q=z&65535|te<<16,A[2]=_=K&65535|I<<16,f=ae,l=Z,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=C[3],l=A[3],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,C[3]=ae=z&65535|te<<16,A[3]=Z=K&65535|I<<16,f=U,l=c,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=C[4],l=A[4],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,C[4]=U=z&65535|te<<16,A[4]=c=K&65535|I<<16,f=q,l=g,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=C[5],l=A[5],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,C[5]=q=z&65535|te<<16,A[5]=g=K&65535|I<<16,f=T,l=y,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=C[6],l=A[6],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,C[6]=T=z&65535|te<<16,A[6]=y=K&65535|I<<16,f=N,l=E,K=l&65535,I=l>>>16,z=f&65535,te=f>>>16,f=C[7],l=A[7],K+=l&65535,I+=l>>>16,z+=f&65535,te+=f>>>16,I+=K>>>16,z+=I>>>16,te+=z>>>16,C[7]=N=z&65535|te<<16,A[7]=E=K&65535|I<<16,G+=128,B-=128}return G}function b(v){var w=new s;w.update(v);var C=w.digest();return w.clean(),C}i.hash=b})(yp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=Ri,r=yp,s=xr;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(X){const Y=new Float64Array(16);if(X)for(let H=0;H<X.length;H++)Y[H]=X[H];return Y}const d=new Uint8Array(32);d[0]=9;const b=o(),v=o([1]),w=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),C=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),A=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),$=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),G=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function B(X,Y){for(let H=0;H<16;H++)X[H]=Y[H]|0}function F(X){let Y=1;for(let H=0;H<16;H++){let p=X[H]+Y+65535;Y=Math.floor(p/65536),X[H]=p-Y*65536}X[0]+=Y-1+37*(Y-1)}function J(X,Y,H){const p=~(H-1);for(let L=0;L<16;L++){const he=p&(X[L]^Y[L]);X[L]^=he,Y[L]^=he}}function Q(X,Y){const H=o(),p=o();for(let L=0;L<16;L++)p[L]=Y[L];F(p),F(p),F(p);for(let L=0;L<2;L++){H[0]=p[0]-65517;for(let pe=1;pe<15;pe++)H[pe]=p[pe]-65535-(H[pe-1]>>16&1),H[pe-1]&=65535;H[15]=p[15]-32767-(H[14]>>16&1);const he=H[15]>>16&1;H[14]&=65535,J(p,H,1-he)}for(let L=0;L<16;L++)X[2*L]=p[L]&255,X[2*L+1]=p[L]>>8}function ae(X,Y){let H=0;for(let p=0;p<32;p++)H|=X[p]^Y[p];return(1&H-1>>>8)-1}function U(X,Y){const H=new Uint8Array(32),p=new Uint8Array(32);return Q(H,X),Q(p,Y),ae(H,p)}function q(X){const Y=new Uint8Array(32);return Q(Y,X),Y[0]&1}function T(X,Y){for(let H=0;H<16;H++)X[H]=Y[2*H]+(Y[2*H+1]<<8);X[15]&=32767}function N(X,Y,H){for(let p=0;p<16;p++)X[p]=Y[p]+H[p]}function S(X,Y,H){for(let p=0;p<16;p++)X[p]=Y[p]-H[p]}function u(X,Y,H){let p,L,he=0,pe=0,Oe=0,ze=0,Ve=0,Ue=0,gt=0,yt=0,$e=0,Ie=0,Ne=0,Fe=0,Be=0,Pe=0,je=0,Se=0,Ce=0,He=0,xe=0,ke=0,We=0,et=0,tt=0,Je=0,rr=0,lr=0,Gr=0,nr=0,nn=0,mn=0,Ln=0,Dt=H[0],vt=H[1],St=H[2],Ot=H[3],wt=H[4],_t=H[5],Ut=H[6],Mt=H[7],It=H[8],$t=H[9],xt=H[10],Tt=H[11],Pt=H[12],ft=H[13],Bt=H[14],qt=H[15];p=Y[0],he+=p*Dt,pe+=p*vt,Oe+=p*St,ze+=p*Ot,Ve+=p*wt,Ue+=p*_t,gt+=p*Ut,yt+=p*Mt,$e+=p*It,Ie+=p*$t,Ne+=p*xt,Fe+=p*Tt,Be+=p*Pt,Pe+=p*ft,je+=p*Bt,Se+=p*qt,p=Y[1],pe+=p*Dt,Oe+=p*vt,ze+=p*St,Ve+=p*Ot,Ue+=p*wt,gt+=p*_t,yt+=p*Ut,$e+=p*Mt,Ie+=p*It,Ne+=p*$t,Fe+=p*xt,Be+=p*Tt,Pe+=p*Pt,je+=p*ft,Se+=p*Bt,Ce+=p*qt,p=Y[2],Oe+=p*Dt,ze+=p*vt,Ve+=p*St,Ue+=p*Ot,gt+=p*wt,yt+=p*_t,$e+=p*Ut,Ie+=p*Mt,Ne+=p*It,Fe+=p*$t,Be+=p*xt,Pe+=p*Tt,je+=p*Pt,Se+=p*ft,Ce+=p*Bt,He+=p*qt,p=Y[3],ze+=p*Dt,Ve+=p*vt,Ue+=p*St,gt+=p*Ot,yt+=p*wt,$e+=p*_t,Ie+=p*Ut,Ne+=p*Mt,Fe+=p*It,Be+=p*$t,Pe+=p*xt,je+=p*Tt,Se+=p*Pt,Ce+=p*ft,He+=p*Bt,xe+=p*qt,p=Y[4],Ve+=p*Dt,Ue+=p*vt,gt+=p*St,yt+=p*Ot,$e+=p*wt,Ie+=p*_t,Ne+=p*Ut,Fe+=p*Mt,Be+=p*It,Pe+=p*$t,je+=p*xt,Se+=p*Tt,Ce+=p*Pt,He+=p*ft,xe+=p*Bt,ke+=p*qt,p=Y[5],Ue+=p*Dt,gt+=p*vt,yt+=p*St,$e+=p*Ot,Ie+=p*wt,Ne+=p*_t,Fe+=p*Ut,Be+=p*Mt,Pe+=p*It,je+=p*$t,Se+=p*xt,Ce+=p*Tt,He+=p*Pt,xe+=p*ft,ke+=p*Bt,We+=p*qt,p=Y[6],gt+=p*Dt,yt+=p*vt,$e+=p*St,Ie+=p*Ot,Ne+=p*wt,Fe+=p*_t,Be+=p*Ut,Pe+=p*Mt,je+=p*It,Se+=p*$t,Ce+=p*xt,He+=p*Tt,xe+=p*Pt,ke+=p*ft,We+=p*Bt,et+=p*qt,p=Y[7],yt+=p*Dt,$e+=p*vt,Ie+=p*St,Ne+=p*Ot,Fe+=p*wt,Be+=p*_t,Pe+=p*Ut,je+=p*Mt,Se+=p*It,Ce+=p*$t,He+=p*xt,xe+=p*Tt,ke+=p*Pt,We+=p*ft,et+=p*Bt,tt+=p*qt,p=Y[8],$e+=p*Dt,Ie+=p*vt,Ne+=p*St,Fe+=p*Ot,Be+=p*wt,Pe+=p*_t,je+=p*Ut,Se+=p*Mt,Ce+=p*It,He+=p*$t,xe+=p*xt,ke+=p*Tt,We+=p*Pt,et+=p*ft,tt+=p*Bt,Je+=p*qt,p=Y[9],Ie+=p*Dt,Ne+=p*vt,Fe+=p*St,Be+=p*Ot,Pe+=p*wt,je+=p*_t,Se+=p*Ut,Ce+=p*Mt,He+=p*It,xe+=p*$t,ke+=p*xt,We+=p*Tt,et+=p*Pt,tt+=p*ft,Je+=p*Bt,rr+=p*qt,p=Y[10],Ne+=p*Dt,Fe+=p*vt,Be+=p*St,Pe+=p*Ot,je+=p*wt,Se+=p*_t,Ce+=p*Ut,He+=p*Mt,xe+=p*It,ke+=p*$t,We+=p*xt,et+=p*Tt,tt+=p*Pt,Je+=p*ft,rr+=p*Bt,lr+=p*qt,p=Y[11],Fe+=p*Dt,Be+=p*vt,Pe+=p*St,je+=p*Ot,Se+=p*wt,Ce+=p*_t,He+=p*Ut,xe+=p*Mt,ke+=p*It,We+=p*$t,et+=p*xt,tt+=p*Tt,Je+=p*Pt,rr+=p*ft,lr+=p*Bt,Gr+=p*qt,p=Y[12],Be+=p*Dt,Pe+=p*vt,je+=p*St,Se+=p*Ot,Ce+=p*wt,He+=p*_t,xe+=p*Ut,ke+=p*Mt,We+=p*It,et+=p*$t,tt+=p*xt,Je+=p*Tt,rr+=p*Pt,lr+=p*ft,Gr+=p*Bt,nr+=p*qt,p=Y[13],Pe+=p*Dt,je+=p*vt,Se+=p*St,Ce+=p*Ot,He+=p*wt,xe+=p*_t,ke+=p*Ut,We+=p*Mt,et+=p*It,tt+=p*$t,Je+=p*xt,rr+=p*Tt,lr+=p*Pt,Gr+=p*ft,nr+=p*Bt,nn+=p*qt,p=Y[14],je+=p*Dt,Se+=p*vt,Ce+=p*St,He+=p*Ot,xe+=p*wt,ke+=p*_t,We+=p*Ut,et+=p*Mt,tt+=p*It,Je+=p*$t,rr+=p*xt,lr+=p*Tt,Gr+=p*Pt,nr+=p*ft,nn+=p*Bt,mn+=p*qt,p=Y[15],Se+=p*Dt,Ce+=p*vt,He+=p*St,xe+=p*Ot,ke+=p*wt,We+=p*_t,et+=p*Ut,tt+=p*Mt,Je+=p*It,rr+=p*$t,lr+=p*xt,Gr+=p*Tt,nr+=p*Pt,nn+=p*ft,mn+=p*Bt,Ln+=p*qt,he+=38*Ce,pe+=38*He,Oe+=38*xe,ze+=38*ke,Ve+=38*We,Ue+=38*et,gt+=38*tt,yt+=38*Je,$e+=38*rr,Ie+=38*lr,Ne+=38*Gr,Fe+=38*nr,Be+=38*nn,Pe+=38*mn,je+=38*Ln,L=1,p=he+L+65535,L=Math.floor(p/65536),he=p-L*65536,p=pe+L+65535,L=Math.floor(p/65536),pe=p-L*65536,p=Oe+L+65535,L=Math.floor(p/65536),Oe=p-L*65536,p=ze+L+65535,L=Math.floor(p/65536),ze=p-L*65536,p=Ve+L+65535,L=Math.floor(p/65536),Ve=p-L*65536,p=Ue+L+65535,L=Math.floor(p/65536),Ue=p-L*65536,p=gt+L+65535,L=Math.floor(p/65536),gt=p-L*65536,p=yt+L+65535,L=Math.floor(p/65536),yt=p-L*65536,p=$e+L+65535,L=Math.floor(p/65536),$e=p-L*65536,p=Ie+L+65535,L=Math.floor(p/65536),Ie=p-L*65536,p=Ne+L+65535,L=Math.floor(p/65536),Ne=p-L*65536,p=Fe+L+65535,L=Math.floor(p/65536),Fe=p-L*65536,p=Be+L+65535,L=Math.floor(p/65536),Be=p-L*65536,p=Pe+L+65535,L=Math.floor(p/65536),Pe=p-L*65536,p=je+L+65535,L=Math.floor(p/65536),je=p-L*65536,p=Se+L+65535,L=Math.floor(p/65536),Se=p-L*65536,he+=L-1+37*(L-1),L=1,p=he+L+65535,L=Math.floor(p/65536),he=p-L*65536,p=pe+L+65535,L=Math.floor(p/65536),pe=p-L*65536,p=Oe+L+65535,L=Math.floor(p/65536),Oe=p-L*65536,p=ze+L+65535,L=Math.floor(p/65536),ze=p-L*65536,p=Ve+L+65535,L=Math.floor(p/65536),Ve=p-L*65536,p=Ue+L+65535,L=Math.floor(p/65536),Ue=p-L*65536,p=gt+L+65535,L=Math.floor(p/65536),gt=p-L*65536,p=yt+L+65535,L=Math.floor(p/65536),yt=p-L*65536,p=$e+L+65535,L=Math.floor(p/65536),$e=p-L*65536,p=Ie+L+65535,L=Math.floor(p/65536),Ie=p-L*65536,p=Ne+L+65535,L=Math.floor(p/65536),Ne=p-L*65536,p=Fe+L+65535,L=Math.floor(p/65536),Fe=p-L*65536,p=Be+L+65535,L=Math.floor(p/65536),Be=p-L*65536,p=Pe+L+65535,L=Math.floor(p/65536),Pe=p-L*65536,p=je+L+65535,L=Math.floor(p/65536),je=p-L*65536,p=Se+L+65535,L=Math.floor(p/65536),Se=p-L*65536,he+=L-1+37*(L-1),X[0]=he,X[1]=pe,X[2]=Oe,X[3]=ze,X[4]=Ve,X[5]=Ue,X[6]=gt,X[7]=yt,X[8]=$e,X[9]=Ie,X[10]=Ne,X[11]=Fe,X[12]=Be,X[13]=Pe,X[14]=je,X[15]=Se}function _(X,Y){u(X,Y,Y)}function Z(X,Y){const H=o();let p;for(p=0;p<16;p++)H[p]=Y[p];for(p=253;p>=0;p--)_(H,H),p!==2&&p!==4&&u(H,H,Y);for(p=0;p<16;p++)X[p]=H[p]}function c(X,Y){const H=o();let p;for(p=0;p<16;p++)H[p]=Y[p];for(p=250;p>=0;p--)_(H,H),p!==1&&u(H,H,Y);for(p=0;p<16;p++)X[p]=H[p]}function g(X,Y){const H=o(),p=o(),L=o(),he=o(),pe=o(),Oe=o(),ze=o(),Ve=o(),Ue=o();S(H,X[1],X[0]),S(Ue,Y[1],Y[0]),u(H,H,Ue),N(p,X[0],X[1]),N(Ue,Y[0],Y[1]),u(p,p,Ue),u(L,X[3],Y[3]),u(L,L,C),u(he,X[2],Y[2]),N(he,he,he),S(pe,p,H),S(Oe,he,L),N(ze,he,L),N(Ve,p,H),u(X[0],pe,Oe),u(X[1],Ve,ze),u(X[2],ze,Oe),u(X[3],pe,Ve)}function y(X,Y,H){for(let p=0;p<4;p++)J(X[p],Y[p],H)}function E(X,Y){const H=o(),p=o(),L=o();Z(L,Y[2]),u(H,Y[0],L),u(p,Y[1],L),Q(X,p),X[31]^=q(H)<<7}function f(X,Y,H){B(X[0],b),B(X[1],v),B(X[2],v),B(X[3],b);for(let p=255;p>=0;--p){const L=H[p/8|0]>>(p&7)&1;y(X,Y,L),g(Y,X),g(X,X),y(X,Y,L)}}function l(X,Y){const H=[o(),o(),o(),o()];B(H[0],A),B(H[1],$),B(H[2],v),u(H[3],A,$),f(X,H,Y)}function x(X){if(X.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const Y=(0,r.hash)(X);Y[0]&=248,Y[31]&=127,Y[31]|=64;const H=new Uint8Array(32),p=[o(),o(),o(),o()];l(p,Y),E(H,p);const L=new Uint8Array(64);return L.set(X),L.set(H,32),{publicKey:H,secretKey:L}}i.generateKeyPairFromSeed=x;function j(X){const Y=(0,e.randomBytes)(32,X),H=x(Y);return(0,s.wipe)(Y),H}i.generateKeyPair=j;function K(X){if(X.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(X.subarray(32))}i.extractPublicKeyFromSecretKey=K;const I=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function z(X,Y){let H,p,L,he;for(p=63;p>=32;--p){for(H=0,L=p-32,he=p-12;L<he;++L)Y[L]+=H-16*Y[p]*I[L-(p-32)],H=Math.floor((Y[L]+128)/256),Y[L]-=H*256;Y[L]+=H,Y[p]=0}for(H=0,L=0;L<32;L++)Y[L]+=H-(Y[31]>>4)*I[L],H=Y[L]>>8,Y[L]&=255;for(L=0;L<32;L++)Y[L]-=H*I[L];for(p=0;p<32;p++)Y[p+1]+=Y[p]>>8,X[p]=Y[p]&255}function te(X){const Y=new Float64Array(64);for(let H=0;H<64;H++)Y[H]=X[H];for(let H=0;H<64;H++)X[H]=0;z(X,Y)}function re(X,Y){const H=new Float64Array(64),p=[o(),o(),o(),o()],L=(0,r.hash)(X.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const he=new Uint8Array(64);he.set(L.subarray(32),32);const pe=new r.SHA512;pe.update(he.subarray(32)),pe.update(Y);const Oe=pe.digest();pe.clean(),te(Oe),l(p,Oe),E(he,p),pe.reset(),pe.update(he.subarray(0,32)),pe.update(X.subarray(32)),pe.update(Y);const ze=pe.digest();te(ze);for(let Ve=0;Ve<32;Ve++)H[Ve]=Oe[Ve];for(let Ve=0;Ve<32;Ve++)for(let Ue=0;Ue<32;Ue++)H[Ve+Ue]+=ze[Ve]*L[Ue];return z(he.subarray(32),H),he}i.sign=re;function ne(X,Y){const H=o(),p=o(),L=o(),he=o(),pe=o(),Oe=o(),ze=o();return B(X[2],v),T(X[1],Y),_(L,X[1]),u(he,L,w),S(L,L,X[2]),N(he,X[2],he),_(pe,he),_(Oe,pe),u(ze,Oe,pe),u(H,ze,L),u(H,H,he),c(H,H),u(H,H,L),u(H,H,he),u(H,H,he),u(X[0],H,he),_(p,X[0]),u(p,p,he),U(p,L)&&u(X[0],X[0],G),_(p,X[0]),u(p,p,he),U(p,L)?-1:(q(X[0])===Y[31]>>7&&S(X[0],b,X[0]),u(X[3],X[0],X[1]),0)}function ge(X,Y,H){const p=new Uint8Array(32),L=[o(),o(),o(),o()],he=[o(),o(),o(),o()];if(H.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(ne(he,X))return!1;const pe=new r.SHA512;pe.update(H.subarray(0,32)),pe.update(X),pe.update(Y);const Oe=pe.digest();return te(Oe),f(L,he,Oe),l(he,H.subarray(32)),g(L,he),E(p,L),!ae(H,p)}i.verify=ge;function fe(X){let Y=[o(),o(),o(),o()];if(ne(Y,X))throw new Error("Ed25519: invalid public key");let H=o(),p=o(),L=Y[1];N(H,v,L),S(p,v,L),Z(p,p),u(H,H,p);let he=new Uint8Array(32);return Q(he,H),he}i.convertPublicKeyToX25519=fe;function me(X){const Y=(0,r.hash)(X.subarray(0,32));Y[0]&=248,Y[31]&=127,Y[31]|=64;const H=new Uint8Array(Y.subarray(0,32));return(0,s.wipe)(Y),H}i.convertSecretKeyToX25519=me})(Iu);const H3="EdDSA",K3="JWT",vp=".",_p="base64url",V3="utf8",k3="utf8",G3=":",W3="did",Y3="key",Al="base58btc",J3="z",X3="K36",Q3=32;function Uo(i){return fr(br(ps(i),V3),_p)}function bp(i){const e=br(X3,Al),r=J3+fr(Jc([e,i]),Al);return[W3,Y3,r].join(G3)}function Z3(i){return fr(i,_p)}function e6(i){return br([Uo(i.header),Uo(i.payload)].join(vp),k3)}function t6(i){return[Uo(i.header),Uo(i.payload),Z3(i.signature)].join(vp)}function Tl(i=Ri.randomBytes(Q3)){return Iu.generateKeyPairFromSeed(i)}async function r6(i,e,r,s,o=be.fromMiliseconds(Date.now())){const d={alg:H3,typ:K3},b=bp(s.publicKey),v=o+r,w={iss:b,sub:i,aud:e,iat:o,exp:v},C=e6({header:d,payload:w}),A=Iu.sign(s.secretKey,C);return t6({header:d,payload:w,signature:A})}const n6="PARSE_ERROR",i6="INVALID_REQUEST",s6="METHOD_NOT_FOUND",o6="INVALID_PARAMS",mp="INTERNAL_ERROR",xu="SERVER_ERROR",a6=[-32700,-32600,-32601,-32602,-32603],ls={[n6]:{code:-32700,message:"Parse error"},[i6]:{code:-32600,message:"Invalid Request"},[s6]:{code:-32601,message:"Method not found"},[o6]:{code:-32602,message:"Invalid params"},[mp]:{code:-32603,message:"Internal error"},[xu]:{code:-32e3,message:"Server error"}},wp=xu;function c6(i){return a6.includes(i)}function Rl(i){return Object.keys(ls).includes(i)?ls[i]:ls[wp]}function u6(i){const e=Object.values(ls).find(r=>r.code===i);return e||ls[wp]}function Ep(i,e,r){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):i}var Dp={},Sp={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(i){var e,r,s,o,d,b,v,w,C,A,$,G,B,F,J,Q,ae,U,q,T,N,S,u;(function(_){var Z=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};_(c(Z,c(i.exports)));function c(g,y){return g!==Z&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,f){return g[E]=y?y(E,f):f}}})(function(_){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var y in g)g.hasOwnProperty(y)&&(c[y]=g[y])};e=function(c,g){Z(c,g);function y(){this.constructor=c}c.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(c){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}return c},s=function(c,g){var y={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&g.indexOf(E)<0&&(y[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,E=Object.getOwnPropertySymbols(c);f<E.length;f++)g.indexOf(E[f])<0&&Object.prototype.propertyIsEnumerable.call(c,E[f])&&(y[E[f]]=c[E[f]]);return y},o=function(c,g,y,E){var f=arguments.length,l=f<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(c,g,y,E);else for(var j=c.length-1;j>=0;j--)(x=c[j])&&(l=(f<3?x(l):f>3?x(g,y,l):x(g,y))||l);return f>3&&l&&Object.defineProperty(g,y,l),l},d=function(c,g){return function(y,E){g(y,E,c)}},b=function(c,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,g)},v=function(c,g,y,E){function f(l){return l instanceof y?l:new y(function(x){x(l)})}return new(y||(y=Promise))(function(l,x){function j(z){try{I(E.next(z))}catch(te){x(te)}}function K(z){try{I(E.throw(z))}catch(te){x(te)}}function I(z){z.done?l(z.value):f(z.value).then(j,K)}I((E=E.apply(c,g||[])).next())})},w=function(c,g){var y={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},E,f,l,x;return x={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function j(I){return function(z){return K([I,z])}}function K(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,f&&(l=I[0]&2?f.return:I[0]?f.throw||((l=f.return)&&l.call(f),0):f.next)&&!(l=l.call(f,I[1])).done)return l;switch(f=0,l&&(I=[I[0]&2,l.value]),I[0]){case 0:case 1:l=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,f=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(l=y.trys,!(l=l.length>0&&l[l.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!l||I[1]>l[0]&&I[1]<l[3])){y.label=I[1];break}if(I[0]===6&&y.label<l[1]){y.label=l[1],l=I;break}if(l&&y.label<l[2]){y.label=l[2],y.ops.push(I);break}l[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(c,y)}catch(z){I=[6,z],f=0}finally{E=l=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},u=function(c,g,y,E){E===void 0&&(E=y),c[E]=g[y]},C=function(c,g){for(var y in c)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=c[y])},A=function(c){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&c[g],E=0;if(y)return y.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&E>=c.length&&(c=void 0),{value:c&&c[E++],done:!c}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},$=function(c,g){var y=typeof Symbol=="function"&&c[Symbol.iterator];if(!y)return c;var E=y.call(c),f,l=[],x;try{for(;(g===void 0||g-- >0)&&!(f=E.next()).done;)l.push(f.value)}catch(j){x={error:j}}finally{try{f&&!f.done&&(y=E.return)&&y.call(E)}finally{if(x)throw x.error}}return l},G=function(){for(var c=[],g=0;g<arguments.length;g++)c=c.concat($(arguments[g]));return c},B=function(){for(var c=0,g=0,y=arguments.length;g<y;g++)c+=arguments[g].length;for(var E=Array(c),f=0,g=0;g<y;g++)for(var l=arguments[g],x=0,j=l.length;x<j;x++,f++)E[f]=l[x];return E},F=function(c){return this instanceof F?(this.v=c,this):new F(c)},J=function(c,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(c,g||[]),f,l=[];return f={},x("next"),x("throw"),x("return"),f[Symbol.asyncIterator]=function(){return this},f;function x(re){E[re]&&(f[re]=function(ne){return new Promise(function(ge,fe){l.push([re,ne,ge,fe])>1||j(re,ne)})})}function j(re,ne){try{K(E[re](ne))}catch(ge){te(l[0][3],ge)}}function K(re){re.value instanceof F?Promise.resolve(re.value.v).then(I,z):te(l[0][2],re)}function I(re){j("next",re)}function z(re){j("throw",re)}function te(re,ne){re(ne),l.shift(),l.length&&j(l[0][0],l[0][1])}},Q=function(c){var g,y;return g={},E("next"),E("throw",function(f){throw f}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(f,l){g[f]=c[f]?function(x){return(y=!y)?{value:F(c[f](x)),done:f==="return"}:l?l(x):x}:l}},ae=function(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=c[Symbol.asyncIterator],y;return g?g.call(c):(c=typeof A=="function"?A(c):c[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(l){y[l]=c[l]&&function(x){return new Promise(function(j,K){x=c[l](x),f(j,K,x.done,x.value)})}}function f(l,x,j,K){Promise.resolve(K).then(function(I){l({value:I,done:j})},x)}},U=function(c,g){return Object.defineProperty?Object.defineProperty(c,"raw",{value:g}):c.raw=g,c},q=function(c){if(c&&c.__esModule)return c;var g={};if(c!=null)for(var y in c)Object.hasOwnProperty.call(c,y)&&(g[y]=c[y]);return g.default=c,g},T=function(c){return c&&c.__esModule?c:{default:c}},N=function(c,g){if(!g.has(c))throw new TypeError("attempted to get private field on non-instance");return g.get(c)},S=function(c,g,y){if(!g.has(c))throw new TypeError("attempted to set private field on non-instance");return g.set(c,y),y},_("__extends",e),_("__assign",r),_("__rest",s),_("__decorate",o),_("__param",d),_("__metadata",b),_("__awaiter",v),_("__generator",w),_("__exportStar",C),_("__createBinding",u),_("__values",A),_("__read",$),_("__spread",G),_("__spreadArrays",B),_("__await",F),_("__asyncGenerator",J),_("__asyncDelegator",Q),_("__asyncValues",ae),_("__makeTemplateObject",U),_("__importStar",q),_("__importDefault",T),_("__classPrivateFieldGet",N),_("__classPrivateFieldSet",S)})})(Sp);var h6=Sp.exports,yn={},Nl;function f6(){if(Nl)return yn;Nl=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.isBrowserCryptoAvailable=yn.getSubtleCrypto=yn.getBrowerCrypto=void 0;function i(){return(mt===null||mt===void 0?void 0:mt.crypto)||(mt===null||mt===void 0?void 0:mt.msCrypto)||{}}yn.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}yn.getSubtleCrypto=e;function r(){return!!i()&&!!e()}return yn.isBrowserCryptoAvailable=r,yn}var vn={},Fl;function l6(){if(Fl)return vn;Fl=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.isBrowser=vn.isNode=vn.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}vn.isReactNative=i;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}vn.isNode=e;function r(){return!i()&&!e()}return vn.isBrowser=r,vn}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=h6;e.__exportStar(f6(),i),e.__exportStar(l6(),i)})(Dp);function Op(i=3){const e=Date.now()*Math.pow(10,i),r=Math.floor(Math.random()*Math.pow(10,i));return e+r}function Pu(i=6){return BigInt(Op(i))}function Yo(i,e,r){return{id:r||Op(),jsonrpc:"2.0",method:i,params:e}}function Cu(i,e){return{id:i,jsonrpc:"2.0",result:e}}function Jo(i,e,r){return{id:i,jsonrpc:"2.0",error:d6(e,r)}}function d6(i,e){return typeof i>"u"?Rl(mp):(typeof i=="string"&&(i=Object.assign(Object.assign({},Rl(xu)),{message:i})),typeof e<"u"&&(i.data=e),c6(i.code)&&(i=u6(i.code)),i)}class p6{}class g6 extends p6{constructor(){super()}}class y6 extends g6{constructor(e){super()}}const v6="^https?:",_6="^wss?:";function b6(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Ip(i,e){const r=b6(i);return typeof r>"u"?!1:new RegExp(e).test(r)}function jl(i){return Ip(i,v6)}function Ll(i){return Ip(i,_6)}function m6(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function xp(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function Au(i){return xp(i)&&"method"in i}function Xo(i){return xp(i)&&(_n(i)||kr(i))}function _n(i){return"result"in i}function kr(i){return"error"in i}class Fn extends y6{constructor(e){super(e),this.events=new Ir.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Yo(e.method,e.params||[],e.id||Pu().toString()),r)}async requestStrict(e,r){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(d){o(d)}this.events.on(`${e.id}`,d=>{kr(d)?o(d.error):s(d.result)});try{await this.connection.send(e,r)}catch(d){o(d)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Xo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const w6=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),E6=()=>typeof window<"u",Ul=i=>i.split("?")[0],Ml=10,D6=w6();class S6{constructor(e){if(this.url=e,this.events=new Ir.EventEmitter,this.registering=!1,!Ll(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ps(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Ll(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),o(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,s)=>{const o=Dp.isReactNative()?void 0:{rejectUnauthorized:!m6(e)},d=new D6(e,[],o);E6()?d.onerror=b=>{const v=b;s(this.emitError(v.error))}:d.on("error",b=>{s(this.emitError(b))}),d.onopen=()=>{this.onOpen(d),r(d)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ou(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),o=s.message||s.toString(),d=Jo(e,o);this.events.emit("payload",d)}parseError(e,r=this.url){return Ep(e,Ul(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ml&&this.events.setMaxListeners(Ml)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Ul(this.url)}`));return this.events.emit("register_error",r),r}}var Mo={exports:{}};Mo.exports;(function(i,e){var r=200,s="__lodash_hash_undefined__",o=1,d=2,b=9007199254740991,v="[object Arguments]",w="[object Array]",C="[object AsyncFunction]",A="[object Boolean]",$="[object Date]",G="[object Error]",B="[object Function]",F="[object GeneratorFunction]",J="[object Map]",Q="[object Number]",ae="[object Null]",U="[object Object]",q="[object Promise]",T="[object Proxy]",N="[object RegExp]",S="[object Set]",u="[object String]",_="[object Symbol]",Z="[object Undefined]",c="[object WeakMap]",g="[object ArrayBuffer]",y="[object DataView]",E="[object Float32Array]",f="[object Float64Array]",l="[object Int8Array]",x="[object Int16Array]",j="[object Int32Array]",K="[object Uint8Array]",I="[object Uint8ClampedArray]",z="[object Uint16Array]",te="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,fe={};fe[E]=fe[f]=fe[l]=fe[x]=fe[j]=fe[K]=fe[I]=fe[z]=fe[te]=!0,fe[v]=fe[w]=fe[g]=fe[A]=fe[y]=fe[$]=fe[G]=fe[B]=fe[J]=fe[Q]=fe[U]=fe[N]=fe[S]=fe[u]=fe[c]=!1;var me=typeof mt=="object"&&mt&&mt.Object===Object&&mt,X=typeof self=="object"&&self&&self.Object===Object&&self,Y=me||X||Function("return this")(),H=e&&!e.nodeType&&e,p=H&&!0&&i&&!i.nodeType&&i,L=p&&p.exports===H,he=L&&me.process,pe=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),Oe=pe&&pe.isTypedArray;function ze(P,V){for(var ce=-1,ye=P==null?0:P.length,ct=0,Te=[];++ce<ye;){var dt=P[ce];V(dt,ce,P)&&(Te[ct++]=dt)}return Te}function Ve(P,V){for(var ce=-1,ye=V.length,ct=P.length;++ce<ye;)P[ct+ce]=V[ce];return P}function Ue(P,V){for(var ce=-1,ye=P==null?0:P.length;++ce<ye;)if(V(P[ce],ce,P))return!0;return!1}function gt(P,V){for(var ce=-1,ye=Array(P);++ce<P;)ye[ce]=V(ce);return ye}function yt(P){return function(V){return P(V)}}function $e(P,V){return P.has(V)}function Ie(P,V){return P==null?void 0:P[V]}function Ne(P){var V=-1,ce=Array(P.size);return P.forEach(function(ye,ct){ce[++V]=[ct,ye]}),ce}function Fe(P,V){return function(ce){return P(V(ce))}}function Be(P){var V=-1,ce=Array(P.size);return P.forEach(function(ye){ce[++V]=ye}),ce}var Pe=Array.prototype,je=Function.prototype,Se=Object.prototype,Ce=Y["__core-js_shared__"],He=je.toString,xe=Se.hasOwnProperty,ke=function(){var P=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),We=Se.toString,et=RegExp("^"+He.call(xe).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=L?Y.Buffer:void 0,Je=Y.Symbol,rr=Y.Uint8Array,lr=Se.propertyIsEnumerable,Gr=Pe.splice,nr=Je?Je.toStringTag:void 0,nn=Object.getOwnPropertySymbols,mn=tt?tt.isBuffer:void 0,Ln=Fe(Object.keys,Object),Dt=mr(Y,"DataView"),vt=mr(Y,"Map"),St=mr(Y,"Promise"),Ot=mr(Y,"Set"),wt=mr(Y,"WeakMap"),_t=mr(Object,"create"),Ut=on(Dt),Mt=on(vt),It=on(St),$t=on(Ot),xt=on(wt),Tt=Je?Je.prototype:void 0,Pt=Tt?Tt.valueOf:void 0;function ft(P){var V=-1,ce=P==null?0:P.length;for(this.clear();++V<ce;){var ye=P[V];this.set(ye[0],ye[1])}}function Bt(){this.__data__=_t?_t(null):{},this.size=0}function qt(P){var V=this.has(P)&&delete this.__data__[P];return this.size-=V?1:0,V}function ea(P){var V=this.__data__;if(_t){var ce=V[P];return ce===s?void 0:ce}return xe.call(V,P)?V[P]:void 0}function ta(P){var V=this.__data__;return _t?V[P]!==void 0:xe.call(V,P)}function ra(P,V){var ce=this.__data__;return this.size+=this.has(P)?0:1,ce[P]=_t&&V===void 0?s:V,this}ft.prototype.clear=Bt,ft.prototype.delete=qt,ft.prototype.get=ea,ft.prototype.has=ta,ft.prototype.set=ra;function Pr(P){var V=-1,ce=P==null?0:P.length;for(this.clear();++V<ce;){var ye=P[V];this.set(ye[0],ye[1])}}function na(){this.__data__=[],this.size=0}function ia(P){var V=this.__data__,ce=Un(V,P);if(ce<0)return!1;var ye=V.length-1;return ce==ye?V.pop():Gr.call(V,ce,1),--this.size,!0}function sa(P){var V=this.__data__,ce=Un(V,P);return ce<0?void 0:V[ce][1]}function oa(P){return Un(this.__data__,P)>-1}function aa(P,V){var ce=this.__data__,ye=Un(ce,P);return ye<0?(++this.size,ce.push([P,V])):ce[ye][1]=V,this}Pr.prototype.clear=na,Pr.prototype.delete=ia,Pr.prototype.get=sa,Pr.prototype.has=oa,Pr.prototype.set=aa;function sn(P){var V=-1,ce=P==null?0:P.length;for(this.clear();++V<ce;){var ye=P[V];this.set(ye[0],ye[1])}}function oi(){this.size=0,this.__data__={hash:new ft,map:new(vt||Pr),string:new ft}}function ca(P){var V=wn(this,P).delete(P);return this.size-=V?1:0,V}function ai(P){return wn(this,P).get(P)}function ua(P){return wn(this,P).has(P)}function ha(P,V){var ce=wn(this,P),ye=ce.size;return ce.set(P,V),this.size+=ce.size==ye?0:1,this}sn.prototype.clear=oi,sn.prototype.delete=ca,sn.prototype.get=ai,sn.prototype.has=ua,sn.prototype.set=ha;function ci(P){var V=-1,ce=P==null?0:P.length;for(this.__data__=new sn;++V<ce;)this.add(P[V])}function ws(P){return this.__data__.set(P,s),this}function Es(P){return this.__data__.has(P)}ci.prototype.add=ci.prototype.push=ws,ci.prototype.has=Es;function Br(P){var V=this.__data__=new Pr(P);this.size=V.size}function fa(){this.__data__=new Pr,this.size=0}function la(P){var V=this.__data__,ce=V.delete(P);return this.size=V.size,ce}function da(P){return this.__data__.get(P)}function pa(P){return this.__data__.has(P)}function Ds(P,V){var ce=this.__data__;if(ce instanceof Pr){var ye=ce.__data__;if(!vt||ye.length<r-1)return ye.push([P,V]),this.size=++ce.size,this;ce=this.__data__=new sn(ye)}return ce.set(P,V),this.size=ce.size,this}Br.prototype.clear=fa,Br.prototype.delete=la,Br.prototype.get=da,Br.prototype.has=pa,Br.prototype.set=Ds;function Ss(P,V){var ce=fi(P),ye=!ce&&Ls(P),ct=!ce&&!ye&&Ui(P),Te=!ce&&!ye&&!ct&&$s(P),dt=ce||ye||ct||Te,zt=dt?gt(P.length,String):[],Xe=zt.length;for(var ut in P)(V||xe.call(P,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Ts(ut,Xe)))&&zt.push(ut);return zt}function Un(P,V){for(var ce=P.length;ce--;)if(js(P[ce][0],V))return ce;return-1}function ji(P,V,ce){var ye=V(P);return fi(P)?ye:Ve(ye,ce(P))}function Mn(P){return P==null?P===void 0?Z:ae:nr&&nr in Object(P)?Cs(P):va(P)}function Li(P){return Bn(P)&&Mn(P)==v}function $n(P,V,ce,ye,ct){return P===V?!0:P==null||V==null||!Bn(P)&&!Bn(V)?P!==P&&V!==V:Os(P,V,ce,ye,$n,ct)}function Os(P,V,ce,ye,ct,Te){var dt=fi(P),zt=fi(V),Xe=dt?w:Wr(P),ut=zt?w:Wr(V);Xe=Xe==v?U:Xe,ut=ut==v?U:ut;var Rt=Xe==U,dr=ut==U,Ht=Xe==ut;if(Ht&&Ui(P)){if(!Ui(V))return!1;dt=!0,Rt=!1}if(Ht&&!Rt)return Te||(Te=new Br),dt||$s(P)?ui(P,V,ce,ye,ct,Te):ya(P,V,Xe,ce,ye,ct,Te);if(!(ce&o)){var pt=Rt&&xe.call(P,"__wrapped__"),ir=dr&&xe.call(V,"__wrapped__");if(pt||ir){var qr=pt?P.value():P,Cr=ir?V.value():V;return Te||(Te=new Br),ct(qr,Cr,ce,ye,Te)}}return Ht?(Te||(Te=new Br),Ps(P,V,ce,ye,ct,Te)):!1}function ga(P){if(!Ms(P)||Ns(P))return!1;var V=li(P)?et:ne;return V.test(on(P))}function Is(P){return Bn(P)&&Us(P.length)&&!!fe[Mn(P)]}function xs(P){if(!Fs(P))return Ln(P);var V=[];for(var ce in Object(P))xe.call(P,ce)&&ce!="constructor"&&V.push(ce);return V}function ui(P,V,ce,ye,ct,Te){var dt=ce&o,zt=P.length,Xe=V.length;if(zt!=Xe&&!(dt&&Xe>zt))return!1;var ut=Te.get(P);if(ut&&Te.get(V))return ut==V;var Rt=-1,dr=!0,Ht=ce&d?new ci:void 0;for(Te.set(P,V),Te.set(V,P);++Rt<zt;){var pt=P[Rt],ir=V[Rt];if(ye)var qr=dt?ye(ir,pt,Rt,V,P,Te):ye(pt,ir,Rt,P,V,Te);if(qr!==void 0){if(qr)continue;dr=!1;break}if(Ht){if(!Ue(V,function(Cr,Yr){if(!$e(Ht,Yr)&&(pt===Cr||ct(pt,Cr,ce,ye,Te)))return Ht.push(Yr)})){dr=!1;break}}else if(!(pt===ir||ct(pt,ir,ce,ye,Te))){dr=!1;break}}return Te.delete(P),Te.delete(V),dr}function ya(P,V,ce,ye,ct,Te,dt){switch(ce){case y:if(P.byteLength!=V.byteLength||P.byteOffset!=V.byteOffset)return!1;P=P.buffer,V=V.buffer;case g:return!(P.byteLength!=V.byteLength||!Te(new rr(P),new rr(V)));case A:case $:case Q:return js(+P,+V);case G:return P.name==V.name&&P.message==V.message;case N:case u:return P==V+"";case J:var zt=Ne;case S:var Xe=ye&o;if(zt||(zt=Be),P.size!=V.size&&!Xe)return!1;var ut=dt.get(P);if(ut)return ut==V;ye|=d,dt.set(P,V);var Rt=ui(zt(P),zt(V),ye,ct,Te,dt);return dt.delete(P),Rt;case _:if(Pt)return Pt.call(P)==Pt.call(V)}return!1}function Ps(P,V,ce,ye,ct,Te){var dt=ce&o,zt=hi(P),Xe=zt.length,ut=hi(V),Rt=ut.length;if(Xe!=Rt&&!dt)return!1;for(var dr=Xe;dr--;){var Ht=zt[dr];if(!(dt?Ht in V:xe.call(V,Ht)))return!1}var pt=Te.get(P);if(pt&&Te.get(V))return pt==V;var ir=!0;Te.set(P,V),Te.set(V,P);for(var qr=dt;++dr<Xe;){Ht=zt[dr];var Cr=P[Ht],Yr=V[Ht];if(ye)var Mi=dt?ye(Yr,Cr,Ht,V,P,Te):ye(Cr,Yr,Ht,P,V,Te);if(!(Mi===void 0?Cr===Yr||ct(Cr,Yr,ce,ye,Te):Mi)){ir=!1;break}qr||(qr=Ht=="constructor")}if(ir&&!qr){var qn=P.constructor,Gt=V.constructor;qn!=Gt&&"constructor"in P&&"constructor"in V&&!(typeof qn=="function"&&qn instanceof qn&&typeof Gt=="function"&&Gt instanceof Gt)&&(ir=!1)}return Te.delete(P),Te.delete(V),ir}function hi(P){return ji(P,ma,As)}function wn(P,V){var ce=P.__data__;return Rs(V)?ce[typeof V=="string"?"string":"hash"]:ce.map}function mr(P,V){var ce=Ie(P,V);return ga(ce)?ce:void 0}function Cs(P){var V=xe.call(P,nr),ce=P[nr];try{P[nr]=void 0;var ye=!0}catch{}var ct=We.call(P);return ye&&(V?P[nr]=ce:delete P[nr]),ct}var As=nn?function(P){return P==null?[]:(P=Object(P),ze(nn(P),function(V){return lr.call(P,V)}))}:at,Wr=Mn;(Dt&&Wr(new Dt(new ArrayBuffer(1)))!=y||vt&&Wr(new vt)!=J||St&&Wr(St.resolve())!=q||Ot&&Wr(new Ot)!=S||wt&&Wr(new wt)!=c)&&(Wr=function(P){var V=Mn(P),ce=V==U?P.constructor:void 0,ye=ce?on(ce):"";if(ye)switch(ye){case Ut:return y;case Mt:return J;case It:return q;case $t:return S;case xt:return c}return V});function Ts(P,V){return V=V??b,!!V&&(typeof P=="number"||ge.test(P))&&P>-1&&P%1==0&&P<V}function Rs(P){var V=typeof P;return V=="string"||V=="number"||V=="symbol"||V=="boolean"?P!=="__proto__":P===null}function Ns(P){return!!ke&&ke in P}function Fs(P){var V=P&&P.constructor,ce=typeof V=="function"&&V.prototype||Se;return P===ce}function va(P){return We.call(P)}function on(P){if(P!=null){try{return He.call(P)}catch{}try{return P+""}catch{}}return""}function js(P,V){return P===V||P!==P&&V!==V}var Ls=Li(function(){return arguments}())?Li:function(P){return Bn(P)&&xe.call(P,"callee")&&!lr.call(P,"callee")},fi=Array.isArray;function _a(P){return P!=null&&Us(P.length)&&!li(P)}var Ui=mn||st;function ba(P,V){return $n(P,V)}function li(P){if(!Ms(P))return!1;var V=Mn(P);return V==B||V==F||V==C||V==T}function Us(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=b}function Ms(P){var V=typeof P;return P!=null&&(V=="object"||V=="function")}function Bn(P){return P!=null&&typeof P=="object"}var $s=Oe?yt(Oe):Is;function ma(P){return _a(P)?Ss(P):xs(P)}function at(){return[]}function st(){return!1}i.exports=ba})(Mo,Mo.exports);var O6=Mo.exports;const I6=hu(O6);function x6(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<i.length;o++){var d=i.charAt(o),b=d.charCodeAt(0);if(r[b]!==255)throw new TypeError(d+" is ambiguous");r[b]=o}var v=i.length,w=i.charAt(0),C=Math.log(v)/Math.log(256),A=Math.log(256)/Math.log(v);function $(F){if(F instanceof Uint8Array||(ArrayBuffer.isView(F)?F=new Uint8Array(F.buffer,F.byteOffset,F.byteLength):Array.isArray(F)&&(F=Uint8Array.from(F))),!(F instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(F.length===0)return"";for(var J=0,Q=0,ae=0,U=F.length;ae!==U&&F[ae]===0;)ae++,J++;for(var q=(U-ae)*A+1>>>0,T=new Uint8Array(q);ae!==U;){for(var N=F[ae],S=0,u=q-1;(N!==0||S<Q)&&u!==-1;u--,S++)N+=256*T[u]>>>0,T[u]=N%v>>>0,N=N/v>>>0;if(N!==0)throw new Error("Non-zero carry");Q=S,ae++}for(var _=q-Q;_!==q&&T[_]===0;)_++;for(var Z=w.repeat(J);_<q;++_)Z+=i.charAt(T[_]);return Z}function G(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return new Uint8Array;var J=0;if(F[J]!==" "){for(var Q=0,ae=0;F[J]===w;)Q++,J++;for(var U=(F.length-J)*C+1>>>0,q=new Uint8Array(U);F[J];){var T=r[F.charCodeAt(J)];if(T===255)return;for(var N=0,S=U-1;(T!==0||N<ae)&&S!==-1;S--,N++)T+=v*q[S]>>>0,q[S]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");ae=N,J++}if(F[J]!==" "){for(var u=U-ae;u!==U&&q[u]===0;)u++;for(var _=new Uint8Array(Q+(U-u)),Z=Q;u!==U;)_[Z++]=q[u++];return _}}}function B(F){var J=G(F);if(J)return J;throw new Error(`Non-${e} character`)}return{encode:$,decodeUnsafe:G,decode:B}}var P6=x6,C6=P6;const Pp=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},A6=i=>new TextEncoder().encode(i),T6=i=>new TextDecoder().decode(i);class R6{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class N6{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Cp(this,e)}}class F6{constructor(e){this.decoders=e}or(e){return Cp(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Cp=(i,e)=>new F6({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class j6{constructor(e,r,s,o){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new R6(e,r,s),this.decoder=new N6(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Qo=({name:i,prefix:e,encode:r,decode:s})=>new j6(i,e,r,s),ms=({prefix:i,name:e,alphabet:r})=>{const{encode:s,decode:o}=C6(r,e);return Qo({prefix:i,name:e,encode:s,decode:d=>Pp(o(d))})},L6=(i,e,r,s)=>{const o={};for(let A=0;A<e.length;++A)o[e[A]]=A;let d=i.length;for(;i[d-1]==="=";)--d;const b=new Uint8Array(d*r/8|0);let v=0,w=0,C=0;for(let A=0;A<d;++A){const $=o[i[A]];if($===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|$,v+=r,v>=8&&(v-=8,b[C++]=255&w>>v)}if(v>=r||255&w<<8-v)throw new SyntaxError("Unexpected end of data");return b},U6=(i,e,r)=>{const s=e[e.length-1]==="=",o=(1<<r)-1;let d="",b=0,v=0;for(let w=0;w<i.length;++w)for(v=v<<8|i[w],b+=8;b>r;)b-=r,d+=e[o&v>>b];if(b&&(d+=e[o&v<<r-b]),s)for(;d.length*r&7;)d+="=";return d},Qt=({name:i,prefix:e,bitsPerChar:r,alphabet:s})=>Qo({prefix:e,name:i,encode(o){return U6(o,s,r)},decode(o){return L6(o,s,r,i)}}),M6=Qo({prefix:"\0",name:"identity",encode:i=>T6(i),decode:i=>A6(i)});var $6=Object.freeze({__proto__:null,identity:M6});const B6=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var q6=Object.freeze({__proto__:null,base2:B6});const z6=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var H6=Object.freeze({__proto__:null,base8:z6});const K6=ms({prefix:"9",name:"base10",alphabet:"0123456789"});var V6=Object.freeze({__proto__:null,base10:K6});const k6=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),G6=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var W6=Object.freeze({__proto__:null,base16:k6,base16upper:G6});const Y6=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),J6=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),X6=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Q6=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Z6=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eD=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),tD=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),rD=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nD=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var iD=Object.freeze({__proto__:null,base32:Y6,base32upper:J6,base32pad:X6,base32padupper:Q6,base32hex:Z6,base32hexupper:eD,base32hexpad:tD,base32hexpadupper:rD,base32z:nD});const sD=ms({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),oD=ms({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var aD=Object.freeze({__proto__:null,base36:sD,base36upper:oD});const cD=ms({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),uD=ms({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var hD=Object.freeze({__proto__:null,base58btc:cD,base58flickr:uD});const fD=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),lD=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dD=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pD=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var gD=Object.freeze({__proto__:null,base64:fD,base64pad:lD,base64url:dD,base64urlpad:pD});const Ap=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),yD=Ap.reduce((i,e,r)=>(i[r]=e,i),[]),vD=Ap.reduce((i,e,r)=>(i[e.codePointAt(0)]=r,i),[]);function _D(i){return i.reduce((e,r)=>(e+=yD[r],e),"")}function bD(i){const e=[];for(const r of i){const s=vD[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const mD=Qo({prefix:"🚀",name:"base256emoji",encode:_D,decode:bD});var wD=Object.freeze({__proto__:null,base256emoji:mD}),ED=Tp,$l=128,DD=127,SD=~DD,OD=Math.pow(2,31);function Tp(i,e,r){e=e||[],r=r||0;for(var s=r;i>=OD;)e[r++]=i&255|$l,i/=128;for(;i&SD;)e[r++]=i&255|$l,i>>>=7;return e[r]=i|0,Tp.bytes=r-s+1,e}var ID=ru,xD=128,Bl=127;function ru(i,s){var r=0,s=s||0,o=0,d=s,b,v=i.length;do{if(d>=v)throw ru.bytes=0,new RangeError("Could not decode varint");b=i[d++],r+=o<28?(b&Bl)<<o:(b&Bl)*Math.pow(2,o),o+=7}while(b>=xD);return ru.bytes=d-s,r}var PD=Math.pow(2,7),CD=Math.pow(2,14),AD=Math.pow(2,21),TD=Math.pow(2,28),RD=Math.pow(2,35),ND=Math.pow(2,42),FD=Math.pow(2,49),jD=Math.pow(2,56),LD=Math.pow(2,63),UD=function(i){return i<PD?1:i<CD?2:i<AD?3:i<TD?4:i<RD?5:i<ND?6:i<FD?7:i<jD?8:i<LD?9:10},MD={encode:ED,decode:ID,encodingLength:UD},Rp=MD;const ql=(i,e,r=0)=>(Rp.encode(i,e,r),e),zl=i=>Rp.encodingLength(i),nu=(i,e)=>{const r=e.byteLength,s=zl(i),o=s+zl(r),d=new Uint8Array(o+r);return ql(i,d,0),ql(r,d,s),d.set(e,o),new $D(i,r,e,d)};class $D{constructor(e,r,s,o){this.code=e,this.size=r,this.digest=s,this.bytes=o}}const Np=({name:i,code:e,encode:r})=>new BD(i,e,r);class BD{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?nu(this.code,r):r.then(s=>nu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Fp=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),qD=Np({name:"sha2-256",code:18,encode:Fp("SHA-256")}),zD=Np({name:"sha2-512",code:19,encode:Fp("SHA-512")});var HD=Object.freeze({__proto__:null,sha256:qD,sha512:zD});const jp=0,KD="identity",Lp=Pp,VD=i=>nu(jp,Lp(i)),kD={code:jp,name:KD,encode:Lp,digest:VD};var GD=Object.freeze({__proto__:null,identity:kD});new TextEncoder,new TextDecoder;const Hl={...$6,...q6,...H6,...V6,...W6,...iD,...aD,...hD,...gD,...wD};({...HD,...GD});function Up(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function WD(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Up(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function Mp(i,e,r,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:r},decoder:{decode:s}}}const Kl=Mp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),jc=Mp("ascii","a",i=>{let e="a";for(let r=0;r<i.length;r++)e+=String.fromCharCode(i[r]);return e},i=>{i=i.substring(1);const e=WD(i.length);for(let r=0;r<i.length;r++)e[r]=i.charCodeAt(r);return e}),YD={utf8:Kl,"utf-8":Kl,hex:Hl.base16,latin1:jc,ascii:jc,binary:jc,...Hl};function JD(i,e="utf8"){const r=YD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Up(globalThis.Buffer.from(i,"utf-8")):r.decoder.decode(`${r.prefix}${i}`)}const $p="wc",XD=2,Tu="core",Rn=`${$p}@2:${Tu}:`,QD={name:Tu,logger:"error"},ZD={database:":memory:"},e2="crypto",Vl="client_ed25519_seed",t2=be.ONE_DAY,r2="keychain",n2="0.3",i2="messages",s2="0.3",o2=be.SIX_HOURS,a2="publisher",Bp="irn",c2="error",qp="wss://relay.walletconnect.com",u2="relayer",At={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},h2="_subscription",as={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},f2=be.ONE_SECOND/2,l2="2.8.4",d2=1e4,p2="0.3",g2="WALLETCONNECT_CLIENT_ID",tn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},y2="subscription",v2="0.3",_2=be.FIVE_SECONDS*1e3,b2="pairing",m2="0.3",cs={wc_pairingDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:be.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:be.ONE_DAY,prompt:!1,tag:0},res:{ttl:be.ONE_DAY,prompt:!1,tag:0}}},en={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},w2="history",E2="0.3",D2="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},S2="0.3",Lc="verify-api",kl="https://verify.walletconnect.com";class O2{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=r2,this.version=n2,this.initialized=!1,this.storagePrefix=Rn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:d}=de("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(d)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,tp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class I2{constructor(e,r,s){this.core=e,this.logger=r,this.name=e2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),d=Tl(o);return bp(d.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=sE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const d=await this.getClientSeed(),b=Tl(d),v=eu();return await r6(v,o,t2,b)},this.generateSharedKey=(o,d,b)=>{this.isInitialized();const v=this.getPrivateKey(o),w=oE(v,d);return this.setSymKey(w,b)},this.setSymKey=async(o,d)=>{this.isInitialized();const b=d||aE(o);return await this.keychain.set(b,o),b},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,d,b)=>{this.isInitialized();const v=Qd(b),w=ps(d);if(ol(v)){const G=v.senderPublicKey,B=v.receiverPublicKey;o=await this.generateSharedKey(G,B)}const C=this.getSymKey(o),{type:A,senderPublicKey:$}=v;return uE({type:A,symKey:C,message:w,senderPublicKey:$})},this.decode=async(o,d,b)=>{this.isInitialized();const v=lE(d,b);if(ol(v)){const A=v.receiverPublicKey,$=v.senderPublicKey;o=await this.generateSharedKey(A,$)}const w=this.getSymKey(o),C=hE({symKey:w,encoded:d});return Ou(C)},this.getPayloadType=o=>{const d=jo(o);return vs(d.type)},this.getPayloadSenderPublicKey=o=>{const d=jo(o);return d.senderPublicKey?fr(d.senderPublicKey,hr):void 0},this.core=e,this.logger=Ze.generateChildLogger(r,this.name),this.keychain=s||new O2(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Vl)}catch{e=eu(),await this.keychain.set(Vl,e)}return JD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class x2 extends R3{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=i2,this.version=s2,this.initialized=!1,this.storagePrefix=Rn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const d=Ai(o);let b=this.messages.get(s);return typeof b>"u"&&(b={}),typeof b[d]<"u"||(b[d]=o,this.messages.set(s,b),await this.persist()),d},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const d=this.get(s),b=Ai(o);return typeof d[b]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=r}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,tp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class P2 extends N3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Ir.EventEmitter,this.name=a2,this.queue=new Map,this.publishTimeout=be.toMiliseconds(be.TEN_SECONDS),this.queueTimeout=be.toMiliseconds(be.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,d)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:d}});try{const b=(d==null?void 0:d.ttl)||o2,v=tu(d),w=(d==null?void 0:d.prompt)||!1,C=(d==null?void 0:d.tag)||0,A=(d==null?void 0:d.id)||Pu().toString(),$={topic:s,message:o,opts:{ttl:b,relay:v,prompt:w,tag:C,id:A}},G=setTimeout(()=>this.queue.set(A,$),this.queueTimeout);try{await await Lo(this.rpcPublish(s,o,b,v,w,C,A),this.publishTimeout),clearTimeout(G),this.relayer.events.emit(At.publish,$)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:d}})}catch(b){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(b),b}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ze.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,r,s,o,d,b,v){var w,C,A,$;const G={method:Ao(o.protocol).publish,params:{topic:e,message:r,ttl:s,prompt:d,tag:b},id:v};return ur((w=G.params)==null?void 0:w.prompt)&&((C=G.params)==null||delete C.prompt),ur((A=G.params)==null?void 0:A.tag)&&(($=G.params)==null||delete $.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:G}),this.relayer.request(G)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:s,opts:o}=e;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(bs.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(At.connection_stalled);return}this.checkQueue()}),this.relayer.on(At.message_ack,e=>{this.onPublish(e.id.toString())})}}class C2{constructor(){this.map=new Map,this.set=(e,r)=>{const s=this.get(e);this.exists(e,r)||this.map.set(e,[...s,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,r))return;const o=s.filter(d=>d!==r);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var A2=Object.defineProperty,T2=Object.defineProperties,R2=Object.getOwnPropertyDescriptors,Gl=Object.getOwnPropertySymbols,N2=Object.prototype.hasOwnProperty,F2=Object.prototype.propertyIsEnumerable,Wl=(i,e,r)=>e in i?A2(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,us=(i,e)=>{for(var r in e||(e={}))N2.call(e,r)&&Wl(i,r,e[r]);if(Gl)for(var r of Gl(e))F2.call(e,r)&&Wl(i,r,e[r]);return i},Uc=(i,e)=>T2(i,R2(e));class j2 extends L3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new C2,this.events=new Ir.EventEmitter,this.name=y2,this.version=v2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Rn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const d=tu(o),b={topic:s,relay:d};this.pending.set(s,b);const v=await this.rpcSubscribe(s,d);return this.onSubscribe(v,b),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),v}catch(d){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(d),d}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,d)=>{const b=new be.Watch;b.start(this.pendingSubscriptionWatchLabel);const v=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(v),b.stop(this.pendingSubscriptionWatchLabel),o(!0)),b.elapsed(this.pendingSubscriptionWatchLabel)>=_2&&(clearInterval(v),b.stop(this.pendingSubscriptionWatchLabel),d(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(r,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let s=!1;try{s=this.getSubscription(e).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,r)))}async unsubscribeById(e,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}});try{const o=tu(s);await this.rpcUnsubscribe(e,r,o);const d=jt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,d),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,r){const s={method:Ao(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Lo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(At.connection_stalled)}return Ai(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,s={method:Ao(r.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Lo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(At.connection_stalled)}}rpcUnsubscribe(e,r,s){const o={method:Ao(s.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,r){this.setSubscription(e,Uc(us({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,us({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,us({},r)),this.topicMap.set(r.topic,e),this.events.emit(tn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(tn.deleted,Uc(us({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tn.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(tn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);bn(r)&&this.onBatchSubscribe(r.map((s,o)=>Uc(us({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(bs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(At.connect,async()=>{await this.onConnect()}),this.relayer.on(At.disconnect,()=>{this.onDisconnect()}),this.events.on(tn.created,async e=>{const r=tn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(tn.deleted,async e=>{const r=tn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var L2=Object.defineProperty,Yl=Object.getOwnPropertySymbols,U2=Object.prototype.hasOwnProperty,M2=Object.prototype.propertyIsEnumerable,Jl=(i,e,r)=>e in i?L2(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,$2=(i,e)=>{for(var r in e||(e={}))U2.call(e,r)&&Jl(i,r,e[r]);if(Yl)for(var r of Yl(e))M2.call(e,r)&&Jl(i,r,e[r]);return i};class B2 extends F3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ir.EventEmitter,this.name=u2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||c2})),this.messages=new x2(this.logger,e.core),this.subscriber=new j2(this,this.logger),this.publisher=new P2(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||qp,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribted to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},d2)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,s){this.isInitialized(),await this.publisher.publish(e,r,s),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(d=>{this.subscriber.once(tn.created,b=>{b.topic===e&&d()})}),new Promise(async d=>{o=await this.subscriber.subscribe(e,r),d()})]),o)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(At.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(tn.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await Lo(this.provider.connect(),5e3,"socket stalled").catch(o=>s(o)).then(()=>r()).finally(()=>this.removeListener(At.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(At.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(At.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(as.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fn(new S6(DE({sdkVersion:l2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:s}=e;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(e){const{topic:r,message:s}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Au(e)){if(!e.method.endsWith(h2))return;const r=e.params,{topic:s,message:o,publishedAt:d}=r.data,b={topic:s,message:o,publishedAt:d};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($2({type:"event",event:r.id},b)),this.events.emit(r.id,b),await this.acknowledgePayload(e),await this.onMessageEvent(b)}else Xo(e)&&this.events.emit(At.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(At.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Cu(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(as.payload,e=>this.onProviderPayload(e)),this.provider.on(as.connect,()=>{this.events.emit(At.connect)}),this.provider.on(as.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(as.error,e=>{this.logger.error(e),this.events.emit(At.error,e)})}registerEventListeners(){this.events.on(At.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(At.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},be.toMiliseconds(f2))}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var q2=Object.defineProperty,Xl=Object.getOwnPropertySymbols,z2=Object.prototype.hasOwnProperty,H2=Object.prototype.propertyIsEnumerable,Ql=(i,e,r)=>e in i?q2(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,Zl=(i,e)=>{for(var r in e||(e={}))z2.call(e,r)&&Ql(i,r,e[r]);if(Xl)for(var r of Xl(e))H2.call(e,r)&&Ql(i,r,e[r]);return i};class Zo extends j3{constructor(e,r,s,o=Rn,d=void 0){super(e,r,s,o),this.core=e,this.logger=r,this.name=s,this.map=new Map,this.version=p2,this.cached=[],this.initialized=!1,this.storagePrefix=Rn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(b=>{this.getKey&&b!==null&&!ur(b)?this.map.set(this.getKey(b),b):kE(b)?this.map.set(b.id,b):GE(b)&&this.map.set(b.topic,b)}),this.cached=[],this.initialized=!0)},this.set=async(b,v)=>{this.isInitialized(),this.map.has(b)?await this.update(b,v):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:b,value:v}),this.map.set(b,v),await this.persist())},this.get=b=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:b}),this.getData(b)),this.getAll=b=>(this.isInitialized(),b?this.values.filter(v=>Object.keys(b).every(w=>I6(v[w],b[w]))):this.values),this.update=async(b,v)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:b,update:v});const w=Zl(Zl({},this.getData(b)),v);this.map.set(b,w),await this.persist()},this.delete=async(b,v)=>{this.isInitialized(),this.map.has(b)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:b,reason:v}),this.map.delete(b),await this.persist())},this.logger=Ze.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=d}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class K2{constructor(e,r){this.core=e,this.logger=r,this.name=b2,this.version=m2,this.events=new lu,this.initialized=!1,this.storagePrefix=Rn,this.ignoredPayloadTypes=[ni],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=eu(),o=await this.core.crypto.setSymKey(s),d=rn(be.FIVE_MINUTES),b={protocol:Bp},v={topic:o,expiry:d,relay:b,active:!1},w=LE({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:b});return await this.pairings.set(o,v),await this.core.relayer.subscribe(o),this.core.expirer.set(o,d),{topic:o,uri:w}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:d,relay:b}=NE(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const v=rn(be.FIVE_MINUTES),w={topic:o,relay:b,expiry:v,active:!1};return await this.pairings.set(o,w),await this.core.crypto.setSymKey(d,o),await this.core.relayer.subscribe(o,{relay:b}),this.core.expirer.set(o,v),s.activatePairing&&await this.activate({topic:o}),w},this.activate=async({topic:s})=>{this.isInitialized();const o=rn(be.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const d=await this.sendRequest(o,"wc_pairingPing",{}),{done:b,resolve:v,reject:w}=xi();this.events.once(Kt("pairing_ping",d),({error:C})=>{C?w(C):v()}),await b()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",jt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,d)=>{const b=Yo(o,d),v=await this.core.crypto.encode(s,b),w=cs[o].req;return this.core.history.set(s,b),this.core.relayer.publish(s,v,w),b.id},this.sendResult=async(s,o,d)=>{const b=Cu(s,d),v=await this.core.crypto.encode(o,b),w=await this.core.history.get(o,s),C=cs[w.request.method].res;await this.core.relayer.publish(o,v,C),await this.core.history.resolve(b)},this.sendError=async(s,o,d)=>{const b=Jo(s,d),v=await this.core.crypto.encode(o,b),w=await this.core.history.get(o,s),C=cs[w.request.method]?cs[w.request.method].res:cs.unregistered_method.res;await this.core.relayer.publish(o,v,C),await this.core.history.resolve(b)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,jt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Tn(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:d}=s,b=d.method;if(this.pairings.keys.includes(o))switch(b){case"wc_pairingPing":return this.onPairingPingRequest(o,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,d);default:return this.onUnknownRpcMethodRequest(o,d)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:d}=s,b=(await this.core.history.get(o,d.id)).request.method;if(this.pairings.keys.includes(o))switch(b){case"wc_pairingPing":return this.onPairingPingResponse(o,d);default:return this.onUnknownRpcMethodResponse(b)}},this.onPairingPingRequest=async(s,o)=>{const{id:d}=o;try{this.isValidPing({topic:s}),await this.sendResult(d,s,!0),this.events.emit("pairing_ping",{id:d,topic:s})}catch(b){await this.sendError(d,s,b),this.logger.error(b)}},this.onPairingPingResponse=(s,o)=>{const{id:d}=o;setTimeout(()=>{_n(o)?this.events.emit(Kt("pairing_ping",d),{}):kr(o)&&this.events.emit(Kt("pairing_ping",d),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:d}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:d,topic:s})}catch(b){await this.sendError(d,s,b),this.logger.error(b)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:d,method:b}=o;try{if(this.registeredMethods.includes(b))return;const v=jt("WC_METHOD_UNSUPPORTED",b);await this.sendError(d,s,v),this.logger.error(v)}catch(v){await this.sendError(d,s,v),this.logger.error(v)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(jt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!_r(s)){const{message:o}=de("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!VE(s.uri)){const{message:o}=de("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!_r(s)){const{message:d}=de("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(d)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!_r(s)){const{message:d}=de("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(d)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Yt(s,!1)){const{message:o}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Tn(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=de("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ze.generateChildLogger(r,this.name),this.pairings=new Zo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(At.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);Au(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Xo(o)&&(await this.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:r}=ip(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class V2 extends T3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Ir.EventEmitter,this.name=w2,this.version=E2,this.cached=[],this.initialized=!1,this.storagePrefix=Rn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:d}),this.records.has(o.id))return;const b={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:d};this.records.set(b.id,b),this.events.emit(en.created,b)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=kr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(en.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(d=>{if(d.topic===s){if(typeof o<"u"&&d.id!==o)return;this.records.delete(d.id),this.events.emit(en.deleted,d)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Yo(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(en.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(en.created,e=>{const r=en.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(en.updated,e=>{const r=en.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(en.deleted,e=>{const r=en.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class k2 extends U3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Ir.EventEmitter,this.name=D2,this.version=S2,this.cached=[],this.initialized=!1,this.storagePrefix=Rn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const d=this.formatTarget(s),b={target:d,expiry:o};this.expirations.set(d,b),this.checkExpiry(d,b),this.events.emit(Mr.created,{target:d,expiration:b})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),d=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Mr.deleted,{target:o,expiration:d})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return SE(e);if(typeof e=="number")return OE(e);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(e,r){const{expiry:s}=r;be.toMiliseconds(s)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(bs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const r=Mr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const r=Mr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const r=Mr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class G2 extends M3{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Lc,this.initialized=!1,this.init=async s=>{Zd()||!Eu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||kl,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const d=this.startAbortTimer(be.FIVE_SECONDS),b=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(d),b.status===200?(o=await b.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Lc))return s();const d=document.createElement("iframe");d.setAttribute("id",Lc),d.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),d.style.display="none",d.addEventListener("load",()=>{this.initialized=!0,s()}),d.addEventListener("error",b=>{o(b)}),document.body.append(d),this.iframe=d}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),be.toMiliseconds(be.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(r,this.name),this.verifyUrl=kl,this.abortController=new AbortController,this.isDevEnv=wu()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),be.toMiliseconds(e))}}var W2=Object.defineProperty,ed=Object.getOwnPropertySymbols,Y2=Object.prototype.hasOwnProperty,J2=Object.prototype.propertyIsEnumerable,td=(i,e,r)=>e in i?W2(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,rd=(i,e)=>{for(var r in e||(e={}))Y2.call(e,r)&&td(i,r,e[r]);if(ed)for(var r of ed(e))J2.call(e,r)&&td(i,r,e[r]);return i};let X2=class zp extends A3{constructor(e){super(e),this.protocol=$p,this.version=XD,this.name=Tu,this.events=new Ir.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||qp;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||QD.logger}));this.logger=Ze.generateChildLogger(r,this.name),this.heartbeat=new bs.HeartBeat,this.crypto=new I2(this,this.logger,e==null?void 0:e.keychain),this.history=new V2(this,this.logger),this.expirer=new k2(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new m3(rd(rd({},ZD),e==null?void 0:e.storageOptions)),this.relayer=new B2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new K2(this,this.logger),this.verify=new G2(this.projectId||"",this.logger)}static async init(e){const r=new zp(e);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(g2,s),r}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const Q2=X2,Hp="wc",Kp=2,Vp="client",Ru=`${Hp}@${Kp}:${Vp}:`,Mc={name:Vp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Z2="WALLETCONNECT_DEEPLINK_CHOICE",eS="proposal",kp="Proposal expired",tS="session",Io=be.SEVEN_DAYS,rS="engine",hs={wc_sessionPropose:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1104},res:{ttl:be.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1106},res:{ttl:be.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1112},res:{ttl:be.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1115}}},$c={min:be.FIVE_MINUTES,max:be.SEVEN_DAYS},nS="request",iS=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var sS=Object.defineProperty,oS=Object.defineProperties,aS=Object.getOwnPropertyDescriptors,nd=Object.getOwnPropertySymbols,cS=Object.prototype.hasOwnProperty,uS=Object.prototype.propertyIsEnumerable,id=(i,e,r)=>e in i?sS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,Ur=(i,e)=>{for(var r in e||(e={}))cS.call(e,r)&&id(i,r,e[r]);if(nd)for(var r of nd(e))uS.call(e,r)&&id(i,r,e[r]);return i},Bc=(i,e)=>oS(i,aS(e));class hS extends B3{constructor(e){super(e),this.name=rS,this.events=new lu,this.initialized=!1,this.ignoredPayloadTypes=[ni],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(hs)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Bc(Ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:d,optionalNamespaces:b,sessionProperties:v,relays:w}=s;let C=o,A,$=!1;if(C&&($=this.client.core.pairing.pairings.get(C).active),!C||!$){const{topic:q,uri:T}=await this.client.core.pairing.create();C=q,A=T}const G=await this.client.core.crypto.generateKeyPair(),B=Ur({requiredNamespaces:d,optionalNamespaces:b,relays:w??[{protocol:Bp}],proposer:{publicKey:G,metadata:this.client.metadata}},v&&{sessionProperties:v}),{reject:F,resolve:J,done:Q}=xi(be.FIVE_MINUTES,kp);if(this.events.once(Kt("session_connect"),async({error:q,session:T})=>{if(q)F(q);else if(T){T.self.publicKey=G;const N=Bc(Ur({},T),{requiredNamespaces:T.requiredNamespaces,optionalNamespaces:T.optionalNamespaces});await this.client.session.set(T.topic,N),await this.setExpiry(T.topic,T.expiry),C&&await this.client.core.pairing.updateMetadata({topic:C,metadata:T.peer.metadata}),J(N)}}),!C){const{message:q}=de("NO_MATCHING_KEY",`connect() pairing topic: ${C}`);throw new Error(q)}const ae=await this.sendRequest(C,"wc_sessionPropose",B),U=rn(be.FIVE_MINUTES);return await this.setProposal(ae,Ur({id:ae,expiry:U},B)),{uri:A,approval:Q}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:d,sessionProperties:b}=r,v=this.client.proposal.get(s);let{pairingTopic:w,proposer:C,requiredNamespaces:A,optionalNamespaces:$}=v;w=w||"",Ti(A)||(A=BE(d,"approve()"));const G=await this.client.core.crypto.generateKeyPair(),B=C.publicKey,F=await this.client.core.crypto.generateSharedKey(G,B);w&&s&&(await this.client.core.pairing.updateMetadata({topic:w,metadata:C.metadata}),await this.sendResult(s,w,{relay:{protocol:o??"irn"},responderPublicKey:G}),await this.client.proposal.delete(s,jt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:w}));const J=Ur({relay:{protocol:o??"irn"},namespaces:d,requiredNamespaces:A,optionalNamespaces:$,pairingTopic:w,controller:{publicKey:G,metadata:this.client.metadata},expiry:rn(Io)},b&&{sessionProperties:b});await this.client.core.relayer.subscribe(F),await this.sendRequest(F,"wc_sessionSettle",J);const Q=Bc(Ur({},J),{topic:F,pairingTopic:w,acknowledged:!1,self:J.controller,peer:{publicKey:C.publicKey,metadata:C.metadata},controller:G});return await this.client.session.set(F,Q),await this.setExpiry(F,rn(Io)),{topic:F,acknowledged:()=>new Promise(ae=>setTimeout(()=>ae(this.client.session.get(F)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:d}=this.client.proposal.get(s);d&&(await this.sendError(s,d,o),await this.client.proposal.delete(s,jt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,d=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:b,resolve:v,reject:w}=xi();return this.events.once(Kt("session_update",d),({error:C})=>{C?w(C):v()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:b}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:d,resolve:b,reject:v}=xi();return this.events.once(Kt("session_extend",o),({error:w})=>{w?v(w):b()}),await this.setExpiry(s,rn(Io)),{acknowledged:d}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:d,expiry:b}=r,v=await this.sendRequest(d,"wc_sessionRequest",{request:o,chainId:s},b),{done:w,resolve:C,reject:A}=xi(b);this.events.once(Kt("session_request",v),({error:G,result:B})=>{G?A(G):C(B)}),this.client.events.emit("session_request_sent",{topic:d,request:o,chainId:s,id:v});const $=await this.client.core.storage.getItem(Z2);return IE({id:v,topic:d,wcDeepLink:$}),await w()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:d}=o;_n(o)?await this.sendResult(d,s,o.result):kr(o)&&await this.sendError(d,s,o.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:d,resolve:b,reject:v}=xi();this.events.once(Kt("session_ping",o),({error:w})=>{w?v(w):b()}),await d()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:d}=r;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:d})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=Pu().toString();let d;const b=v=>{(v==null?void 0:v.id.toString())===o&&(this.client.core.relayer.events.removeListener(At.message_ack,b),d())};await Promise.all([new Promise(v=>{d=v,this.client.core.relayer.on(At.message_ack,b)}),this.sendRequest(s,"wc_sessionDelete",jt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>HE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(d=>{var b,v;return((b=d.peerMetadata)==null?void 0:b.url)&&((v=d.peerMetadata)==null?void 0:v.url)===r.peer.metadata.url&&d.topic&&d.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(d=>this.client.core.pairing.disconnect({topic:d.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,jt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r)},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,jt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=hs.wc_sessionRequest.req.ttl,{id:o,topic:d,params:b}=r;await this.client.pendingRequest.set(o,{id:o,topic:d,params:b}),s&&this.client.core.expirer.set(o,rn(s))},this.sendRequest=async(r,s,o,d,b)=>{const v=Yo(s,o);if(Eu()&&iS.includes(s)){const A=Ai(JSON.stringify(v));await this.client.core.verify.register({attestationId:A})}const w=await this.client.core.crypto.encode(r,v),C=hs[s].req;return d&&(C.ttl=d),b&&(C.id=b),this.client.core.history.set(r,v),this.client.core.relayer.publish(r,w,C),v.id},this.sendResult=async(r,s,o)=>{const d=Cu(r,o),b=await this.client.core.crypto.encode(s,d),v=await this.client.core.history.get(s,r),w=hs[v.request.method].res;this.client.core.relayer.publish(s,b,w),await this.client.core.history.resolve(d)},this.sendError=async(r,s,o)=>{const d=Jo(r,o),b=await this.client.core.crypto.encode(s,d),v=await this.client.core.history.get(s,r),w=hs[v.request.method].res;this.client.core.relayer.publish(s,b,w),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{Tn(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Tn(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,d=o.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,d=(await this.client.core.history.get(s,o.id)).request.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${d}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:o}=de("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:d}=s;try{this.isValidConnect(Ur({},s.params));const b=rn(be.FIVE_MINUTES),v=Ur({id:d,pairingTopic:r,expiry:b},o);await this.setProposal(d,v);const w=Ai(JSON.stringify(s)),C=await this.getVerifyContext(w,v.proposer.metadata);this.client.events.emit("session_proposal",{id:d,params:v,verifyContext:C})}catch(b){await this.sendError(d,r,b),this.client.logger.error(b)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(_n(s)){const{result:d}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:d});const b=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:b});const v=b.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:v});const w=d.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:w});const C=await this.client.core.crypto.generateSharedKey(v,w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:C});const A=await this.client.core.relayer.subscribe(C);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:A}),await this.client.core.pairing.activate({topic:r})}else kr(s)&&(await this.client.proposal.delete(o,jt("USER_DISCONNECTED")),this.events.emit(Kt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidSessionSettleRequest(d);const{relay:b,controller:v,expiry:w,namespaces:C,requiredNamespaces:A,optionalNamespaces:$,sessionProperties:G,pairingTopic:B}=s.params,F=Ur({topic:r,relay:b,expiry:w,namespaces:C,acknowledged:!0,pairingTopic:B,requiredNamespaces:A,optionalNamespaces:$,controller:v.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:v.publicKey,metadata:v.metadata}},G&&{sessionProperties:G});await this.sendResult(s.id,r,!0),this.events.emit(Kt("session_connect"),{session:F}),this.cleanupDuplicatePairings(F)}catch(b){await this.sendError(o,r,b),this.client.logger.error(b)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;_n(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Kt("session_approve",o),{})):kr(s)&&(await this.client.session.delete(r,jt("USER_DISCONNECTED")),this.events.emit(Kt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:d}=s;try{this.isValidUpdate(Ur({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult(d,r,!0),this.client.events.emit("session_update",{id:d,topic:r,params:o})}catch(b){await this.sendError(d,r,b),this.client.logger.error(b)}},this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;_n(s)?this.events.emit(Kt("session_update",o),{}):kr(s)&&this.events.emit(Kt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,rn(Io)),await this.sendResult(o,r,!0),this.client.events.emit("session_extend",{id:o,topic:r})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;_n(s)?this.events.emit(Kt("session_extend",o),{}):kr(s)&&this.events.emit(Kt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.client.events.emit("session_ping",{id:o,topic:r})}catch(d){await this.sendError(o,r,d),this.client.logger.error(d)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{_n(s)?this.events.emit(Kt("session_ping",o),{}):kr(s)&&this.events.emit(Kt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(d=>{this.client.core.relayer.once(At.publish,async()=>{d(await this.deleteSession(r))})}),this.sendResult(o,r,!0)]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(d){this.client.logger.error(d)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidRequest(Ur({topic:r},d)),await this.setPendingSessionRequest({id:o,topic:r,params:d});const b=Ai(JSON.stringify(s)),v=this.client.session.get(r),w=await this.getVerifyContext(b,v.peer.metadata);this.client.events.emit("session_request",{id:o,topic:r,params:d,verifyContext:w})}catch(b){await this.sendError(o,r,b),this.client.logger.error(b)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;_n(s)?this.events.emit(Kt("session_request",o),{result:s.result}):kr(s)&&this.events.emit(Kt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:d}=s;try{this.isValidEmit(Ur({topic:r},d)),this.client.events.emit("session_event",{id:o,topic:r,params:d})}catch(b){await this.sendError(o,r,b),this.client.logger.error(b)}},this.isValidConnect=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(w)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:d,sessionProperties:b,relays:v}=r;if(ur(s)||await this.isValidPairingTopic(s),!t3(v,!0)){const{message:w}=de("MISSING_OR_INVALID",`connect() relays: ${v}`);throw new Error(w)}!ur(o)&&Ti(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ur(d)&&Ti(d)!==0&&this.validateNamespaces(d,"optionalNamespaces"),ur(b)||this.validateSessionProps(b,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=e3(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!_r(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:d,sessionProperties:b}=r;await this.isValidProposalId(s);const v=this.client.proposal.get(s),w=Ro(o,"approve()");if(w)throw new Error(w.message);const C=pl(v.requiredNamespaces,o,"approve()");if(C)throw new Error(C.message);if(!Yt(d,!0)){const{message:A}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${d}`);throw new Error(A)}ur(b)||this.validateSessionProps(b,"sessionProperties")},this.isValidReject=async r=>{if(!_r(r)){const{message:d}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(d)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!n3(o)){const{message:d}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidSessionSettleRequest=r=>{if(!_r(r)){const{message:C}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(C)}const{relay:s,controller:o,namespaces:d,expiry:b}=r;if(!ap(s)){const{message:C}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(C)}const v=WE(o,"onSessionSettleRequest()");if(v)throw new Error(v.message);const w=Ro(d,"onSessionSettleRequest()");if(w)throw new Error(w.message);if(Tn(b)){const{message:C}=de("EXPIRED","onSessionSettleRequest()");throw new Error(C)}},this.isValidUpdate=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(w)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const d=this.client.session.get(s),b=Ro(o,"update()");if(b)throw new Error(b.message);const v=pl(d.requiredNamespaces,o,"update()");if(v)throw new Error(v.message)},this.isValidExtend=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(w)}const{topic:s,request:o,chainId:d,expiry:b}=r;await this.isValidSessionTopic(s);const{namespaces:v}=this.client.session.get(s);if(!dl(v,d)){const{message:w}=de("MISSING_OR_INVALID",`request() chainId: ${d}`);throw new Error(w)}if(!i3(o)){const{message:w}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(w)}if(!a3(v,d,o.method)){const{message:w}=de("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(w)}if(b&&!f3(b,$c)){const{message:w}=de("MISSING_OR_INVALID",`request() expiry: ${b}. Expiry must be a number (in seconds) between ${$c.min} and ${$c.max}`);throw new Error(w)}},this.isValidRespond=async r=>{if(!_r(r)){const{message:d}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(d)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!s3(o)){const{message:d}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidPing=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!_r(r)){const{message:v}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(v)}const{topic:s,event:o,chainId:d}=r;await this.isValidSessionTopic(s);const{namespaces:b}=this.client.session.get(s);if(!dl(b,d)){const{message:v}=de("MISSING_OR_INVALID",`emit() chainId: ${d}`);throw new Error(v)}if(!o3(o)){const{message:v}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(v)}if(!c3(b,d,o.name)){const{message:v}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(v)}},this.isValidDisconnect=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const d=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});d&&(o.verified.origin=d,o.verified.validation=d===s.url?"VALID":"INVALID")}catch(d){this.client.logger.error(d)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!Yt(o,!1)){const{message:d}=de("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(d)}})}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(At.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);Au(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Xo(o)?(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o})):this.onRelayEventUnknownPayload({topic:r,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:r,id:s}=ip(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Yt(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Tn(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Yt(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Tn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=de("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Yt(e,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!r3(e)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Tn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=de("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class fS extends Zo{constructor(e,r){super(e,r,eS,Ru),this.core=e,this.logger=r}}class lS extends Zo{constructor(e,r){super(e,r,tS,Ru),this.core=e,this.logger=r}}class dS extends Zo{constructor(e,r){super(e,r,nS,Ru,s=>s.id),this.core=e,this.logger=r}}class Nu extends $3{constructor(e){super(e),this.protocol=Hp,this.version=Kp,this.name=Mc.name,this.events=new Ir.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||Mc.name,this.metadata=(e==null?void 0:e.metadata)||bE();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Mc.logger}));this.core=(e==null?void 0:e.core)||new Q2(e),this.logger=Ze.generateChildLogger(r,this.name),this.session=new lS(this.core,this.logger),this.proposal=new fS(this.core,this.logger),this.pendingRequest=new dS(this.core,this.logger),this.engine=new hS(this)}static async init(e){const r=new Nu(e);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var iu={exports:{}};(function(i,e){var r=typeof self<"u"?self:mt,s=function(){function d(){this.fetch=!1,this.DOMException=r.DOMException}return d.prototype=r,new d}();(function(d){(function(b){var v={searchParams:"URLSearchParams"in d,iterable:"Symbol"in d&&"iterator"in Symbol,blob:"FileReader"in d&&"Blob"in d&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in d,arrayBuffer:"ArrayBuffer"in d};function w(f){return f&&DataView.prototype.isPrototypeOf(f)}if(v.arrayBuffer)var C=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],A=ArrayBuffer.isView||function(f){return f&&C.indexOf(Object.prototype.toString.call(f))>-1};function $(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))throw new TypeError("Invalid character in header field name");return f.toLowerCase()}function G(f){return typeof f!="string"&&(f=String(f)),f}function B(f){var l={next:function(){var x=f.shift();return{done:x===void 0,value:x}}};return v.iterable&&(l[Symbol.iterator]=function(){return l}),l}function F(f){this.map={},f instanceof F?f.forEach(function(l,x){this.append(x,l)},this):Array.isArray(f)?f.forEach(function(l){this.append(l[0],l[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(l){this.append(l,f[l])},this)}F.prototype.append=function(f,l){f=$(f),l=G(l);var x=this.map[f];this.map[f]=x?x+", "+l:l},F.prototype.delete=function(f){delete this.map[$(f)]},F.prototype.get=function(f){return f=$(f),this.has(f)?this.map[f]:null},F.prototype.has=function(f){return this.map.hasOwnProperty($(f))},F.prototype.set=function(f,l){this.map[$(f)]=G(l)},F.prototype.forEach=function(f,l){for(var x in this.map)this.map.hasOwnProperty(x)&&f.call(l,this.map[x],x,this)},F.prototype.keys=function(){var f=[];return this.forEach(function(l,x){f.push(x)}),B(f)},F.prototype.values=function(){var f=[];return this.forEach(function(l){f.push(l)}),B(f)},F.prototype.entries=function(){var f=[];return this.forEach(function(l,x){f.push([x,l])}),B(f)},v.iterable&&(F.prototype[Symbol.iterator]=F.prototype.entries);function J(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function Q(f){return new Promise(function(l,x){f.onload=function(){l(f.result)},f.onerror=function(){x(f.error)}})}function ae(f){var l=new FileReader,x=Q(l);return l.readAsArrayBuffer(f),x}function U(f){var l=new FileReader,x=Q(l);return l.readAsText(f),x}function q(f){for(var l=new Uint8Array(f),x=new Array(l.length),j=0;j<l.length;j++)x[j]=String.fromCharCode(l[j]);return x.join("")}function T(f){if(f.slice)return f.slice(0);var l=new Uint8Array(f.byteLength);return l.set(new Uint8Array(f)),l.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(f){this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:v.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:v.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:v.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():v.arrayBuffer&&v.blob&&w(f)?(this._bodyArrayBuffer=T(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):v.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||A(f))?this._bodyArrayBuffer=T(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var f=J(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?J(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}),this.text=function(){var f=J(this);if(f)return f;if(this._bodyBlob)return U(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(q(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(Z)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(f){var l=f.toUpperCase();return S.indexOf(l)>-1?l:f}function _(f,l){l=l||{};var x=l.body;if(f instanceof _){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,l.headers||(this.headers=new F(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!x&&f._bodyInit!=null&&(x=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=l.credentials||this.credentials||"same-origin",(l.headers||!this.headers)&&(this.headers=new F(l.headers)),this.method=u(l.method||this.method||"GET"),this.mode=l.mode||this.mode||null,this.signal=l.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(x)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function Z(f){var l=new FormData;return f.trim().split("&").forEach(function(x){if(x){var j=x.split("="),K=j.shift().replace(/\+/g," "),I=j.join("=").replace(/\+/g," ");l.append(decodeURIComponent(K),decodeURIComponent(I))}}),l}function c(f){var l=new F,x=f.replace(/\r?\n[\t ]+/g," ");return x.split(/\r?\n/).forEach(function(j){var K=j.split(":"),I=K.shift().trim();if(I){var z=K.join(":").trim();l.append(I,z)}}),l}N.call(_.prototype);function g(f,l){l||(l={}),this.type="default",this.status=l.status===void 0?200:l.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in l?l.statusText:"OK",this.headers=new F(l.headers),this.url=l.url||"",this._initBody(f)}N.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new F(this.headers),url:this.url})},g.error=function(){var f=new g(null,{status:0,statusText:""});return f.type="error",f};var y=[301,302,303,307,308];g.redirect=function(f,l){if(y.indexOf(l)===-1)throw new RangeError("Invalid status code");return new g(null,{status:l,headers:{location:f}})},b.DOMException=d.DOMException;try{new b.DOMException}catch{b.DOMException=function(l,x){this.message=l,this.name=x;var j=Error(l);this.stack=j.stack},b.DOMException.prototype=Object.create(Error.prototype),b.DOMException.prototype.constructor=b.DOMException}function E(f,l){return new Promise(function(x,j){var K=new _(f,l);if(K.signal&&K.signal.aborted)return j(new b.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function z(){I.abort()}I.onload=function(){var te={status:I.status,statusText:I.statusText,headers:c(I.getAllResponseHeaders()||"")};te.url="responseURL"in I?I.responseURL:te.headers.get("X-Request-URL");var re="response"in I?I.response:I.responseText;x(new g(re,te))},I.onerror=function(){j(new TypeError("Network request failed"))},I.ontimeout=function(){j(new TypeError("Network request failed"))},I.onabort=function(){j(new b.DOMException("Aborted","AbortError"))},I.open(K.method,K.url,!0),K.credentials==="include"?I.withCredentials=!0:K.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&v.blob&&(I.responseType="blob"),K.headers.forEach(function(te,re){I.setRequestHeader(re,te)}),K.signal&&(K.signal.addEventListener("abort",z),I.onreadystatechange=function(){I.readyState===4&&K.signal.removeEventListener("abort",z)}),I.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return E.polyfill=!0,d.fetch||(d.fetch=E,d.Headers=F,d.Request=_,d.Response=g),b.Headers=F,b.Request=_,b.Response=g,b.fetch=E,Object.defineProperty(b,"__esModule",{value:!0}),b})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(iu,iu.exports);var pS=iu.exports;const sd=hu(pS),gS={Accept:"application/json","Content-Type":"application/json"},yS="POST",od={headers:gS,method:yS},ad=10;class si{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Ir.EventEmitter,this.isAvailable=!1,this.registering=!1,!jl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const s=ps(e),d=await(await sd(this.url,Object.assign(Object.assign({},od),{body:s}))).json();this.onPayload({data:d})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!jl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),o(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=ps({id:1,jsonrpc:"2.0",method:"test",params:[]});await sd(e,Object.assign(Object.assign({},od),{body:r}))}this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ou(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),o=s.message||s.toString(),d=Jo(e,o);this.events.emit("payload",d)}parseError(e,r=this.url){return Ep(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>ad&&this.events.setMaxListeners(ad)}}const cd="error",vS="wss://relay.walletconnect.com",_S="wc",bS="universal_provider",ud=`${_S}@2:${bS}:`,mS="https://rpc.walletconnect.com/v1",jn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},su={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var r,s="4.17.21",o=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",b="Expected a function",v="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",C=500,A="__lodash_placeholder__",$=1,G=2,B=4,F=1,J=2,Q=1,ae=2,U=4,q=8,T=16,N=32,S=64,u=128,_=256,Z=512,c=30,g="...",y=800,E=16,f=1,l=2,x=3,j=1/0,K=9007199254740991,I=17976931348623157e292,z=0/0,te=4294967295,re=te-1,ne=te>>>1,ge=[["ary",u],["bind",Q],["bindKey",ae],["curry",q],["curryRight",T],["flip",Z],["partial",N],["partialRight",S],["rearg",_]],fe="[object Arguments]",me="[object Array]",X="[object AsyncFunction]",Y="[object Boolean]",H="[object Date]",p="[object DOMException]",L="[object Error]",he="[object Function]",pe="[object GeneratorFunction]",Oe="[object Map]",ze="[object Number]",Ve="[object Null]",Ue="[object Object]",gt="[object Promise]",yt="[object Proxy]",$e="[object RegExp]",Ie="[object Set]",Ne="[object String]",Fe="[object Symbol]",Be="[object Undefined]",Pe="[object WeakMap]",je="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",He="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",rr="[object Uint16Array]",lr="[object Uint32Array]",Gr=/\b__p \+= '';/g,nr=/\b(__p \+=) '' \+/g,nn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mn=/&(?:amp|lt|gt|quot|#39);/g,Ln=/[&<>"']/g,Dt=RegExp(mn.source),vt=RegExp(Ln.source),St=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,$t=RegExp(It.source),xt=/^\s+/,Tt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ft=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ea=/[()=,{}\[\]\/\s]/,ta=/\\(\\)?/g,ra=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pr=/\w*$/,na=/^[-+]0x[0-9a-f]+$/i,ia=/^0b[01]+$/i,sa=/^\[object .+?Constructor\]$/,oa=/^0o[0-7]+$/i,aa=/^(?:0|[1-9]\d*)$/,sn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oi=/($^)/,ca=/['\n\r\u2028\u2029\\]/g,ai="\\ud800-\\udfff",ua="\\u0300-\\u036f",ha="\\ufe20-\\ufe2f",ci="\\u20d0-\\u20ff",ws=ua+ha+ci,Es="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",fa="\\xac\\xb1\\xd7\\xf7",la="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",da="\\u2000-\\u206f",pa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ds="A-Z\\xc0-\\xd6\\xd8-\\xde",Ss="\\ufe0e\\ufe0f",Un=fa+la+da+pa,ji="['’]",Mn="["+ai+"]",Li="["+Un+"]",$n="["+ws+"]",Os="\\d+",ga="["+Es+"]",Is="["+Br+"]",xs="[^"+ai+Un+Os+Es+Br+Ds+"]",ui="\\ud83c[\\udffb-\\udfff]",ya="(?:"+$n+"|"+ui+")",Ps="[^"+ai+"]",hi="(?:\\ud83c[\\udde6-\\uddff]){2}",wn="[\\ud800-\\udbff][\\udc00-\\udfff]",mr="["+Ds+"]",Cs="\\u200d",As="(?:"+Is+"|"+xs+")",Wr="(?:"+mr+"|"+xs+")",Ts="(?:"+ji+"(?:d|ll|m|re|s|t|ve))?",Rs="(?:"+ji+"(?:D|LL|M|RE|S|T|VE))?",Ns=ya+"?",Fs="["+Ss+"]?",va="(?:"+Cs+"(?:"+[Ps,hi,wn].join("|")+")"+Fs+Ns+")*",on="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",js="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ls=Fs+Ns+va,fi="(?:"+[ga,hi,wn].join("|")+")"+Ls,_a="(?:"+[Ps+$n+"?",$n,hi,wn,Mn].join("|")+")",Ui=RegExp(ji,"g"),ba=RegExp($n,"g"),li=RegExp(ui+"(?="+ui+")|"+_a+Ls,"g"),Us=RegExp([mr+"?"+Is+"+"+Ts+"(?="+[Li,mr,"$"].join("|")+")",Wr+"+"+Rs+"(?="+[Li,mr+As,"$"].join("|")+")",mr+"?"+As+"+"+Ts,mr+"+"+Rs,js,on,Os,fi].join("|"),"g"),Ms=RegExp("["+Cs+ai+ws+Ss+"]"),Bn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$s=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ma=-1,at={};at[He]=at[xe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[rr]=at[lr]=!0,at[fe]=at[me]=at[Se]=at[Y]=at[Ce]=at[H]=at[L]=at[he]=at[Oe]=at[ze]=at[Ue]=at[$e]=at[Ie]=at[Ne]=at[Pe]=!1;var st={};st[fe]=st[me]=st[Se]=st[Ce]=st[Y]=st[H]=st[He]=st[xe]=st[ke]=st[We]=st[et]=st[Oe]=st[ze]=st[Ue]=st[$e]=st[Ie]=st[Ne]=st[Fe]=st[tt]=st[Je]=st[rr]=st[lr]=!0,st[L]=st[he]=st[Pe]=!1;var P={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ye={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,dt=typeof fs=="object"&&fs&&fs.Object===Object&&fs,zt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||zt||Function("return this")(),ut=e&&!e.nodeType&&e,Rt=ut&&!0&&i&&!i.nodeType&&i,dr=Rt&&Rt.exports===ut,Ht=dr&&dt.process,pt=function(){try{var k=Rt&&Rt.require&&Rt.require("util").types;return k||Ht&&Ht.binding&&Ht.binding("util")}catch{}}(),ir=pt&&pt.isArrayBuffer,qr=pt&&pt.isDate,Cr=pt&&pt.isMap,Yr=pt&&pt.isRegExp,Mi=pt&&pt.isSet,qn=pt&&pt.isTypedArray;function Gt(k,ie,ee){switch(ee.length){case 0:return k.call(ie);case 1:return k.call(ie,ee[0]);case 2:return k.call(ie,ee[0],ee[1]);case 3:return k.call(ie,ee[0],ee[1],ee[2])}return k.apply(ie,ee)}function Wp(k,ie,ee,ve){for(var Ae=-1,rt=k==null?0:k.length;++Ae<rt;){var Vt=k[Ae];ie(ve,Vt,ee(Vt),k)}return ve}function Ar(k,ie){for(var ee=-1,ve=k==null?0:k.length;++ee<ve&&ie(k[ee],ee,k)!==!1;);return k}function Yp(k,ie){for(var ee=k==null?0:k.length;ee--&&ie(k[ee],ee,k)!==!1;);return k}function Lu(k,ie){for(var ee=-1,ve=k==null?0:k.length;++ee<ve;)if(!ie(k[ee],ee,k))return!1;return!0}function En(k,ie){for(var ee=-1,ve=k==null?0:k.length,Ae=0,rt=[];++ee<ve;){var Vt=k[ee];ie(Vt,ee,k)&&(rt[Ae++]=Vt)}return rt}function Bs(k,ie){var ee=k==null?0:k.length;return!!ee&&di(k,ie,0)>-1}function wa(k,ie,ee){for(var ve=-1,Ae=k==null?0:k.length;++ve<Ae;)if(ee(ie,k[ve]))return!0;return!1}function bt(k,ie){for(var ee=-1,ve=k==null?0:k.length,Ae=Array(ve);++ee<ve;)Ae[ee]=ie(k[ee],ee,k);return Ae}function Dn(k,ie){for(var ee=-1,ve=ie.length,Ae=k.length;++ee<ve;)k[Ae+ee]=ie[ee];return k}function Ea(k,ie,ee,ve){var Ae=-1,rt=k==null?0:k.length;for(ve&&rt&&(ee=k[++Ae]);++Ae<rt;)ee=ie(ee,k[Ae],Ae,k);return ee}function Jp(k,ie,ee,ve){var Ae=k==null?0:k.length;for(ve&&Ae&&(ee=k[--Ae]);Ae--;)ee=ie(ee,k[Ae],Ae,k);return ee}function Da(k,ie){for(var ee=-1,ve=k==null?0:k.length;++ee<ve;)if(ie(k[ee],ee,k))return!0;return!1}var Xp=Sa("length");function Qp(k){return k.split("")}function Zp(k){return k.match(qt)||[]}function Uu(k,ie,ee){var ve;return ee(k,function(Ae,rt,Vt){if(ie(Ae,rt,Vt))return ve=rt,!1}),ve}function qs(k,ie,ee,ve){for(var Ae=k.length,rt=ee+(ve?1:-1);ve?rt--:++rt<Ae;)if(ie(k[rt],rt,k))return rt;return-1}function di(k,ie,ee){return ie===ie?fg(k,ie,ee):qs(k,Mu,ee)}function eg(k,ie,ee,ve){for(var Ae=ee-1,rt=k.length;++Ae<rt;)if(ve(k[Ae],ie))return Ae;return-1}function Mu(k){return k!==k}function $u(k,ie){var ee=k==null?0:k.length;return ee?Ia(k,ie)/ee:z}function Sa(k){return function(ie){return ie==null?r:ie[k]}}function Oa(k){return function(ie){return k==null?r:k[ie]}}function Bu(k,ie,ee,ve,Ae){return Ae(k,function(rt,Vt,ht){ee=ve?(ve=!1,rt):ie(ee,rt,Vt,ht)}),ee}function tg(k,ie){var ee=k.length;for(k.sort(ie);ee--;)k[ee]=k[ee].value;return k}function Ia(k,ie){for(var ee,ve=-1,Ae=k.length;++ve<Ae;){var rt=ie(k[ve]);rt!==r&&(ee=ee===r?rt:ee+rt)}return ee}function xa(k,ie){for(var ee=-1,ve=Array(k);++ee<k;)ve[ee]=ie(ee);return ve}function rg(k,ie){return bt(ie,function(ee){return[ee,k[ee]]})}function qu(k){return k&&k.slice(0,Vu(k)+1).replace(xt,"")}function wr(k){return function(ie){return k(ie)}}function Pa(k,ie){return bt(ie,function(ee){return k[ee]})}function $i(k,ie){return k.has(ie)}function zu(k,ie){for(var ee=-1,ve=k.length;++ee<ve&&di(ie,k[ee],0)>-1;);return ee}function Hu(k,ie){for(var ee=k.length;ee--&&di(ie,k[ee],0)>-1;);return ee}function ng(k,ie){for(var ee=k.length,ve=0;ee--;)k[ee]===ie&&++ve;return ve}var ig=Oa(P),sg=Oa(V);function og(k){return"\\"+ye[k]}function ag(k,ie){return k==null?r:k[ie]}function pi(k){return Ms.test(k)}function cg(k){return Bn.test(k)}function ug(k){for(var ie,ee=[];!(ie=k.next()).done;)ee.push(ie.value);return ee}function Ca(k){var ie=-1,ee=Array(k.size);return k.forEach(function(ve,Ae){ee[++ie]=[Ae,ve]}),ee}function Ku(k,ie){return function(ee){return k(ie(ee))}}function Sn(k,ie){for(var ee=-1,ve=k.length,Ae=0,rt=[];++ee<ve;){var Vt=k[ee];(Vt===ie||Vt===A)&&(k[ee]=A,rt[Ae++]=ee)}return rt}function zs(k){var ie=-1,ee=Array(k.size);return k.forEach(function(ve){ee[++ie]=ve}),ee}function hg(k){var ie=-1,ee=Array(k.size);return k.forEach(function(ve){ee[++ie]=[ve,ve]}),ee}function fg(k,ie,ee){for(var ve=ee-1,Ae=k.length;++ve<Ae;)if(k[ve]===ie)return ve;return-1}function lg(k,ie,ee){for(var ve=ee+1;ve--;)if(k[ve]===ie)return ve;return ve}function gi(k){return pi(k)?pg(k):Xp(k)}function zr(k){return pi(k)?gg(k):Qp(k)}function Vu(k){for(var ie=k.length;ie--&&Tt.test(k.charAt(ie)););return ie}var dg=Oa(ce);function pg(k){for(var ie=li.lastIndex=0;li.test(k);)++ie;return ie}function gg(k){return k.match(li)||[]}function yg(k){return k.match(Us)||[]}var vg=function k(ie){ie=ie==null?Xe:yi.defaults(Xe.Object(),ie,yi.pick(Xe,$s));var ee=ie.Array,ve=ie.Date,Ae=ie.Error,rt=ie.Function,Vt=ie.Math,ht=ie.Object,Aa=ie.RegExp,_g=ie.String,Tr=ie.TypeError,Hs=ee.prototype,bg=rt.prototype,vi=ht.prototype,Ks=ie["__core-js_shared__"],Vs=bg.toString,it=vi.hasOwnProperty,mg=0,ku=function(){var t=/[^.]+$/.exec(Ks&&Ks.keys&&Ks.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ks=vi.toString,wg=Vs.call(ht),Eg=Xe._,Dg=Aa("^"+Vs.call(it).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gs=dr?ie.Buffer:r,On=ie.Symbol,Ws=ie.Uint8Array,Gu=Gs?Gs.allocUnsafe:r,Ys=Ku(ht.getPrototypeOf,ht),Wu=ht.create,Yu=vi.propertyIsEnumerable,Js=Hs.splice,Ju=On?On.isConcatSpreadable:r,Bi=On?On.iterator:r,zn=On?On.toStringTag:r,Xs=function(){try{var t=Gn(ht,"defineProperty");return t({},"",{}),t}catch{}}(),Sg=ie.clearTimeout!==Xe.clearTimeout&&ie.clearTimeout,Og=ve&&ve.now!==Xe.Date.now&&ve.now,Ig=ie.setTimeout!==Xe.setTimeout&&ie.setTimeout,Qs=Vt.ceil,Zs=Vt.floor,Ta=ht.getOwnPropertySymbols,xg=Gs?Gs.isBuffer:r,Xu=ie.isFinite,Pg=Hs.join,Cg=Ku(ht.keys,ht),kt=Vt.max,Zt=Vt.min,Ag=ve.now,Tg=ie.parseInt,Qu=Vt.random,Rg=Hs.reverse,Ra=Gn(ie,"DataView"),qi=Gn(ie,"Map"),Na=Gn(ie,"Promise"),_i=Gn(ie,"Set"),zi=Gn(ie,"WeakMap"),Hi=Gn(ht,"create"),eo=zi&&new zi,bi={},Ng=Wn(Ra),Fg=Wn(qi),jg=Wn(Na),Lg=Wn(_i),Ug=Wn(zi),to=On?On.prototype:r,Ki=to?to.valueOf:r,Zu=to?to.toString:r;function D(t){if(Ct(t)&&!Re(t)&&!(t instanceof Ye)){if(t instanceof Rr)return t;if(it.call(t,"__wrapped__"))return ef(t)}return new Rr(t)}var mi=function(){function t(){}return function(n){if(!Et(n))return{};if(Wu)return Wu(n);t.prototype=n;var a=new t;return t.prototype=r,a}}();function ro(){}function Rr(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}D.templateSettings={escape:St,evaluate:Ot,interpolate:wt,variable:"",imports:{_:D}},D.prototype=ro.prototype,D.prototype.constructor=D,Rr.prototype=mi(ro.prototype),Rr.prototype.constructor=Rr;function Ye(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Mg(){var t=new Ye(this.__wrapped__);return t.__actions__=pr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=pr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=pr(this.__views__),t}function $g(){if(this.__filtered__){var t=new Ye(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Bg(){var t=this.__wrapped__.value(),n=this.__dir__,a=Re(t),h=n<0,m=a?t.length:0,O=Q0(0,m,this.__views__),R=O.start,M=O.end,W=M-R,se=h?M:R-1,oe=this.__iteratees__,ue=oe.length,le=0,_e=Zt(W,this.__takeCount__);if(!a||!h&&m==W&&_e==W)return Dh(t,this.__actions__);var Ee=[];e:for(;W--&&le<_e;){se+=n;for(var qe=-1,De=t[se];++qe<ue;){var Ge=oe[qe],Qe=Ge.iteratee,Sr=Ge.type,ar=Qe(De);if(Sr==l)De=ar;else if(!ar){if(Sr==f)continue e;break e}}Ee[le++]=De}return Ee}Ye.prototype=mi(ro.prototype),Ye.prototype.constructor=Ye;function Hn(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}function qg(){this.__data__=Hi?Hi(null):{},this.size=0}function zg(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function Hg(t){var n=this.__data__;if(Hi){var a=n[t];return a===w?r:a}return it.call(n,t)?n[t]:r}function Kg(t){var n=this.__data__;return Hi?n[t]!==r:it.call(n,t)}function Vg(t,n){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Hi&&n===r?w:n,this}Hn.prototype.clear=qg,Hn.prototype.delete=zg,Hn.prototype.get=Hg,Hn.prototype.has=Kg,Hn.prototype.set=Vg;function an(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}function kg(){this.__data__=[],this.size=0}function Gg(t){var n=this.__data__,a=no(n,t);if(a<0)return!1;var h=n.length-1;return a==h?n.pop():Js.call(n,a,1),--this.size,!0}function Wg(t){var n=this.__data__,a=no(n,t);return a<0?r:n[a][1]}function Yg(t){return no(this.__data__,t)>-1}function Jg(t,n){var a=this.__data__,h=no(a,t);return h<0?(++this.size,a.push([t,n])):a[h][1]=n,this}an.prototype.clear=kg,an.prototype.delete=Gg,an.prototype.get=Wg,an.prototype.has=Yg,an.prototype.set=Jg;function cn(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var h=t[n];this.set(h[0],h[1])}}function Xg(){this.size=0,this.__data__={hash:new Hn,map:new(qi||an),string:new Hn}}function Qg(t){var n=yo(this,t).delete(t);return this.size-=n?1:0,n}function Zg(t){return yo(this,t).get(t)}function e0(t){return yo(this,t).has(t)}function t0(t,n){var a=yo(this,t),h=a.size;return a.set(t,n),this.size+=a.size==h?0:1,this}cn.prototype.clear=Xg,cn.prototype.delete=Qg,cn.prototype.get=Zg,cn.prototype.has=e0,cn.prototype.set=t0;function Kn(t){var n=-1,a=t==null?0:t.length;for(this.__data__=new cn;++n<a;)this.add(t[n])}function r0(t){return this.__data__.set(t,w),this}function n0(t){return this.__data__.has(t)}Kn.prototype.add=Kn.prototype.push=r0,Kn.prototype.has=n0;function Hr(t){var n=this.__data__=new an(t);this.size=n.size}function i0(){this.__data__=new an,this.size=0}function s0(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}function o0(t){return this.__data__.get(t)}function a0(t){return this.__data__.has(t)}function c0(t,n){var a=this.__data__;if(a instanceof an){var h=a.__data__;if(!qi||h.length<o-1)return h.push([t,n]),this.size=++a.size,this;a=this.__data__=new cn(h)}return a.set(t,n),this.size=a.size,this}Hr.prototype.clear=i0,Hr.prototype.delete=s0,Hr.prototype.get=o0,Hr.prototype.has=a0,Hr.prototype.set=c0;function eh(t,n){var a=Re(t),h=!a&&Yn(t),m=!a&&!h&&An(t),O=!a&&!h&&!m&&Si(t),R=a||h||m||O,M=R?xa(t.length,_g):[],W=M.length;for(var se in t)(n||it.call(t,se))&&!(R&&(se=="length"||m&&(se=="offset"||se=="parent")||O&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||ln(se,W)))&&M.push(se);return M}function th(t){var n=t.length;return n?t[Ka(0,n-1)]:r}function u0(t,n){return vo(pr(t),Vn(n,0,t.length))}function h0(t){return vo(pr(t))}function Fa(t,n,a){(a!==r&&!Kr(t[n],a)||a===r&&!(n in t))&&un(t,n,a)}function Vi(t,n,a){var h=t[n];(!(it.call(t,n)&&Kr(h,a))||a===r&&!(n in t))&&un(t,n,a)}function no(t,n){for(var a=t.length;a--;)if(Kr(t[a][0],n))return a;return-1}function f0(t,n,a,h){return In(t,function(m,O,R){n(h,m,a(m),R)}),h}function rh(t,n){return t&&Xr(n,Wt(n),t)}function l0(t,n){return t&&Xr(n,yr(n),t)}function un(t,n,a){n=="__proto__"&&Xs?Xs(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}function ja(t,n){for(var a=-1,h=n.length,m=ee(h),O=t==null;++a<h;)m[a]=O?r:gc(t,n[a]);return m}function Vn(t,n,a){return t===t&&(a!==r&&(t=t<=a?t:a),n!==r&&(t=t>=n?t:n)),t}function Nr(t,n,a,h,m,O){var R,M=n&$,W=n&G,se=n&B;if(a&&(R=m?a(t,h,m,O):a(t)),R!==r)return R;if(!Et(t))return t;var oe=Re(t);if(oe){if(R=ey(t),!M)return pr(t,R)}else{var ue=er(t),le=ue==he||ue==pe;if(An(t))return Ih(t,M);if(ue==Ue||ue==fe||le&&!m){if(R=W||le?{}:Vh(t),!M)return W?H0(t,l0(R,t)):z0(t,rh(R,t))}else{if(!st[ue])return m?t:{};R=ty(t,ue,M)}}O||(O=new Hr);var _e=O.get(t);if(_e)return _e;O.set(t,R),wf(t)?t.forEach(function(De){R.add(Nr(De,n,a,De,t,O))}):bf(t)&&t.forEach(function(De,Ge){R.set(Ge,Nr(De,n,a,Ge,t,O))});var Ee=se?W?tc:ec:W?yr:Wt,qe=oe?r:Ee(t);return Ar(qe||t,function(De,Ge){qe&&(Ge=De,De=t[Ge]),Vi(R,Ge,Nr(De,n,a,Ge,t,O))}),R}function d0(t){var n=Wt(t);return function(a){return nh(a,t,n)}}function nh(t,n,a){var h=a.length;if(t==null)return!h;for(t=ht(t);h--;){var m=a[h],O=n[m],R=t[m];if(R===r&&!(m in t)||!O(R))return!1}return!0}function ih(t,n,a){if(typeof t!="function")throw new Tr(b);return Qi(function(){t.apply(r,a)},n)}function ki(t,n,a,h){var m=-1,O=Bs,R=!0,M=t.length,W=[],se=n.length;if(!M)return W;a&&(n=bt(n,wr(a))),h?(O=wa,R=!1):n.length>=o&&(O=$i,R=!1,n=new Kn(n));e:for(;++m<M;){var oe=t[m],ue=a==null?oe:a(oe);if(oe=h||oe!==0?oe:0,R&&ue===ue){for(var le=se;le--;)if(n[le]===ue)continue e;W.push(oe)}else O(n,ue,h)||W.push(oe)}return W}var In=Th(Jr),sh=Th(Ua,!0);function p0(t,n){var a=!0;return In(t,function(h,m,O){return a=!!n(h,m,O),a}),a}function io(t,n,a){for(var h=-1,m=t.length;++h<m;){var O=t[h],R=n(O);if(R!=null&&(M===r?R===R&&!Dr(R):a(R,M)))var M=R,W=O}return W}function g0(t,n,a,h){var m=t.length;for(a=Me(a),a<0&&(a=-a>m?0:m+a),h=h===r||h>m?m:Me(h),h<0&&(h+=m),h=a>h?0:Df(h);a<h;)t[a++]=n;return t}function oh(t,n){var a=[];return In(t,function(h,m,O){n(h,m,O)&&a.push(h)}),a}function Jt(t,n,a,h,m){var O=-1,R=t.length;for(a||(a=ny),m||(m=[]);++O<R;){var M=t[O];n>0&&a(M)?n>1?Jt(M,n-1,a,h,m):Dn(m,M):h||(m[m.length]=M)}return m}var La=Rh(),ah=Rh(!0);function Jr(t,n){return t&&La(t,n,Wt)}function Ua(t,n){return t&&ah(t,n,Wt)}function so(t,n){return En(n,function(a){return dn(t[a])})}function kn(t,n){n=Pn(n,t);for(var a=0,h=n.length;t!=null&&a<h;)t=t[Qr(n[a++])];return a&&a==h?t:r}function ch(t,n,a){var h=n(t);return Re(t)?h:Dn(h,a(t))}function sr(t){return t==null?t===r?Be:Ve:zn&&zn in ht(t)?X0(t):hy(t)}function Ma(t,n){return t>n}function y0(t,n){return t!=null&&it.call(t,n)}function v0(t,n){return t!=null&&n in ht(t)}function _0(t,n,a){return t>=Zt(n,a)&&t<kt(n,a)}function $a(t,n,a){for(var h=a?wa:Bs,m=t[0].length,O=t.length,R=O,M=ee(O),W=1/0,se=[];R--;){var oe=t[R];R&&n&&(oe=bt(oe,wr(n))),W=Zt(oe.length,W),M[R]=!a&&(n||m>=120&&oe.length>=120)?new Kn(R&&oe):r}oe=t[0];var ue=-1,le=M[0];e:for(;++ue<m&&se.length<W;){var _e=oe[ue],Ee=n?n(_e):_e;if(_e=a||_e!==0?_e:0,!(le?$i(le,Ee):h(se,Ee,a))){for(R=O;--R;){var qe=M[R];if(!(qe?$i(qe,Ee):h(t[R],Ee,a)))continue e}le&&le.push(Ee),se.push(_e)}}return se}function b0(t,n,a,h){return Jr(t,function(m,O,R){n(h,a(m),O,R)}),h}function Gi(t,n,a){n=Pn(n,t),t=Yh(t,n);var h=t==null?t:t[Qr(jr(n))];return h==null?r:Gt(h,t,a)}function uh(t){return Ct(t)&&sr(t)==fe}function m0(t){return Ct(t)&&sr(t)==Se}function w0(t){return Ct(t)&&sr(t)==H}function Wi(t,n,a,h,m){return t===n?!0:t==null||n==null||!Ct(t)&&!Ct(n)?t!==t&&n!==n:E0(t,n,a,h,Wi,m)}function E0(t,n,a,h,m,O){var R=Re(t),M=Re(n),W=R?me:er(t),se=M?me:er(n);W=W==fe?Ue:W,se=se==fe?Ue:se;var oe=W==Ue,ue=se==Ue,le=W==se;if(le&&An(t)){if(!An(n))return!1;R=!0,oe=!1}if(le&&!oe)return O||(O=new Hr),R||Si(t)?zh(t,n,a,h,m,O):Y0(t,n,W,a,h,m,O);if(!(a&F)){var _e=oe&&it.call(t,"__wrapped__"),Ee=ue&&it.call(n,"__wrapped__");if(_e||Ee){var qe=_e?t.value():t,De=Ee?n.value():n;return O||(O=new Hr),m(qe,De,a,h,O)}}return le?(O||(O=new Hr),J0(t,n,a,h,m,O)):!1}function D0(t){return Ct(t)&&er(t)==Oe}function Ba(t,n,a,h){var m=a.length,O=m,R=!h;if(t==null)return!O;for(t=ht(t);m--;){var M=a[m];if(R&&M[2]?M[1]!==t[M[0]]:!(M[0]in t))return!1}for(;++m<O;){M=a[m];var W=M[0],se=t[W],oe=M[1];if(R&&M[2]){if(se===r&&!(W in t))return!1}else{var ue=new Hr;if(h)var le=h(se,oe,W,t,n,ue);if(!(le===r?Wi(oe,se,F|J,h,ue):le))return!1}}return!0}function hh(t){if(!Et(t)||sy(t))return!1;var n=dn(t)?Dg:sa;return n.test(Wn(t))}function S0(t){return Ct(t)&&sr(t)==$e}function O0(t){return Ct(t)&&er(t)==Ie}function I0(t){return Ct(t)&&Do(t.length)&&!!at[sr(t)]}function fh(t){return typeof t=="function"?t:t==null?vr:typeof t=="object"?Re(t)?ph(t[0],t[1]):dh(t):Ff(t)}function qa(t){if(!Xi(t))return Cg(t);var n=[];for(var a in ht(t))it.call(t,a)&&a!="constructor"&&n.push(a);return n}function x0(t){if(!Et(t))return uy(t);var n=Xi(t),a=[];for(var h in t)h=="constructor"&&(n||!it.call(t,h))||a.push(h);return a}function za(t,n){return t<n}function lh(t,n){var a=-1,h=gr(t)?ee(t.length):[];return In(t,function(m,O,R){h[++a]=n(m,O,R)}),h}function dh(t){var n=nc(t);return n.length==1&&n[0][2]?Gh(n[0][0],n[0][1]):function(a){return a===t||Ba(a,t,n)}}function ph(t,n){return sc(t)&&kh(n)?Gh(Qr(t),n):function(a){var h=gc(a,t);return h===r&&h===n?yc(a,t):Wi(n,h,F|J)}}function oo(t,n,a,h,m){t!==n&&La(n,function(O,R){if(m||(m=new Hr),Et(O))P0(t,n,R,a,oo,h,m);else{var M=h?h(ac(t,R),O,R+"",t,n,m):r;M===r&&(M=O),Fa(t,R,M)}},yr)}function P0(t,n,a,h,m,O,R){var M=ac(t,a),W=ac(n,a),se=R.get(W);if(se){Fa(t,a,se);return}var oe=O?O(M,W,a+"",t,n,R):r,ue=oe===r;if(ue){var le=Re(W),_e=!le&&An(W),Ee=!le&&!_e&&Si(W);oe=W,le||_e||Ee?Re(M)?oe=M:Nt(M)?oe=pr(M):_e?(ue=!1,oe=Ih(W,!0)):Ee?(ue=!1,oe=xh(W,!0)):oe=[]:Zi(W)||Yn(W)?(oe=M,Yn(M)?oe=Sf(M):(!Et(M)||dn(M))&&(oe=Vh(W))):ue=!1}ue&&(R.set(W,oe),m(oe,W,h,O,R),R.delete(W)),Fa(t,a,oe)}function gh(t,n){var a=t.length;if(a)return n+=n<0?a:0,ln(n,a)?t[n]:r}function yh(t,n,a){n.length?n=bt(n,function(O){return Re(O)?function(R){return kn(R,O.length===1?O[0]:O)}:O}):n=[vr];var h=-1;n=bt(n,wr(we()));var m=lh(t,function(O,R,M){var W=bt(n,function(se){return se(O)});return{criteria:W,index:++h,value:O}});return tg(m,function(O,R){return q0(O,R,a)})}function C0(t,n){return vh(t,n,function(a,h){return yc(t,h)})}function vh(t,n,a){for(var h=-1,m=n.length,O={};++h<m;){var R=n[h],M=kn(t,R);a(M,R)&&Yi(O,Pn(R,t),M)}return O}function A0(t){return function(n){return kn(n,t)}}function Ha(t,n,a,h){var m=h?eg:di,O=-1,R=n.length,M=t;for(t===n&&(n=pr(n)),a&&(M=bt(t,wr(a)));++O<R;)for(var W=0,se=n[O],oe=a?a(se):se;(W=m(M,oe,W,h))>-1;)M!==t&&Js.call(M,W,1),Js.call(t,W,1);return t}function _h(t,n){for(var a=t?n.length:0,h=a-1;a--;){var m=n[a];if(a==h||m!==O){var O=m;ln(m)?Js.call(t,m,1):Ga(t,m)}}return t}function Ka(t,n){return t+Zs(Qu()*(n-t+1))}function T0(t,n,a,h){for(var m=-1,O=kt(Qs((n-t)/(a||1)),0),R=ee(O);O--;)R[h?O:++m]=t,t+=a;return R}function Va(t,n){var a="";if(!t||n<1||n>K)return a;do n%2&&(a+=t),n=Zs(n/2),n&&(t+=t);while(n);return a}function Ke(t,n){return cc(Wh(t,n,vr),t+"")}function R0(t){return th(Oi(t))}function N0(t,n){var a=Oi(t);return vo(a,Vn(n,0,a.length))}function Yi(t,n,a,h){if(!Et(t))return t;n=Pn(n,t);for(var m=-1,O=n.length,R=O-1,M=t;M!=null&&++m<O;){var W=Qr(n[m]),se=a;if(W==="__proto__"||W==="constructor"||W==="prototype")return t;if(m!=R){var oe=M[W];se=h?h(oe,W,M):r,se===r&&(se=Et(oe)?oe:ln(n[m+1])?[]:{})}Vi(M,W,se),M=M[W]}return t}var bh=eo?function(t,n){return eo.set(t,n),t}:vr,F0=Xs?function(t,n){return Xs(t,"toString",{configurable:!0,enumerable:!1,value:_c(n),writable:!0})}:vr;function j0(t){return vo(Oi(t))}function Fr(t,n,a){var h=-1,m=t.length;n<0&&(n=-n>m?0:m+n),a=a>m?m:a,a<0&&(a+=m),m=n>a?0:a-n>>>0,n>>>=0;for(var O=ee(m);++h<m;)O[h]=t[h+n];return O}function L0(t,n){var a;return In(t,function(h,m,O){return a=n(h,m,O),!a}),!!a}function ao(t,n,a){var h=0,m=t==null?h:t.length;if(typeof n=="number"&&n===n&&m<=ne){for(;h<m;){var O=h+m>>>1,R=t[O];R!==null&&!Dr(R)&&(a?R<=n:R<n)?h=O+1:m=O}return m}return ka(t,n,vr,a)}function ka(t,n,a,h){var m=0,O=t==null?0:t.length;if(O===0)return 0;n=a(n);for(var R=n!==n,M=n===null,W=Dr(n),se=n===r;m<O;){var oe=Zs((m+O)/2),ue=a(t[oe]),le=ue!==r,_e=ue===null,Ee=ue===ue,qe=Dr(ue);if(R)var De=h||Ee;else se?De=Ee&&(h||le):M?De=Ee&&le&&(h||!_e):W?De=Ee&&le&&!_e&&(h||!qe):_e||qe?De=!1:De=h?ue<=n:ue<n;De?m=oe+1:O=oe}return Zt(O,re)}function mh(t,n){for(var a=-1,h=t.length,m=0,O=[];++a<h;){var R=t[a],M=n?n(R):R;if(!a||!Kr(M,W)){var W=M;O[m++]=R===0?0:R}}return O}function wh(t){return typeof t=="number"?t:Dr(t)?z:+t}function Er(t){if(typeof t=="string")return t;if(Re(t))return bt(t,Er)+"";if(Dr(t))return Zu?Zu.call(t):"";var n=t+"";return n=="0"&&1/t==-j?"-0":n}function xn(t,n,a){var h=-1,m=Bs,O=t.length,R=!0,M=[],W=M;if(a)R=!1,m=wa;else if(O>=o){var se=n?null:G0(t);if(se)return zs(se);R=!1,m=$i,W=new Kn}else W=n?[]:M;e:for(;++h<O;){var oe=t[h],ue=n?n(oe):oe;if(oe=a||oe!==0?oe:0,R&&ue===ue){for(var le=W.length;le--;)if(W[le]===ue)continue e;n&&W.push(ue),M.push(oe)}else m(W,ue,a)||(W!==M&&W.push(ue),M.push(oe))}return M}function Ga(t,n){return n=Pn(n,t),t=Yh(t,n),t==null||delete t[Qr(jr(n))]}function Eh(t,n,a,h){return Yi(t,n,a(kn(t,n)),h)}function co(t,n,a,h){for(var m=t.length,O=h?m:-1;(h?O--:++O<m)&&n(t[O],O,t););return a?Fr(t,h?0:O,h?O+1:m):Fr(t,h?O+1:0,h?m:O)}function Dh(t,n){var a=t;return a instanceof Ye&&(a=a.value()),Ea(n,function(h,m){return m.func.apply(m.thisArg,Dn([h],m.args))},a)}function Wa(t,n,a){var h=t.length;if(h<2)return h?xn(t[0]):[];for(var m=-1,O=ee(h);++m<h;)for(var R=t[m],M=-1;++M<h;)M!=m&&(O[m]=ki(O[m]||R,t[M],n,a));return xn(Jt(O,1),n,a)}function Sh(t,n,a){for(var h=-1,m=t.length,O=n.length,R={};++h<m;){var M=h<O?n[h]:r;a(R,t[h],M)}return R}function Ya(t){return Nt(t)?t:[]}function Ja(t){return typeof t=="function"?t:vr}function Pn(t,n){return Re(t)?t:sc(t,n)?[t]:Zh(nt(t))}var U0=Ke;function Cn(t,n,a){var h=t.length;return a=a===r?h:a,!n&&a>=h?t:Fr(t,n,a)}var Oh=Sg||function(t){return Xe.clearTimeout(t)};function Ih(t,n){if(n)return t.slice();var a=t.length,h=Gu?Gu(a):new t.constructor(a);return t.copy(h),h}function Xa(t){var n=new t.constructor(t.byteLength);return new Ws(n).set(new Ws(t)),n}function M0(t,n){var a=n?Xa(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function $0(t){var n=new t.constructor(t.source,Pr.exec(t));return n.lastIndex=t.lastIndex,n}function B0(t){return Ki?ht(Ki.call(t)):{}}function xh(t,n){var a=n?Xa(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Ph(t,n){if(t!==n){var a=t!==r,h=t===null,m=t===t,O=Dr(t),R=n!==r,M=n===null,W=n===n,se=Dr(n);if(!M&&!se&&!O&&t>n||O&&R&&W&&!M&&!se||h&&R&&W||!a&&W||!m)return 1;if(!h&&!O&&!se&&t<n||se&&a&&m&&!h&&!O||M&&a&&m||!R&&m||!W)return-1}return 0}function q0(t,n,a){for(var h=-1,m=t.criteria,O=n.criteria,R=m.length,M=a.length;++h<R;){var W=Ph(m[h],O[h]);if(W){if(h>=M)return W;var se=a[h];return W*(se=="desc"?-1:1)}}return t.index-n.index}function Ch(t,n,a,h){for(var m=-1,O=t.length,R=a.length,M=-1,W=n.length,se=kt(O-R,0),oe=ee(W+se),ue=!h;++M<W;)oe[M]=n[M];for(;++m<R;)(ue||m<O)&&(oe[a[m]]=t[m]);for(;se--;)oe[M++]=t[m++];return oe}function Ah(t,n,a,h){for(var m=-1,O=t.length,R=-1,M=a.length,W=-1,se=n.length,oe=kt(O-M,0),ue=ee(oe+se),le=!h;++m<oe;)ue[m]=t[m];for(var _e=m;++W<se;)ue[_e+W]=n[W];for(;++R<M;)(le||m<O)&&(ue[_e+a[R]]=t[m++]);return ue}function pr(t,n){var a=-1,h=t.length;for(n||(n=ee(h));++a<h;)n[a]=t[a];return n}function Xr(t,n,a,h){var m=!a;a||(a={});for(var O=-1,R=n.length;++O<R;){var M=n[O],W=h?h(a[M],t[M],M,a,t):r;W===r&&(W=t[M]),m?un(a,M,W):Vi(a,M,W)}return a}function z0(t,n){return Xr(t,ic(t),n)}function H0(t,n){return Xr(t,Hh(t),n)}function uo(t,n){return function(a,h){var m=Re(a)?Wp:f0,O=n?n():{};return m(a,t,we(h,2),O)}}function wi(t){return Ke(function(n,a){var h=-1,m=a.length,O=m>1?a[m-1]:r,R=m>2?a[2]:r;for(O=t.length>3&&typeof O=="function"?(m--,O):r,R&&or(a[0],a[1],R)&&(O=m<3?r:O,m=1),n=ht(n);++h<m;){var M=a[h];M&&t(n,M,h,O)}return n})}function Th(t,n){return function(a,h){if(a==null)return a;if(!gr(a))return t(a,h);for(var m=a.length,O=n?m:-1,R=ht(a);(n?O--:++O<m)&&h(R[O],O,R)!==!1;);return a}}function Rh(t){return function(n,a,h){for(var m=-1,O=ht(n),R=h(n),M=R.length;M--;){var W=R[t?M:++m];if(a(O[W],W,O)===!1)break}return n}}function K0(t,n,a){var h=n&Q,m=Ji(t);function O(){var R=this&&this!==Xe&&this instanceof O?m:t;return R.apply(h?a:this,arguments)}return O}function Nh(t){return function(n){n=nt(n);var a=pi(n)?zr(n):r,h=a?a[0]:n.charAt(0),m=a?Cn(a,1).join(""):n.slice(1);return h[t]()+m}}function Ei(t){return function(n){return Ea(Rf(Tf(n).replace(Ui,"")),t,"")}}function Ji(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=mi(t.prototype),h=t.apply(a,n);return Et(h)?h:a}}function V0(t,n,a){var h=Ji(t);function m(){for(var O=arguments.length,R=ee(O),M=O,W=Di(m);M--;)R[M]=arguments[M];var se=O<3&&R[0]!==W&&R[O-1]!==W?[]:Sn(R,W);if(O-=se.length,O<a)return Mh(t,n,ho,m.placeholder,r,R,se,r,r,a-O);var oe=this&&this!==Xe&&this instanceof m?h:t;return Gt(oe,this,R)}return m}function Fh(t){return function(n,a,h){var m=ht(n);if(!gr(n)){var O=we(a,3);n=Wt(n),a=function(M){return O(m[M],M,m)}}var R=t(n,a,h);return R>-1?m[O?n[R]:R]:r}}function jh(t){return fn(function(n){var a=n.length,h=a,m=Rr.prototype.thru;for(t&&n.reverse();h--;){var O=n[h];if(typeof O!="function")throw new Tr(b);if(m&&!R&&go(O)=="wrapper")var R=new Rr([],!0)}for(h=R?h:a;++h<a;){O=n[h];var M=go(O),W=M=="wrapper"?rc(O):r;W&&oc(W[0])&&W[1]==(u|q|N|_)&&!W[4].length&&W[9]==1?R=R[go(W[0])].apply(R,W[3]):R=O.length==1&&oc(O)?R[M]():R.thru(O)}return function(){var se=arguments,oe=se[0];if(R&&se.length==1&&Re(oe))return R.plant(oe).value();for(var ue=0,le=a?n[ue].apply(this,se):oe;++ue<a;)le=n[ue].call(this,le);return le}})}function ho(t,n,a,h,m,O,R,M,W,se){var oe=n&u,ue=n&Q,le=n&ae,_e=n&(q|T),Ee=n&Z,qe=le?r:Ji(t);function De(){for(var Ge=arguments.length,Qe=ee(Ge),Sr=Ge;Sr--;)Qe[Sr]=arguments[Sr];if(_e)var ar=Di(De),Or=ng(Qe,ar);if(h&&(Qe=Ch(Qe,h,m,_e)),O&&(Qe=Ah(Qe,O,R,_e)),Ge-=Or,_e&&Ge<se){var Ft=Sn(Qe,ar);return Mh(t,n,ho,De.placeholder,a,Qe,Ft,M,W,se-Ge)}var Vr=ue?a:this,gn=le?Vr[t]:t;return Ge=Qe.length,M?Qe=fy(Qe,M):Ee&&Ge>1&&Qe.reverse(),oe&&W<Ge&&(Qe.length=W),this&&this!==Xe&&this instanceof De&&(gn=qe||Ji(gn)),gn.apply(Vr,Qe)}return De}function Lh(t,n){return function(a,h){return b0(a,t,n(h),{})}}function fo(t,n){return function(a,h){var m;if(a===r&&h===r)return n;if(a!==r&&(m=a),h!==r){if(m===r)return h;typeof a=="string"||typeof h=="string"?(a=Er(a),h=Er(h)):(a=wh(a),h=wh(h)),m=t(a,h)}return m}}function Qa(t){return fn(function(n){return n=bt(n,wr(we())),Ke(function(a){var h=this;return t(n,function(m){return Gt(m,h,a)})})})}function lo(t,n){n=n===r?" ":Er(n);var a=n.length;if(a<2)return a?Va(n,t):n;var h=Va(n,Qs(t/gi(n)));return pi(n)?Cn(zr(h),0,t).join(""):h.slice(0,t)}function k0(t,n,a,h){var m=n&Q,O=Ji(t);function R(){for(var M=-1,W=arguments.length,se=-1,oe=h.length,ue=ee(oe+W),le=this&&this!==Xe&&this instanceof R?O:t;++se<oe;)ue[se]=h[se];for(;W--;)ue[se++]=arguments[++M];return Gt(le,m?a:this,ue)}return R}function Uh(t){return function(n,a,h){return h&&typeof h!="number"&&or(n,a,h)&&(a=h=r),n=pn(n),a===r?(a=n,n=0):a=pn(a),h=h===r?n<a?1:-1:pn(h),T0(n,a,h,t)}}function po(t){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Lr(n),a=Lr(a)),t(n,a)}}function Mh(t,n,a,h,m,O,R,M,W,se){var oe=n&q,ue=oe?R:r,le=oe?r:R,_e=oe?O:r,Ee=oe?r:O;n|=oe?N:S,n&=~(oe?S:N),n&U||(n&=~(Q|ae));var qe=[t,n,m,_e,ue,Ee,le,M,W,se],De=a.apply(r,qe);return oc(t)&&Jh(De,qe),De.placeholder=h,Xh(De,t,n)}function Za(t){var n=Vt[t];return function(a,h){if(a=Lr(a),h=h==null?0:Zt(Me(h),292),h&&Xu(a)){var m=(nt(a)+"e").split("e"),O=n(m[0]+"e"+(+m[1]+h));return m=(nt(O)+"e").split("e"),+(m[0]+"e"+(+m[1]-h))}return n(a)}}var G0=_i&&1/zs(new _i([,-0]))[1]==j?function(t){return new _i(t)}:wc;function $h(t){return function(n){var a=er(n);return a==Oe?Ca(n):a==Ie?hg(n):rg(n,t(n))}}function hn(t,n,a,h,m,O,R,M){var W=n&ae;if(!W&&typeof t!="function")throw new Tr(b);var se=h?h.length:0;if(se||(n&=~(N|S),h=m=r),R=R===r?R:kt(Me(R),0),M=M===r?M:Me(M),se-=m?m.length:0,n&S){var oe=h,ue=m;h=m=r}var le=W?r:rc(t),_e=[t,n,a,h,m,oe,ue,O,R,M];if(le&&cy(_e,le),t=_e[0],n=_e[1],a=_e[2],h=_e[3],m=_e[4],M=_e[9]=_e[9]===r?W?0:t.length:kt(_e[9]-se,0),!M&&n&(q|T)&&(n&=~(q|T)),!n||n==Q)var Ee=K0(t,n,a);else n==q||n==T?Ee=V0(t,n,M):(n==N||n==(Q|N))&&!m.length?Ee=k0(t,n,a,h):Ee=ho.apply(r,_e);var qe=le?bh:Jh;return Xh(qe(Ee,_e),t,n)}function Bh(t,n,a,h){return t===r||Kr(t,vi[a])&&!it.call(h,a)?n:t}function qh(t,n,a,h,m,O){return Et(t)&&Et(n)&&(O.set(n,t),oo(t,n,r,qh,O),O.delete(n)),t}function W0(t){return Zi(t)?r:t}function zh(t,n,a,h,m,O){var R=a&F,M=t.length,W=n.length;if(M!=W&&!(R&&W>M))return!1;var se=O.get(t),oe=O.get(n);if(se&&oe)return se==n&&oe==t;var ue=-1,le=!0,_e=a&J?new Kn:r;for(O.set(t,n),O.set(n,t);++ue<M;){var Ee=t[ue],qe=n[ue];if(h)var De=R?h(qe,Ee,ue,n,t,O):h(Ee,qe,ue,t,n,O);if(De!==r){if(De)continue;le=!1;break}if(_e){if(!Da(n,function(Ge,Qe){if(!$i(_e,Qe)&&(Ee===Ge||m(Ee,Ge,a,h,O)))return _e.push(Qe)})){le=!1;break}}else if(!(Ee===qe||m(Ee,qe,a,h,O))){le=!1;break}}return O.delete(t),O.delete(n),le}function Y0(t,n,a,h,m,O,R){switch(a){case Ce:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Se:return!(t.byteLength!=n.byteLength||!O(new Ws(t),new Ws(n)));case Y:case H:case ze:return Kr(+t,+n);case L:return t.name==n.name&&t.message==n.message;case $e:case Ne:return t==n+"";case Oe:var M=Ca;case Ie:var W=h&F;if(M||(M=zs),t.size!=n.size&&!W)return!1;var se=R.get(t);if(se)return se==n;h|=J,R.set(t,n);var oe=zh(M(t),M(n),h,m,O,R);return R.delete(t),oe;case Fe:if(Ki)return Ki.call(t)==Ki.call(n)}return!1}function J0(t,n,a,h,m,O){var R=a&F,M=ec(t),W=M.length,se=ec(n),oe=se.length;if(W!=oe&&!R)return!1;for(var ue=W;ue--;){var le=M[ue];if(!(R?le in n:it.call(n,le)))return!1}var _e=O.get(t),Ee=O.get(n);if(_e&&Ee)return _e==n&&Ee==t;var qe=!0;O.set(t,n),O.set(n,t);for(var De=R;++ue<W;){le=M[ue];var Ge=t[le],Qe=n[le];if(h)var Sr=R?h(Qe,Ge,le,n,t,O):h(Ge,Qe,le,t,n,O);if(!(Sr===r?Ge===Qe||m(Ge,Qe,a,h,O):Sr)){qe=!1;break}De||(De=le=="constructor")}if(qe&&!De){var ar=t.constructor,Or=n.constructor;ar!=Or&&"constructor"in t&&"constructor"in n&&!(typeof ar=="function"&&ar instanceof ar&&typeof Or=="function"&&Or instanceof Or)&&(qe=!1)}return O.delete(t),O.delete(n),qe}function fn(t){return cc(Wh(t,r,nf),t+"")}function ec(t){return ch(t,Wt,ic)}function tc(t){return ch(t,yr,Hh)}var rc=eo?function(t){return eo.get(t)}:wc;function go(t){for(var n=t.name+"",a=bi[n],h=it.call(bi,n)?a.length:0;h--;){var m=a[h],O=m.func;if(O==null||O==t)return m.name}return n}function Di(t){var n=it.call(D,"placeholder")?D:t;return n.placeholder}function we(){var t=D.iteratee||bc;return t=t===bc?fh:t,arguments.length?t(arguments[0],arguments[1]):t}function yo(t,n){var a=t.__data__;return iy(n)?a[typeof n=="string"?"string":"hash"]:a.map}function nc(t){for(var n=Wt(t),a=n.length;a--;){var h=n[a],m=t[h];n[a]=[h,m,kh(m)]}return n}function Gn(t,n){var a=ag(t,n);return hh(a)?a:r}function X0(t){var n=it.call(t,zn),a=t[zn];try{t[zn]=r;var h=!0}catch{}var m=ks.call(t);return h&&(n?t[zn]=a:delete t[zn]),m}var ic=Ta?function(t){return t==null?[]:(t=ht(t),En(Ta(t),function(n){return Yu.call(t,n)}))}:Ec,Hh=Ta?function(t){for(var n=[];t;)Dn(n,ic(t)),t=Ys(t);return n}:Ec,er=sr;(Ra&&er(new Ra(new ArrayBuffer(1)))!=Ce||qi&&er(new qi)!=Oe||Na&&er(Na.resolve())!=gt||_i&&er(new _i)!=Ie||zi&&er(new zi)!=Pe)&&(er=function(t){var n=sr(t),a=n==Ue?t.constructor:r,h=a?Wn(a):"";if(h)switch(h){case Ng:return Ce;case Fg:return Oe;case jg:return gt;case Lg:return Ie;case Ug:return Pe}return n});function Q0(t,n,a){for(var h=-1,m=a.length;++h<m;){var O=a[h],R=O.size;switch(O.type){case"drop":t+=R;break;case"dropRight":n-=R;break;case"take":n=Zt(n,t+R);break;case"takeRight":t=kt(t,n-R);break}}return{start:t,end:n}}function Z0(t){var n=t.match(ft);return n?n[1].split(Bt):[]}function Kh(t,n,a){n=Pn(n,t);for(var h=-1,m=n.length,O=!1;++h<m;){var R=Qr(n[h]);if(!(O=t!=null&&a(t,R)))break;t=t[R]}return O||++h!=m?O:(m=t==null?0:t.length,!!m&&Do(m)&&ln(R,m)&&(Re(t)||Yn(t)))}function ey(t){var n=t.length,a=new t.constructor(n);return n&&typeof t[0]=="string"&&it.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Vh(t){return typeof t.constructor=="function"&&!Xi(t)?mi(Ys(t)):{}}function ty(t,n,a){var h=t.constructor;switch(n){case Se:return Xa(t);case Y:case H:return new h(+t);case Ce:return M0(t,a);case He:case xe:case ke:case We:case et:case tt:case Je:case rr:case lr:return xh(t,a);case Oe:return new h;case ze:case Ne:return new h(t);case $e:return $0(t);case Ie:return new h;case Fe:return B0(t)}}function ry(t,n){var a=n.length;if(!a)return t;var h=a-1;return n[h]=(a>1?"& ":"")+n[h],n=n.join(a>2?", ":" "),t.replace(Pt,`{
/* [wrapped with `+n+`] */
`)}function ny(t){return Re(t)||Yn(t)||!!(Ju&&t&&t[Ju])}function ln(t,n){var a=typeof t;return n=n??K,!!n&&(a=="number"||a!="symbol"&&aa.test(t))&&t>-1&&t%1==0&&t<n}function or(t,n,a){if(!Et(a))return!1;var h=typeof n;return(h=="number"?gr(a)&&ln(n,a.length):h=="string"&&n in a)?Kr(a[n],t):!1}function sc(t,n){if(Re(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Dr(t)?!0:Ut.test(t)||!_t.test(t)||n!=null&&t in ht(n)}function iy(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function oc(t){var n=go(t),a=D[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(t===a)return!0;var h=rc(a);return!!h&&t===h[0]}function sy(t){return!!ku&&ku in t}var oy=Ks?dn:Dc;function Xi(t){var n=t&&t.constructor,a=typeof n=="function"&&n.prototype||vi;return t===a}function kh(t){return t===t&&!Et(t)}function Gh(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==r||t in ht(a))}}function ay(t){var n=wo(t,function(h){return a.size===C&&a.clear(),h}),a=n.cache;return n}function cy(t,n){var a=t[1],h=n[1],m=a|h,O=m<(Q|ae|u),R=h==u&&a==q||h==u&&a==_&&t[7].length<=n[8]||h==(u|_)&&n[7].length<=n[8]&&a==q;if(!(O||R))return t;h&Q&&(t[2]=n[2],m|=a&Q?0:U);var M=n[3];if(M){var W=t[3];t[3]=W?Ch(W,M,n[4]):M,t[4]=W?Sn(t[3],A):n[4]}return M=n[5],M&&(W=t[5],t[5]=W?Ah(W,M,n[6]):M,t[6]=W?Sn(t[5],A):n[6]),M=n[7],M&&(t[7]=M),h&u&&(t[8]=t[8]==null?n[8]:Zt(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=m,t}function uy(t){var n=[];if(t!=null)for(var a in ht(t))n.push(a);return n}function hy(t){return ks.call(t)}function Wh(t,n,a){return n=kt(n===r?t.length-1:n,0),function(){for(var h=arguments,m=-1,O=kt(h.length-n,0),R=ee(O);++m<O;)R[m]=h[n+m];m=-1;for(var M=ee(n+1);++m<n;)M[m]=h[m];return M[n]=a(R),Gt(t,this,M)}}function Yh(t,n){return n.length<2?t:kn(t,Fr(n,0,-1))}function fy(t,n){for(var a=t.length,h=Zt(n.length,a),m=pr(t);h--;){var O=n[h];t[h]=ln(O,a)?m[O]:r}return t}function ac(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Jh=Qh(bh),Qi=Ig||function(t,n){return Xe.setTimeout(t,n)},cc=Qh(F0);function Xh(t,n,a){var h=n+"";return cc(t,ry(h,ly(Z0(h),a)))}function Qh(t){var n=0,a=0;return function(){var h=Ag(),m=E-(h-a);if(a=h,m>0){if(++n>=y)return arguments[0]}else n=0;return t.apply(r,arguments)}}function vo(t,n){var a=-1,h=t.length,m=h-1;for(n=n===r?h:n;++a<n;){var O=Ka(a,m),R=t[O];t[O]=t[a],t[a]=R}return t.length=n,t}var Zh=ay(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Mt,function(a,h,m,O){n.push(m?O.replace(ta,"$1"):h||a)}),n});function Qr(t){if(typeof t=="string"||Dr(t))return t;var n=t+"";return n=="0"&&1/t==-j?"-0":n}function Wn(t){if(t!=null){try{return Vs.call(t)}catch{}try{return t+""}catch{}}return""}function ly(t,n){return Ar(ge,function(a){var h="_."+a[0];n&a[1]&&!Bs(t,h)&&t.push(h)}),t.sort()}function ef(t){if(t instanceof Ye)return t.clone();var n=new Rr(t.__wrapped__,t.__chain__);return n.__actions__=pr(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function dy(t,n,a){(a?or(t,n,a):n===r)?n=1:n=kt(Me(n),0);var h=t==null?0:t.length;if(!h||n<1)return[];for(var m=0,O=0,R=ee(Qs(h/n));m<h;)R[O++]=Fr(t,m,m+=n);return R}function py(t){for(var n=-1,a=t==null?0:t.length,h=0,m=[];++n<a;){var O=t[n];O&&(m[h++]=O)}return m}function gy(){var t=arguments.length;if(!t)return[];for(var n=ee(t-1),a=arguments[0],h=t;h--;)n[h-1]=arguments[h];return Dn(Re(a)?pr(a):[a],Jt(n,1))}var yy=Ke(function(t,n){return Nt(t)?ki(t,Jt(n,1,Nt,!0)):[]}),vy=Ke(function(t,n){var a=jr(n);return Nt(a)&&(a=r),Nt(t)?ki(t,Jt(n,1,Nt,!0),we(a,2)):[]}),_y=Ke(function(t,n){var a=jr(n);return Nt(a)&&(a=r),Nt(t)?ki(t,Jt(n,1,Nt,!0),r,a):[]});function by(t,n,a){var h=t==null?0:t.length;return h?(n=a||n===r?1:Me(n),Fr(t,n<0?0:n,h)):[]}function my(t,n,a){var h=t==null?0:t.length;return h?(n=a||n===r?1:Me(n),n=h-n,Fr(t,0,n<0?0:n)):[]}function wy(t,n){return t&&t.length?co(t,we(n,3),!0,!0):[]}function Ey(t,n){return t&&t.length?co(t,we(n,3),!0):[]}function Dy(t,n,a,h){var m=t==null?0:t.length;return m?(a&&typeof a!="number"&&or(t,n,a)&&(a=0,h=m),g0(t,n,a,h)):[]}function tf(t,n,a){var h=t==null?0:t.length;if(!h)return-1;var m=a==null?0:Me(a);return m<0&&(m=kt(h+m,0)),qs(t,we(n,3),m)}function rf(t,n,a){var h=t==null?0:t.length;if(!h)return-1;var m=h-1;return a!==r&&(m=Me(a),m=a<0?kt(h+m,0):Zt(m,h-1)),qs(t,we(n,3),m,!0)}function nf(t){var n=t==null?0:t.length;return n?Jt(t,1):[]}function Sy(t){var n=t==null?0:t.length;return n?Jt(t,j):[]}function Oy(t,n){var a=t==null?0:t.length;return a?(n=n===r?1:Me(n),Jt(t,n)):[]}function Iy(t){for(var n=-1,a=t==null?0:t.length,h={};++n<a;){var m=t[n];h[m[0]]=m[1]}return h}function sf(t){return t&&t.length?t[0]:r}function xy(t,n,a){var h=t==null?0:t.length;if(!h)return-1;var m=a==null?0:Me(a);return m<0&&(m=kt(h+m,0)),di(t,n,m)}function Py(t){var n=t==null?0:t.length;return n?Fr(t,0,-1):[]}var Cy=Ke(function(t){var n=bt(t,Ya);return n.length&&n[0]===t[0]?$a(n):[]}),Ay=Ke(function(t){var n=jr(t),a=bt(t,Ya);return n===jr(a)?n=r:a.pop(),a.length&&a[0]===t[0]?$a(a,we(n,2)):[]}),Ty=Ke(function(t){var n=jr(t),a=bt(t,Ya);return n=typeof n=="function"?n:r,n&&a.pop(),a.length&&a[0]===t[0]?$a(a,r,n):[]});function Ry(t,n){return t==null?"":Pg.call(t,n)}function jr(t){var n=t==null?0:t.length;return n?t[n-1]:r}function Ny(t,n,a){var h=t==null?0:t.length;if(!h)return-1;var m=h;return a!==r&&(m=Me(a),m=m<0?kt(h+m,0):Zt(m,h-1)),n===n?lg(t,n,m):qs(t,Mu,m,!0)}function Fy(t,n){return t&&t.length?gh(t,Me(n)):r}var jy=Ke(of);function of(t,n){return t&&t.length&&n&&n.length?Ha(t,n):t}function Ly(t,n,a){return t&&t.length&&n&&n.length?Ha(t,n,we(a,2)):t}function Uy(t,n,a){return t&&t.length&&n&&n.length?Ha(t,n,r,a):t}var My=fn(function(t,n){var a=t==null?0:t.length,h=ja(t,n);return _h(t,bt(n,function(m){return ln(m,a)?+m:m}).sort(Ph)),h});function $y(t,n){var a=[];if(!(t&&t.length))return a;var h=-1,m=[],O=t.length;for(n=we(n,3);++h<O;){var R=t[h];n(R,h,t)&&(a.push(R),m.push(h))}return _h(t,m),a}function uc(t){return t==null?t:Rg.call(t)}function By(t,n,a){var h=t==null?0:t.length;return h?(a&&typeof a!="number"&&or(t,n,a)?(n=0,a=h):(n=n==null?0:Me(n),a=a===r?h:Me(a)),Fr(t,n,a)):[]}function qy(t,n){return ao(t,n)}function zy(t,n,a){return ka(t,n,we(a,2))}function Hy(t,n){var a=t==null?0:t.length;if(a){var h=ao(t,n);if(h<a&&Kr(t[h],n))return h}return-1}function Ky(t,n){return ao(t,n,!0)}function Vy(t,n,a){return ka(t,n,we(a,2),!0)}function ky(t,n){var a=t==null?0:t.length;if(a){var h=ao(t,n,!0)-1;if(Kr(t[h],n))return h}return-1}function Gy(t){return t&&t.length?mh(t):[]}function Wy(t,n){return t&&t.length?mh(t,we(n,2)):[]}function Yy(t){var n=t==null?0:t.length;return n?Fr(t,1,n):[]}function Jy(t,n,a){return t&&t.length?(n=a||n===r?1:Me(n),Fr(t,0,n<0?0:n)):[]}function Xy(t,n,a){var h=t==null?0:t.length;return h?(n=a||n===r?1:Me(n),n=h-n,Fr(t,n<0?0:n,h)):[]}function Qy(t,n){return t&&t.length?co(t,we(n,3),!1,!0):[]}function Zy(t,n){return t&&t.length?co(t,we(n,3)):[]}var ev=Ke(function(t){return xn(Jt(t,1,Nt,!0))}),tv=Ke(function(t){var n=jr(t);return Nt(n)&&(n=r),xn(Jt(t,1,Nt,!0),we(n,2))}),rv=Ke(function(t){var n=jr(t);return n=typeof n=="function"?n:r,xn(Jt(t,1,Nt,!0),r,n)});function nv(t){return t&&t.length?xn(t):[]}function iv(t,n){return t&&t.length?xn(t,we(n,2)):[]}function sv(t,n){return n=typeof n=="function"?n:r,t&&t.length?xn(t,r,n):[]}function hc(t){if(!(t&&t.length))return[];var n=0;return t=En(t,function(a){if(Nt(a))return n=kt(a.length,n),!0}),xa(n,function(a){return bt(t,Sa(a))})}function af(t,n){if(!(t&&t.length))return[];var a=hc(t);return n==null?a:bt(a,function(h){return Gt(n,r,h)})}var ov=Ke(function(t,n){return Nt(t)?ki(t,n):[]}),av=Ke(function(t){return Wa(En(t,Nt))}),cv=Ke(function(t){var n=jr(t);return Nt(n)&&(n=r),Wa(En(t,Nt),we(n,2))}),uv=Ke(function(t){var n=jr(t);return n=typeof n=="function"?n:r,Wa(En(t,Nt),r,n)}),hv=Ke(hc);function fv(t,n){return Sh(t||[],n||[],Vi)}function lv(t,n){return Sh(t||[],n||[],Yi)}var dv=Ke(function(t){var n=t.length,a=n>1?t[n-1]:r;return a=typeof a=="function"?(t.pop(),a):r,af(t,a)});function cf(t){var n=D(t);return n.__chain__=!0,n}function pv(t,n){return n(t),t}function _o(t,n){return n(t)}var gv=fn(function(t){var n=t.length,a=n?t[0]:0,h=this.__wrapped__,m=function(O){return ja(O,t)};return n>1||this.__actions__.length||!(h instanceof Ye)||!ln(a)?this.thru(m):(h=h.slice(a,+a+(n?1:0)),h.__actions__.push({func:_o,args:[m],thisArg:r}),new Rr(h,this.__chain__).thru(function(O){return n&&!O.length&&O.push(r),O}))});function yv(){return cf(this)}function vv(){return new Rr(this.value(),this.__chain__)}function _v(){this.__values__===r&&(this.__values__=Ef(this.value()));var t=this.__index__>=this.__values__.length,n=t?r:this.__values__[this.__index__++];return{done:t,value:n}}function bv(){return this}function mv(t){for(var n,a=this;a instanceof ro;){var h=ef(a);h.__index__=0,h.__values__=r,n?m.__wrapped__=h:n=h;var m=h;a=a.__wrapped__}return m.__wrapped__=t,n}function wv(){var t=this.__wrapped__;if(t instanceof Ye){var n=t;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:_o,args:[uc],thisArg:r}),new Rr(n,this.__chain__)}return this.thru(uc)}function Ev(){return Dh(this.__wrapped__,this.__actions__)}var Dv=uo(function(t,n,a){it.call(t,a)?++t[a]:un(t,a,1)});function Sv(t,n,a){var h=Re(t)?Lu:p0;return a&&or(t,n,a)&&(n=r),h(t,we(n,3))}function Ov(t,n){var a=Re(t)?En:oh;return a(t,we(n,3))}var Iv=Fh(tf),xv=Fh(rf);function Pv(t,n){return Jt(bo(t,n),1)}function Cv(t,n){return Jt(bo(t,n),j)}function Av(t,n,a){return a=a===r?1:Me(a),Jt(bo(t,n),a)}function uf(t,n){var a=Re(t)?Ar:In;return a(t,we(n,3))}function hf(t,n){var a=Re(t)?Yp:sh;return a(t,we(n,3))}var Tv=uo(function(t,n,a){it.call(t,a)?t[a].push(n):un(t,a,[n])});function Rv(t,n,a,h){t=gr(t)?t:Oi(t),a=a&&!h?Me(a):0;var m=t.length;return a<0&&(a=kt(m+a,0)),So(t)?a<=m&&t.indexOf(n,a)>-1:!!m&&di(t,n,a)>-1}var Nv=Ke(function(t,n,a){var h=-1,m=typeof n=="function",O=gr(t)?ee(t.length):[];return In(t,function(R){O[++h]=m?Gt(n,R,a):Gi(R,n,a)}),O}),Fv=uo(function(t,n,a){un(t,a,n)});function bo(t,n){var a=Re(t)?bt:lh;return a(t,we(n,3))}function jv(t,n,a,h){return t==null?[]:(Re(n)||(n=n==null?[]:[n]),a=h?r:a,Re(a)||(a=a==null?[]:[a]),yh(t,n,a))}var Lv=uo(function(t,n,a){t[a?0:1].push(n)},function(){return[[],[]]});function Uv(t,n,a){var h=Re(t)?Ea:Bu,m=arguments.length<3;return h(t,we(n,4),a,m,In)}function Mv(t,n,a){var h=Re(t)?Jp:Bu,m=arguments.length<3;return h(t,we(n,4),a,m,sh)}function $v(t,n){var a=Re(t)?En:oh;return a(t,Eo(we(n,3)))}function Bv(t){var n=Re(t)?th:R0;return n(t)}function qv(t,n,a){(a?or(t,n,a):n===r)?n=1:n=Me(n);var h=Re(t)?u0:N0;return h(t,n)}function zv(t){var n=Re(t)?h0:j0;return n(t)}function Hv(t){if(t==null)return 0;if(gr(t))return So(t)?gi(t):t.length;var n=er(t);return n==Oe||n==Ie?t.size:qa(t).length}function Kv(t,n,a){var h=Re(t)?Da:L0;return a&&or(t,n,a)&&(n=r),h(t,we(n,3))}var Vv=Ke(function(t,n){if(t==null)return[];var a=n.length;return a>1&&or(t,n[0],n[1])?n=[]:a>2&&or(n[0],n[1],n[2])&&(n=[n[0]]),yh(t,Jt(n,1),[])}),mo=Og||function(){return Xe.Date.now()};function kv(t,n){if(typeof n!="function")throw new Tr(b);return t=Me(t),function(){if(--t<1)return n.apply(this,arguments)}}function ff(t,n,a){return n=a?r:n,n=t&&n==null?t.length:n,hn(t,u,r,r,r,r,n)}function lf(t,n){var a;if(typeof n!="function")throw new Tr(b);return t=Me(t),function(){return--t>0&&(a=n.apply(this,arguments)),t<=1&&(n=r),a}}var fc=Ke(function(t,n,a){var h=Q;if(a.length){var m=Sn(a,Di(fc));h|=N}return hn(t,h,n,a,m)}),df=Ke(function(t,n,a){var h=Q|ae;if(a.length){var m=Sn(a,Di(df));h|=N}return hn(n,h,t,a,m)});function pf(t,n,a){n=a?r:n;var h=hn(t,q,r,r,r,r,r,n);return h.placeholder=pf.placeholder,h}function gf(t,n,a){n=a?r:n;var h=hn(t,T,r,r,r,r,r,n);return h.placeholder=gf.placeholder,h}function yf(t,n,a){var h,m,O,R,M,W,se=0,oe=!1,ue=!1,le=!0;if(typeof t!="function")throw new Tr(b);n=Lr(n)||0,Et(a)&&(oe=!!a.leading,ue="maxWait"in a,O=ue?kt(Lr(a.maxWait)||0,n):O,le="trailing"in a?!!a.trailing:le);function _e(Ft){var Vr=h,gn=m;return h=m=r,se=Ft,R=t.apply(gn,Vr),R}function Ee(Ft){return se=Ft,M=Qi(Ge,n),oe?_e(Ft):R}function qe(Ft){var Vr=Ft-W,gn=Ft-se,jf=n-Vr;return ue?Zt(jf,O-gn):jf}function De(Ft){var Vr=Ft-W,gn=Ft-se;return W===r||Vr>=n||Vr<0||ue&&gn>=O}function Ge(){var Ft=mo();if(De(Ft))return Qe(Ft);M=Qi(Ge,qe(Ft))}function Qe(Ft){return M=r,le&&h?_e(Ft):(h=m=r,R)}function Sr(){M!==r&&Oh(M),se=0,h=W=m=M=r}function ar(){return M===r?R:Qe(mo())}function Or(){var Ft=mo(),Vr=De(Ft);if(h=arguments,m=this,W=Ft,Vr){if(M===r)return Ee(W);if(ue)return Oh(M),M=Qi(Ge,n),_e(W)}return M===r&&(M=Qi(Ge,n)),R}return Or.cancel=Sr,Or.flush=ar,Or}var Gv=Ke(function(t,n){return ih(t,1,n)}),Wv=Ke(function(t,n,a){return ih(t,Lr(n)||0,a)});function Yv(t){return hn(t,Z)}function wo(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Tr(b);var a=function(){var h=arguments,m=n?n.apply(this,h):h[0],O=a.cache;if(O.has(m))return O.get(m);var R=t.apply(this,h);return a.cache=O.set(m,R)||O,R};return a.cache=new(wo.Cache||cn),a}wo.Cache=cn;function Eo(t){if(typeof t!="function")throw new Tr(b);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Jv(t){return lf(2,t)}var Xv=U0(function(t,n){n=n.length==1&&Re(n[0])?bt(n[0],wr(we())):bt(Jt(n,1),wr(we()));var a=n.length;return Ke(function(h){for(var m=-1,O=Zt(h.length,a);++m<O;)h[m]=n[m].call(this,h[m]);return Gt(t,this,h)})}),lc=Ke(function(t,n){var a=Sn(n,Di(lc));return hn(t,N,r,n,a)}),vf=Ke(function(t,n){var a=Sn(n,Di(vf));return hn(t,S,r,n,a)}),Qv=fn(function(t,n){return hn(t,_,r,r,r,n)});function Zv(t,n){if(typeof t!="function")throw new Tr(b);return n=n===r?n:Me(n),Ke(t,n)}function e_(t,n){if(typeof t!="function")throw new Tr(b);return n=n==null?0:kt(Me(n),0),Ke(function(a){var h=a[n],m=Cn(a,0,n);return h&&Dn(m,h),Gt(t,this,m)})}function t_(t,n,a){var h=!0,m=!0;if(typeof t!="function")throw new Tr(b);return Et(a)&&(h="leading"in a?!!a.leading:h,m="trailing"in a?!!a.trailing:m),yf(t,n,{leading:h,maxWait:n,trailing:m})}function r_(t){return ff(t,1)}function n_(t,n){return lc(Ja(n),t)}function i_(){if(!arguments.length)return[];var t=arguments[0];return Re(t)?t:[t]}function s_(t){return Nr(t,B)}function o_(t,n){return n=typeof n=="function"?n:r,Nr(t,B,n)}function a_(t){return Nr(t,$|B)}function c_(t,n){return n=typeof n=="function"?n:r,Nr(t,$|B,n)}function u_(t,n){return n==null||nh(t,n,Wt(n))}function Kr(t,n){return t===n||t!==t&&n!==n}var h_=po(Ma),f_=po(function(t,n){return t>=n}),Yn=uh(function(){return arguments}())?uh:function(t){return Ct(t)&&it.call(t,"callee")&&!Yu.call(t,"callee")},Re=ee.isArray,l_=ir?wr(ir):m0;function gr(t){return t!=null&&Do(t.length)&&!dn(t)}function Nt(t){return Ct(t)&&gr(t)}function d_(t){return t===!0||t===!1||Ct(t)&&sr(t)==Y}var An=xg||Dc,p_=qr?wr(qr):w0;function g_(t){return Ct(t)&&t.nodeType===1&&!Zi(t)}function y_(t){if(t==null)return!0;if(gr(t)&&(Re(t)||typeof t=="string"||typeof t.splice=="function"||An(t)||Si(t)||Yn(t)))return!t.length;var n=er(t);if(n==Oe||n==Ie)return!t.size;if(Xi(t))return!qa(t).length;for(var a in t)if(it.call(t,a))return!1;return!0}function v_(t,n){return Wi(t,n)}function __(t,n,a){a=typeof a=="function"?a:r;var h=a?a(t,n):r;return h===r?Wi(t,n,r,a):!!h}function dc(t){if(!Ct(t))return!1;var n=sr(t);return n==L||n==p||typeof t.message=="string"&&typeof t.name=="string"&&!Zi(t)}function b_(t){return typeof t=="number"&&Xu(t)}function dn(t){if(!Et(t))return!1;var n=sr(t);return n==he||n==pe||n==X||n==yt}function _f(t){return typeof t=="number"&&t==Me(t)}function Do(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=K}function Et(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function Ct(t){return t!=null&&typeof t=="object"}var bf=Cr?wr(Cr):D0;function m_(t,n){return t===n||Ba(t,n,nc(n))}function w_(t,n,a){return a=typeof a=="function"?a:r,Ba(t,n,nc(n),a)}function E_(t){return mf(t)&&t!=+t}function D_(t){if(oy(t))throw new Ae(d);return hh(t)}function S_(t){return t===null}function O_(t){return t==null}function mf(t){return typeof t=="number"||Ct(t)&&sr(t)==ze}function Zi(t){if(!Ct(t)||sr(t)!=Ue)return!1;var n=Ys(t);if(n===null)return!0;var a=it.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&Vs.call(a)==wg}var pc=Yr?wr(Yr):S0;function I_(t){return _f(t)&&t>=-K&&t<=K}var wf=Mi?wr(Mi):O0;function So(t){return typeof t=="string"||!Re(t)&&Ct(t)&&sr(t)==Ne}function Dr(t){return typeof t=="symbol"||Ct(t)&&sr(t)==Fe}var Si=qn?wr(qn):I0;function x_(t){return t===r}function P_(t){return Ct(t)&&er(t)==Pe}function C_(t){return Ct(t)&&sr(t)==je}var A_=po(za),T_=po(function(t,n){return t<=n});function Ef(t){if(!t)return[];if(gr(t))return So(t)?zr(t):pr(t);if(Bi&&t[Bi])return ug(t[Bi]());var n=er(t),a=n==Oe?Ca:n==Ie?zs:Oi;return a(t)}function pn(t){if(!t)return t===0?t:0;if(t=Lr(t),t===j||t===-j){var n=t<0?-1:1;return n*I}return t===t?t:0}function Me(t){var n=pn(t),a=n%1;return n===n?a?n-a:n:0}function Df(t){return t?Vn(Me(t),0,te):0}function Lr(t){if(typeof t=="number")return t;if(Dr(t))return z;if(Et(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Et(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=qu(t);var a=ia.test(t);return a||oa.test(t)?Te(t.slice(2),a?2:8):na.test(t)?z:+t}function Sf(t){return Xr(t,yr(t))}function R_(t){return t?Vn(Me(t),-K,K):t===0?t:0}function nt(t){return t==null?"":Er(t)}var N_=wi(function(t,n){if(Xi(n)||gr(n)){Xr(n,Wt(n),t);return}for(var a in n)it.call(n,a)&&Vi(t,a,n[a])}),Of=wi(function(t,n){Xr(n,yr(n),t)}),Oo=wi(function(t,n,a,h){Xr(n,yr(n),t,h)}),F_=wi(function(t,n,a,h){Xr(n,Wt(n),t,h)}),j_=fn(ja);function L_(t,n){var a=mi(t);return n==null?a:rh(a,n)}var U_=Ke(function(t,n){t=ht(t);var a=-1,h=n.length,m=h>2?n[2]:r;for(m&&or(n[0],n[1],m)&&(h=1);++a<h;)for(var O=n[a],R=yr(O),M=-1,W=R.length;++M<W;){var se=R[M],oe=t[se];(oe===r||Kr(oe,vi[se])&&!it.call(t,se))&&(t[se]=O[se])}return t}),M_=Ke(function(t){return t.push(r,qh),Gt(If,r,t)});function $_(t,n){return Uu(t,we(n,3),Jr)}function B_(t,n){return Uu(t,we(n,3),Ua)}function q_(t,n){return t==null?t:La(t,we(n,3),yr)}function z_(t,n){return t==null?t:ah(t,we(n,3),yr)}function H_(t,n){return t&&Jr(t,we(n,3))}function K_(t,n){return t&&Ua(t,we(n,3))}function V_(t){return t==null?[]:so(t,Wt(t))}function k_(t){return t==null?[]:so(t,yr(t))}function gc(t,n,a){var h=t==null?r:kn(t,n);return h===r?a:h}function G_(t,n){return t!=null&&Kh(t,n,y0)}function yc(t,n){return t!=null&&Kh(t,n,v0)}var W_=Lh(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=ks.call(n)),t[n]=a},_c(vr)),Y_=Lh(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=ks.call(n)),it.call(t,n)?t[n].push(a):t[n]=[a]},we),J_=Ke(Gi);function Wt(t){return gr(t)?eh(t):qa(t)}function yr(t){return gr(t)?eh(t,!0):x0(t)}function X_(t,n){var a={};return n=we(n,3),Jr(t,function(h,m,O){un(a,n(h,m,O),h)}),a}function Q_(t,n){var a={};return n=we(n,3),Jr(t,function(h,m,O){un(a,m,n(h,m,O))}),a}var Z_=wi(function(t,n,a){oo(t,n,a)}),If=wi(function(t,n,a,h){oo(t,n,a,h)}),e1=fn(function(t,n){var a={};if(t==null)return a;var h=!1;n=bt(n,function(O){return O=Pn(O,t),h||(h=O.length>1),O}),Xr(t,tc(t),a),h&&(a=Nr(a,$|G|B,W0));for(var m=n.length;m--;)Ga(a,n[m]);return a});function t1(t,n){return xf(t,Eo(we(n)))}var r1=fn(function(t,n){return t==null?{}:C0(t,n)});function xf(t,n){if(t==null)return{};var a=bt(tc(t),function(h){return[h]});return n=we(n),vh(t,a,function(h,m){return n(h,m[0])})}function n1(t,n,a){n=Pn(n,t);var h=-1,m=n.length;for(m||(m=1,t=r);++h<m;){var O=t==null?r:t[Qr(n[h])];O===r&&(h=m,O=a),t=dn(O)?O.call(t):O}return t}function i1(t,n,a){return t==null?t:Yi(t,n,a)}function s1(t,n,a,h){return h=typeof h=="function"?h:r,t==null?t:Yi(t,n,a,h)}var Pf=$h(Wt),Cf=$h(yr);function o1(t,n,a){var h=Re(t),m=h||An(t)||Si(t);if(n=we(n,4),a==null){var O=t&&t.constructor;m?a=h?new O:[]:Et(t)?a=dn(O)?mi(Ys(t)):{}:a={}}return(m?Ar:Jr)(t,function(R,M,W){return n(a,R,M,W)}),a}function a1(t,n){return t==null?!0:Ga(t,n)}function c1(t,n,a){return t==null?t:Eh(t,n,Ja(a))}function u1(t,n,a,h){return h=typeof h=="function"?h:r,t==null?t:Eh(t,n,Ja(a),h)}function Oi(t){return t==null?[]:Pa(t,Wt(t))}function h1(t){return t==null?[]:Pa(t,yr(t))}function f1(t,n,a){return a===r&&(a=n,n=r),a!==r&&(a=Lr(a),a=a===a?a:0),n!==r&&(n=Lr(n),n=n===n?n:0),Vn(Lr(t),n,a)}function l1(t,n,a){return n=pn(n),a===r?(a=n,n=0):a=pn(a),t=Lr(t),_0(t,n,a)}function d1(t,n,a){if(a&&typeof a!="boolean"&&or(t,n,a)&&(n=a=r),a===r&&(typeof n=="boolean"?(a=n,n=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&n===r?(t=0,n=1):(t=pn(t),n===r?(n=t,t=0):n=pn(n)),t>n){var h=t;t=n,n=h}if(a||t%1||n%1){var m=Qu();return Zt(t+m*(n-t+ct("1e-"+((m+"").length-1))),n)}return Ka(t,n)}var p1=Ei(function(t,n,a){return n=n.toLowerCase(),t+(a?Af(n):n)});function Af(t){return vc(nt(t).toLowerCase())}function Tf(t){return t=nt(t),t&&t.replace(sn,ig).replace(ba,"")}function g1(t,n,a){t=nt(t),n=Er(n);var h=t.length;a=a===r?h:Vn(Me(a),0,h);var m=a;return a-=n.length,a>=0&&t.slice(a,m)==n}function y1(t){return t=nt(t),t&&vt.test(t)?t.replace(Ln,sg):t}function v1(t){return t=nt(t),t&&$t.test(t)?t.replace(It,"\\$&"):t}var _1=Ei(function(t,n,a){return t+(a?"-":"")+n.toLowerCase()}),b1=Ei(function(t,n,a){return t+(a?" ":"")+n.toLowerCase()}),m1=Nh("toLowerCase");function w1(t,n,a){t=nt(t),n=Me(n);var h=n?gi(t):0;if(!n||h>=n)return t;var m=(n-h)/2;return lo(Zs(m),a)+t+lo(Qs(m),a)}function E1(t,n,a){t=nt(t),n=Me(n);var h=n?gi(t):0;return n&&h<n?t+lo(n-h,a):t}function D1(t,n,a){t=nt(t),n=Me(n);var h=n?gi(t):0;return n&&h<n?lo(n-h,a)+t:t}function S1(t,n,a){return a||n==null?n=0:n&&(n=+n),Tg(nt(t).replace(xt,""),n||0)}function O1(t,n,a){return(a?or(t,n,a):n===r)?n=1:n=Me(n),Va(nt(t),n)}function I1(){var t=arguments,n=nt(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var x1=Ei(function(t,n,a){return t+(a?"_":"")+n.toLowerCase()});function P1(t,n,a){return a&&typeof a!="number"&&or(t,n,a)&&(n=a=r),a=a===r?te:a>>>0,a?(t=nt(t),t&&(typeof n=="string"||n!=null&&!pc(n))&&(n=Er(n),!n&&pi(t))?Cn(zr(t),0,a):t.split(n,a)):[]}var C1=Ei(function(t,n,a){return t+(a?" ":"")+vc(n)});function A1(t,n,a){return t=nt(t),a=a==null?0:Vn(Me(a),0,t.length),n=Er(n),t.slice(a,a+n.length)==n}function T1(t,n,a){var h=D.templateSettings;a&&or(t,n,a)&&(n=r),t=nt(t),n=Oo({},n,h,Bh);var m=Oo({},n.imports,h.imports,Bh),O=Wt(m),R=Pa(m,O),M,W,se=0,oe=n.interpolate||oi,ue="__p += '",le=Aa((n.escape||oi).source+"|"+oe.source+"|"+(oe===wt?ra:oi).source+"|"+(n.evaluate||oi).source+"|$","g"),_e="//# sourceURL="+(it.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ma+"]")+`
`;t.replace(le,function(De,Ge,Qe,Sr,ar,Or){return Qe||(Qe=Sr),ue+=t.slice(se,Or).replace(ca,og),Ge&&(M=!0,ue+=`' +
__e(`+Ge+`) +
'`),ar&&(W=!0,ue+=`';
`+ar+`;
__p += '`),Qe&&(ue+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),se=Or+De.length,De}),ue+=`';
`;var Ee=it.call(n,"variable")&&n.variable;if(!Ee)ue=`with (obj) {
`+ue+`
}
`;else if(ea.test(Ee))throw new Ae(v);ue=(W?ue.replace(Gr,""):ue).replace(nr,"$1").replace(nn,"$1;"),ue="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(W?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ue+`return __p
}`;var qe=Nf(function(){return rt(O,_e+"return "+ue).apply(r,R)});if(qe.source=ue,dc(qe))throw qe;return qe}function R1(t){return nt(t).toLowerCase()}function N1(t){return nt(t).toUpperCase()}function F1(t,n,a){if(t=nt(t),t&&(a||n===r))return qu(t);if(!t||!(n=Er(n)))return t;var h=zr(t),m=zr(n),O=zu(h,m),R=Hu(h,m)+1;return Cn(h,O,R).join("")}function j1(t,n,a){if(t=nt(t),t&&(a||n===r))return t.slice(0,Vu(t)+1);if(!t||!(n=Er(n)))return t;var h=zr(t),m=Hu(h,zr(n))+1;return Cn(h,0,m).join("")}function L1(t,n,a){if(t=nt(t),t&&(a||n===r))return t.replace(xt,"");if(!t||!(n=Er(n)))return t;var h=zr(t),m=zu(h,zr(n));return Cn(h,m).join("")}function U1(t,n){var a=c,h=g;if(Et(n)){var m="separator"in n?n.separator:m;a="length"in n?Me(n.length):a,h="omission"in n?Er(n.omission):h}t=nt(t);var O=t.length;if(pi(t)){var R=zr(t);O=R.length}if(a>=O)return t;var M=a-gi(h);if(M<1)return h;var W=R?Cn(R,0,M).join(""):t.slice(0,M);if(m===r)return W+h;if(R&&(M+=W.length-M),pc(m)){if(t.slice(M).search(m)){var se,oe=W;for(m.global||(m=Aa(m.source,nt(Pr.exec(m))+"g")),m.lastIndex=0;se=m.exec(oe);)var ue=se.index;W=W.slice(0,ue===r?M:ue)}}else if(t.indexOf(Er(m),M)!=M){var le=W.lastIndexOf(m);le>-1&&(W=W.slice(0,le))}return W+h}function M1(t){return t=nt(t),t&&Dt.test(t)?t.replace(mn,dg):t}var $1=Ei(function(t,n,a){return t+(a?" ":"")+n.toUpperCase()}),vc=Nh("toUpperCase");function Rf(t,n,a){return t=nt(t),n=a?r:n,n===r?cg(t)?yg(t):Zp(t):t.match(n)||[]}var Nf=Ke(function(t,n){try{return Gt(t,r,n)}catch(a){return dc(a)?a:new Ae(a)}}),B1=fn(function(t,n){return Ar(n,function(a){a=Qr(a),un(t,a,fc(t[a],t))}),t});function q1(t){var n=t==null?0:t.length,a=we();return t=n?bt(t,function(h){if(typeof h[1]!="function")throw new Tr(b);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var m=-1;++m<n;){var O=t[m];if(Gt(O[0],this,h))return Gt(O[1],this,h)}})}function z1(t){return d0(Nr(t,$))}function _c(t){return function(){return t}}function H1(t,n){return t==null||t!==t?n:t}var K1=jh(),V1=jh(!0);function vr(t){return t}function bc(t){return fh(typeof t=="function"?t:Nr(t,$))}function k1(t){return dh(Nr(t,$))}function G1(t,n){return ph(t,Nr(n,$))}var W1=Ke(function(t,n){return function(a){return Gi(a,t,n)}}),Y1=Ke(function(t,n){return function(a){return Gi(t,a,n)}});function mc(t,n,a){var h=Wt(n),m=so(n,h);a==null&&!(Et(n)&&(m.length||!h.length))&&(a=n,n=t,t=this,m=so(n,Wt(n)));var O=!(Et(a)&&"chain"in a)||!!a.chain,R=dn(t);return Ar(m,function(M){var W=n[M];t[M]=W,R&&(t.prototype[M]=function(){var se=this.__chain__;if(O||se){var oe=t(this.__wrapped__),ue=oe.__actions__=pr(this.__actions__);return ue.push({func:W,args:arguments,thisArg:t}),oe.__chain__=se,oe}return W.apply(t,Dn([this.value()],arguments))})}),t}function J1(){return Xe._===this&&(Xe._=Eg),this}function wc(){}function X1(t){return t=Me(t),Ke(function(n){return gh(n,t)})}var Q1=Qa(bt),Z1=Qa(Lu),eb=Qa(Da);function Ff(t){return sc(t)?Sa(Qr(t)):A0(t)}function tb(t){return function(n){return t==null?r:kn(t,n)}}var rb=Uh(),nb=Uh(!0);function Ec(){return[]}function Dc(){return!1}function ib(){return{}}function sb(){return""}function ob(){return!0}function ab(t,n){if(t=Me(t),t<1||t>K)return[];var a=te,h=Zt(t,te);n=we(n),t-=te;for(var m=xa(h,n);++a<t;)n(a);return m}function cb(t){return Re(t)?bt(t,Qr):Dr(t)?[t]:pr(Zh(nt(t)))}function ub(t){var n=++mg;return nt(t)+n}var hb=fo(function(t,n){return t+n},0),fb=Za("ceil"),lb=fo(function(t,n){return t/n},1),db=Za("floor");function pb(t){return t&&t.length?io(t,vr,Ma):r}function gb(t,n){return t&&t.length?io(t,we(n,2),Ma):r}function yb(t){return $u(t,vr)}function vb(t,n){return $u(t,we(n,2))}function _b(t){return t&&t.length?io(t,vr,za):r}function bb(t,n){return t&&t.length?io(t,we(n,2),za):r}var mb=fo(function(t,n){return t*n},1),wb=Za("round"),Eb=fo(function(t,n){return t-n},0);function Db(t){return t&&t.length?Ia(t,vr):0}function Sb(t,n){return t&&t.length?Ia(t,we(n,2)):0}return D.after=kv,D.ary=ff,D.assign=N_,D.assignIn=Of,D.assignInWith=Oo,D.assignWith=F_,D.at=j_,D.before=lf,D.bind=fc,D.bindAll=B1,D.bindKey=df,D.castArray=i_,D.chain=cf,D.chunk=dy,D.compact=py,D.concat=gy,D.cond=q1,D.conforms=z1,D.constant=_c,D.countBy=Dv,D.create=L_,D.curry=pf,D.curryRight=gf,D.debounce=yf,D.defaults=U_,D.defaultsDeep=M_,D.defer=Gv,D.delay=Wv,D.difference=yy,D.differenceBy=vy,D.differenceWith=_y,D.drop=by,D.dropRight=my,D.dropRightWhile=wy,D.dropWhile=Ey,D.fill=Dy,D.filter=Ov,D.flatMap=Pv,D.flatMapDeep=Cv,D.flatMapDepth=Av,D.flatten=nf,D.flattenDeep=Sy,D.flattenDepth=Oy,D.flip=Yv,D.flow=K1,D.flowRight=V1,D.fromPairs=Iy,D.functions=V_,D.functionsIn=k_,D.groupBy=Tv,D.initial=Py,D.intersection=Cy,D.intersectionBy=Ay,D.intersectionWith=Ty,D.invert=W_,D.invertBy=Y_,D.invokeMap=Nv,D.iteratee=bc,D.keyBy=Fv,D.keys=Wt,D.keysIn=yr,D.map=bo,D.mapKeys=X_,D.mapValues=Q_,D.matches=k1,D.matchesProperty=G1,D.memoize=wo,D.merge=Z_,D.mergeWith=If,D.method=W1,D.methodOf=Y1,D.mixin=mc,D.negate=Eo,D.nthArg=X1,D.omit=e1,D.omitBy=t1,D.once=Jv,D.orderBy=jv,D.over=Q1,D.overArgs=Xv,D.overEvery=Z1,D.overSome=eb,D.partial=lc,D.partialRight=vf,D.partition=Lv,D.pick=r1,D.pickBy=xf,D.property=Ff,D.propertyOf=tb,D.pull=jy,D.pullAll=of,D.pullAllBy=Ly,D.pullAllWith=Uy,D.pullAt=My,D.range=rb,D.rangeRight=nb,D.rearg=Qv,D.reject=$v,D.remove=$y,D.rest=Zv,D.reverse=uc,D.sampleSize=qv,D.set=i1,D.setWith=s1,D.shuffle=zv,D.slice=By,D.sortBy=Vv,D.sortedUniq=Gy,D.sortedUniqBy=Wy,D.split=P1,D.spread=e_,D.tail=Yy,D.take=Jy,D.takeRight=Xy,D.takeRightWhile=Qy,D.takeWhile=Zy,D.tap=pv,D.throttle=t_,D.thru=_o,D.toArray=Ef,D.toPairs=Pf,D.toPairsIn=Cf,D.toPath=cb,D.toPlainObject=Sf,D.transform=o1,D.unary=r_,D.union=ev,D.unionBy=tv,D.unionWith=rv,D.uniq=nv,D.uniqBy=iv,D.uniqWith=sv,D.unset=a1,D.unzip=hc,D.unzipWith=af,D.update=c1,D.updateWith=u1,D.values=Oi,D.valuesIn=h1,D.without=ov,D.words=Rf,D.wrap=n_,D.xor=av,D.xorBy=cv,D.xorWith=uv,D.zip=hv,D.zipObject=fv,D.zipObjectDeep=lv,D.zipWith=dv,D.entries=Pf,D.entriesIn=Cf,D.extend=Of,D.extendWith=Oo,mc(D,D),D.add=hb,D.attempt=Nf,D.camelCase=p1,D.capitalize=Af,D.ceil=fb,D.clamp=f1,D.clone=s_,D.cloneDeep=a_,D.cloneDeepWith=c_,D.cloneWith=o_,D.conformsTo=u_,D.deburr=Tf,D.defaultTo=H1,D.divide=lb,D.endsWith=g1,D.eq=Kr,D.escape=y1,D.escapeRegExp=v1,D.every=Sv,D.find=Iv,D.findIndex=tf,D.findKey=$_,D.findLast=xv,D.findLastIndex=rf,D.findLastKey=B_,D.floor=db,D.forEach=uf,D.forEachRight=hf,D.forIn=q_,D.forInRight=z_,D.forOwn=H_,D.forOwnRight=K_,D.get=gc,D.gt=h_,D.gte=f_,D.has=G_,D.hasIn=yc,D.head=sf,D.identity=vr,D.includes=Rv,D.indexOf=xy,D.inRange=l1,D.invoke=J_,D.isArguments=Yn,D.isArray=Re,D.isArrayBuffer=l_,D.isArrayLike=gr,D.isArrayLikeObject=Nt,D.isBoolean=d_,D.isBuffer=An,D.isDate=p_,D.isElement=g_,D.isEmpty=y_,D.isEqual=v_,D.isEqualWith=__,D.isError=dc,D.isFinite=b_,D.isFunction=dn,D.isInteger=_f,D.isLength=Do,D.isMap=bf,D.isMatch=m_,D.isMatchWith=w_,D.isNaN=E_,D.isNative=D_,D.isNil=O_,D.isNull=S_,D.isNumber=mf,D.isObject=Et,D.isObjectLike=Ct,D.isPlainObject=Zi,D.isRegExp=pc,D.isSafeInteger=I_,D.isSet=wf,D.isString=So,D.isSymbol=Dr,D.isTypedArray=Si,D.isUndefined=x_,D.isWeakMap=P_,D.isWeakSet=C_,D.join=Ry,D.kebabCase=_1,D.last=jr,D.lastIndexOf=Ny,D.lowerCase=b1,D.lowerFirst=m1,D.lt=A_,D.lte=T_,D.max=pb,D.maxBy=gb,D.mean=yb,D.meanBy=vb,D.min=_b,D.minBy=bb,D.stubArray=Ec,D.stubFalse=Dc,D.stubObject=ib,D.stubString=sb,D.stubTrue=ob,D.multiply=mb,D.nth=Fy,D.noConflict=J1,D.noop=wc,D.now=mo,D.pad=w1,D.padEnd=E1,D.padStart=D1,D.parseInt=S1,D.random=d1,D.reduce=Uv,D.reduceRight=Mv,D.repeat=O1,D.replace=I1,D.result=n1,D.round=wb,D.runInContext=k,D.sample=Bv,D.size=Hv,D.snakeCase=x1,D.some=Kv,D.sortedIndex=qy,D.sortedIndexBy=zy,D.sortedIndexOf=Hy,D.sortedLastIndex=Ky,D.sortedLastIndexBy=Vy,D.sortedLastIndexOf=ky,D.startCase=C1,D.startsWith=A1,D.subtract=Eb,D.sum=Db,D.sumBy=Sb,D.template=T1,D.times=ab,D.toFinite=pn,D.toInteger=Me,D.toLength=Df,D.toLower=R1,D.toNumber=Lr,D.toSafeInteger=R_,D.toString=nt,D.toUpper=N1,D.trim=F1,D.trimEnd=j1,D.trimStart=L1,D.truncate=U1,D.unescape=M1,D.uniqueId=ub,D.upperCase=$1,D.upperFirst=vc,D.each=uf,D.eachRight=hf,D.first=sf,mc(D,function(){var t={};return Jr(D,function(n,a){it.call(D.prototype,a)||(t[a]=n)}),t}(),{chain:!1}),D.VERSION=s,Ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){D[t].placeholder=D}),Ar(["drop","take"],function(t,n){Ye.prototype[t]=function(a){a=a===r?1:kt(Me(a),0);var h=this.__filtered__&&!n?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Zt(a,h.__takeCount__):h.__views__.push({size:Zt(a,te),type:t+(h.__dir__<0?"Right":"")}),h},Ye.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),Ar(["filter","map","takeWhile"],function(t,n){var a=n+1,h=a==f||a==x;Ye.prototype[t]=function(m){var O=this.clone();return O.__iteratees__.push({iteratee:we(m,3),type:a}),O.__filtered__=O.__filtered__||h,O}}),Ar(["head","last"],function(t,n){var a="take"+(n?"Right":"");Ye.prototype[t]=function(){return this[a](1).value()[0]}}),Ar(["initial","tail"],function(t,n){var a="drop"+(n?"":"Right");Ye.prototype[t]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(vr)},Ye.prototype.find=function(t){return this.filter(t).head()},Ye.prototype.findLast=function(t){return this.reverse().find(t)},Ye.prototype.invokeMap=Ke(function(t,n){return typeof t=="function"?new Ye(this):this.map(function(a){return Gi(a,t,n)})}),Ye.prototype.reject=function(t){return this.filter(Eo(we(t)))},Ye.prototype.slice=function(t,n){t=Me(t);var a=this;return a.__filtered__&&(t>0||n<0)?new Ye(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),n!==r&&(n=Me(n),a=n<0?a.dropRight(-n):a.take(n-t)),a)},Ye.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ye.prototype.toArray=function(){return this.take(te)},Jr(Ye.prototype,function(t,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),m=D[h?"take"+(n=="last"?"Right":""):n],O=h||/^find/.test(n);m&&(D.prototype[n]=function(){var R=this.__wrapped__,M=h?[1]:arguments,W=R instanceof Ye,se=M[0],oe=W||Re(R),ue=function(Ge){var Qe=m.apply(D,Dn([Ge],M));return h&&le?Qe[0]:Qe};oe&&a&&typeof se=="function"&&se.length!=1&&(W=oe=!1);var le=this.__chain__,_e=!!this.__actions__.length,Ee=O&&!le,qe=W&&!_e;if(!O&&oe){R=qe?R:new Ye(this);var De=t.apply(R,M);return De.__actions__.push({func:_o,args:[ue],thisArg:r}),new Rr(De,le)}return Ee&&qe?t.apply(this,M):(De=this.thru(ue),Ee?h?De.value()[0]:De.value():De)})}),Ar(["pop","push","shift","sort","splice","unshift"],function(t){var n=Hs[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",h=/^(?:pop|shift)$/.test(t);D.prototype[t]=function(){var m=arguments;if(h&&!this.__chain__){var O=this.value();return n.apply(Re(O)?O:[],m)}return this[a](function(R){return n.apply(Re(R)?R:[],m)})}}),Jr(Ye.prototype,function(t,n){var a=D[n];if(a){var h=a.name+"";it.call(bi,h)||(bi[h]=[]),bi[h].push({name:n,func:a})}}),bi[ho(r,ae).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Mg,Ye.prototype.reverse=$g,Ye.prototype.value=Bg,D.prototype.at=gv,D.prototype.chain=yv,D.prototype.commit=vv,D.prototype.next=_v,D.prototype.plant=mv,D.prototype.reverse=wv,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=Ev,D.prototype.first=D.prototype.head,Bi&&(D.prototype[Bi]=bv),D},yi=vg();Rt?((Rt.exports=yi)._=yi,ut._=yi):Xe._=yi}).call(fs)})(su,su.exports);var wS=Object.defineProperty,ES=Object.defineProperties,DS=Object.getOwnPropertyDescriptors,hd=Object.getOwnPropertySymbols,SS=Object.prototype.hasOwnProperty,OS=Object.prototype.propertyIsEnumerable,fd=(i,e,r)=>e in i?wS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,xo=(i,e)=>{for(var r in e||(e={}))SS.call(e,r)&&fd(i,r,e[r]);if(hd)for(var r of hd(e))OS.call(e,r)&&fd(i,r,e[r]);return i},IS=(i,e)=>ES(i,DS(e));function $r(i,e,r){let s;const o=ou(i);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${mS}?chainId=eip155:${o}&projectId=${r}`),s}function ou(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function xS(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function PS(i,e){const r=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!r.length)return[];const s=[];return r.forEach(o=>{const d=e.namespaces[o].accounts;s.push(...d)}),s}function CS(i,e={}){const r=ld(i),s=ld(e);return su.exports.merge(r,s)}function ld(i){var e,r,s,o;const d={};if(!Ti(i))return d;for(const[b,v]of Object.entries(i)){const w=sp(b)?[b]:v.chains,C=v.methods||[],A=v.events||[],$=v.rpcMap||{},G=To(b);d[G]=IS(xo(xo({},d[G]),v),{chains:Cc(w,(e=d[G])==null?void 0:e.chains),methods:Cc(C,(r=d[G])==null?void 0:r.methods),events:Cc(A,(s=d[G])==null?void 0:s.events),rpcMap:xo(xo({},$),(o=d[G])==null?void 0:o.rpcMap)})}return d}const Gp={},Lt=i=>Gp[i],qc=(i,e)=>{Gp[i]=e};class AS{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace);return typeof s>"u"?void 0:new Fn(new si(s,Lt("disableProviderPing")))}}class TS{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){const s=ou(e);if(!this.httpProviders[s]){const o=r||$r(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fn(new si(s,Lt("disableProviderPing")))}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const o=ou(r);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const o=parseInt(s,16);if(this.isChainApproved(o))this.setDefaultChain(`${o}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:e.chainId}),this.setDefaultChain(`${o}`);else throw new Error(`Failed to switch to chain 'eip155:${o}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class RS{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fn(new si(s,Lt("disableProviderPing")))}}class NS{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fn(new si(s,Lt("disableProviderPing")))}}class FS{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);e[r]=this.createHttpProvider(r,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Fn(new si(s,Lt("disableProviderPing")))}}class jS{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fn(new si(s,Lt("disableProviderPing")))}}class LS{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fn(new si(s,Lt("disableProviderPing")))}}var US=Object.defineProperty,MS=Object.defineProperties,$S=Object.getOwnPropertyDescriptors,dd=Object.getOwnPropertySymbols,BS=Object.prototype.hasOwnProperty,qS=Object.prototype.propertyIsEnumerable,pd=(i,e,r)=>e in i?US(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,Po=(i,e)=>{for(var r in e||(e={}))BS.call(e,r)&&pd(i,r,e[r]);if(dd)for(var r of dd(e))qS.call(e,r)&&pd(i,r,e[r]);return i},zc=(i,e)=>MS(i,$S(e));class Fu{constructor(e){this.events=new lu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||cd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new Fu(e);return await r.initialize(),r}async request(e,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Po({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,r,s){this.request(e,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:jt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(d=>{this.session=d}).catch(d=>{if(d.message!==kp)throw d;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(bn(r)){for(const s of r)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Nu.init({logger:this.providerOpts.logger||cd,relayUrl:this.providerOpts.relayUrl||vS,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>To(r)))];qc("client",this.client),qc("events",this.events),qc("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const s=PS(r,this.session),o=xS(s),d=CS(this.namespaces,this.optionalNamespaces),b=zc(Po({},d[r]),{accounts:s,chains:o});switch(r){case"eip155":this.rpcProviders[r]=new TS({namespace:b});break;case"solana":this.rpcProviders[r]=new RS({namespace:b});break;case"cosmos":this.rpcProviders[r]=new NS({namespace:b});break;case"polkadot":this.rpcProviders[r]=new AS({namespace:b});break;case"cip34":this.rpcProviders[r]=new FS({namespace:b});break;case"elrond":this.rpcProviders[r]=new jS({namespace:b});break;case"multiversx":this.rpcProviders[r]=new LS({namespace:b});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var s;const{namespaces:o}=r,d=(s=this.client)==null?void 0:s.session.get(e);this.session=zc(Po({},d),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",zc(Po({},jt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(jn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=e;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(e){const[r,s]=(e==null?void 0:e.split(":"))||["",""];if(r&&!Object.keys(this.namespaces).map(b=>To(b)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=To(Object.keys(this.namespaces)[0]),d=this.rpcProviders[o].getDefaultChain();return[o,d]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){var s;const[o,d]=this.validateChain(e);r||this.getProvider(o).setDefaultChain(d),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${d}`]).defaultChain=d,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",d)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${ud}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${ud}/${e}`)}}const zS=Fu,HS="wc",KS="ethereum_provider",VS=`${HS}@2:${KS}:`,kS="https://rpc.walletconnect.com/v1/",au=["eth_sendTransaction","personal_sign"],o5=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],cu=["chainChanged","accountsChanged"],a5=["message","disconnect","connect"];var GS=Object.defineProperty,WS=Object.defineProperties,YS=Object.getOwnPropertyDescriptors,gd=Object.getOwnPropertySymbols,JS=Object.prototype.hasOwnProperty,XS=Object.prototype.propertyIsEnumerable,yd=(i,e,r)=>e in i?GS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r,Hc=(i,e)=>{for(var r in e||(e={}))JS.call(e,r)&&yd(i,r,e[r]);if(gd)for(var r of gd(e))XS.call(e,r)&&yd(i,r,e[r]);return i},vd=(i,e)=>WS(i,YS(e));function uu(i){return Number(i[0].split(":")[1])}function Kc(i){return`0x${i.toString(16)}`}function QS(i){const{chains:e,optionalChains:r,methods:s,optionalMethods:o,events:d,optionalEvents:b,rpcMap:v}=i;if(!bn(e))throw new Error("Invalid chains");const w=e,C=s||au,A=d||cu,$={[uu(w)]:v[uu(w)]},G={chains:w,methods:C,events:A,rpcMap:$},B=d==null?void 0:d.filter(ae=>!cu.includes(ae)),F=s==null?void 0:s.filter(ae=>!au.includes(ae));if(!r&&!b&&!o&&!(B!=null&&B.length)&&!(F!=null&&F.length))return{required:G};const J=(B==null?void 0:B.length)&&(F==null?void 0:F.length)||!r,Q={chains:[...new Set(J?w.concat(r||[]):r)],methods:[...new Set(C.concat(o||[]))],events:[...new Set(A.concat(b||[]))],rpcMap:v};return{required:G,optional:Q}}class ju{constructor(){this.events=new Ir.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=VS,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new ju;return await r.initialize(e),r}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,r){this.signer.sendAsync(e,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=QS(this.rpc);try{const o=await new Promise(async(b,v)=>{var w;this.rpc.showQrModal&&((w=this.modal)==null||w.subscribeModal(C=>{!C.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),v(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(vd(Hc({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(C=>{b(C)}).catch(C=>{v(new Error(C.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const d=nE(o.namespaces,[this.namespace]);this.setAccounts(d),this.events.emit("connect",{chainId:Kc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",Kc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",vd(Hc({},jt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Kc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,s,o]=e.split(":");return{chainId:`${r}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,s;return{chains:((r=e.chains)==null?void 0:r.map(o=>this.formatChainId(o)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(o=>this.formatChainId(o)):void 0,methods:(e==null?void 0:e.methods)||au,events:(e==null?void 0:e.events)||cu,optionalMethods:(e==null?void 0:e.optionalMethods)||[],optionalEvents:(e==null?void 0:e.optionalEvents)||[],rpcMap:(e==null?void 0:e.rpcMap)||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(s=e==null?void 0:e.qrModalOptions)!=null?s:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,r)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=uu(this.rpc.chains),this.signer=await zS.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await Ob(()=>import("./index-e5049ec6.js").then(o=>o.a),["assets/index-e5049ec6.js","assets/index-37e39c81.js","assets/index-cc075105.css"]);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Hc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:s,rpcMap:o}=e;r&&bn(r)&&(this.rpc.chains=r.map(d=>this.formatChainId(d)),r.forEach(d=>{this.rpc.rpcMap[d]=(o==null?void 0:o[d])||this.getRpcUrl(d)})),s&&bn(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(d=>this.formatChainId(d)),s.forEach(d=>{this.rpc.rpcMap[d]=(o==null?void 0:o[d])||this.getRpcUrl(d)}))}getRpcUrl(e,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${kS}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const c5=ju;export{c5 as EthereumProvider,a5 as OPTIONAL_EVENTS,o5 as OPTIONAL_METHODS,cu as REQUIRED_EVENTS,au as REQUIRED_METHODS,ju as default};
